<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>mksys</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('buildToolsmksys.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">mksys </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><code>mksys</code> is the main Legato build tool and builds complete systems to update your target. It generates a "system bundle" <a class="el" href="legatoServicesUpdatePack.html">update pack (<code></code>.update file)</a> to install and run on a target device.</p>
<p>System bundles are compressed archives containing a collection of apps, kernel objects and access control configuration settings that allow the apps to interact with the framework and each other.</p>
<p>The main input for <code>mksys</code> is an <a class="el" href="defFilesSdef.html">system definition (.sdef) file</a> that contains these definitions:</p><ul>
<li>apps to deploy to the target device</li>
<li>permitted inter-app communication</li>
<li>limits, environment variables, and configuration settings to add or override.</li>
<li>kernel objects to add new packages to the Linux OS.</li>
</ul>
<p><code>mksys</code> will parse the <code></code>.sdef file, find the <code></code>.adef or <code></code>.app files for the apps, build or bundle the apps, generate on-target access control configuration settings, and bundle everything into a system bundle for atomic (all or nothing) installation on the target device.</p>
<p><code>mksys</code> can also help to validate inter-app dependencies and conflicts, while <a class="el" href="buildToolsmkapp.html">mkapp</a> can't because it only knows about the one app it's building. For example, certain typos in binding values won't be detected by <a class="el" href="buildToolsmkapp.html">mkapp</a> and can cause your app to hang at start-up. <code>mksys</code> can catch these errors at build time.</p>
<p>See <a class="el" href="defFiles.html">Definition Files</a> for information on specifying what <code>mksys</code> should build and how to configure the <code></code>.sdef to build a customize system.</p>
<p>See <a class="el" href="buildToolsmk.html#buildToolsmk_ToolChainConfig">Tool Chain Configuration</a> for information on how <code>mksys</code> decides what compilers, etc. to use.</p>
<h1><a class="anchor" id="buildToolsmksys_SysPack"></a>
Building a System</h1>
<p>When you are creating multiple apps, customizing system settings or adding or removing platform services you will want to build your system to distribute for installation on a target.</p>
<p>To build a system for a particular target use <code>mksys</code> with the -t option to build for a particular target and then specify your <a class="el" href="defFilesSdef.html">system's .sdef</a> file:</p>
<p>Example: </p><pre class="fragment">$ mksys -t wp85 mySystem.sdef
</pre><p>This will produce a file called <code>mySystem.wp85.update</code> which is a system package ready to install on a target. Use <a class="el" href="toolsHost_update.html">update</a> to install the system on your target:</p>
<p>Example: </p><pre class="fragment">$ update mySystem.wp85.update 192.168.2.2
</pre><h1><a class="anchor" id="buildToolsmksys_Usage"></a>
Usage</h1>
<p><code>mksys</code> provides flags to set the target, set build options, and specify additional search directories:</p>
<pre class="fragment">Command line parameters
  -C, --cflags, &lt;string&gt;
        (Multiple, optional) Specify extra flags to be passed to the C compiler.

  -L, --ldflags, &lt;string&gt;
        (Multiple, optional) Specify extra flags to be passed to the linker when linking
        executables.

  -X, --cxxflags, &lt;string&gt;
        (Multiple, optional) Specify extra flags to be passed to the C++ compiler.

  -d, --debug-dir, &lt;string&gt;
        (Optional) Generate debug symbols and place them in the specified directory.  Debug symbol
        files will be named with build-id

  -g, --generate-code
        (Optional) Only generate code, but don't compile, link, or bundle anything. The interface
        definition (include) files will be generated, along with component and executable main files
        and configuration files. This is useful for supporting context-sensitive auto-complete and
        related features in source code editors, for example.

  -i, --interface-search, &lt;string&gt;
        (Multiple, optional) Add a directory to the interface search path.

  -n, --dont-run-ninja
        (Optional) Even if a build.ninja file exists, ignore it, delete the staging area, parse all
        inputs, and generate all output files, including a new copy of the build.ninja, then exit
        without running ninja.  This is used by the build.ninja to to regenerate itself and any
        other files that need to be regenerated when the build.ninja finds itself out of date.

  -o, --output-dir, &lt;string&gt;
        (Optional) Specify the directory into which the final, built system file(ready to be
        installed on the target) should be put.

  -s, --source-search, &lt;string&gt;
        (Multiple, optional) Add a directory to the source search path.

  -t, --target, &lt;string&gt;
        (Optional) Set the compile target (e.g., wp85 or wp76xx).

  -v, --verbose
        (Optional) Set into verbose mode for extra diagnostic information.

  -w, --object-dir, &lt;string&gt;
        (Optional) Specify the directory into which any intermediate build artifacts (such as .o
        files and generated source code files) should be put.
</pre><p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
