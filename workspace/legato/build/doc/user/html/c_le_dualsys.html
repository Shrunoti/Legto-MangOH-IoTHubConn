<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Dual Systems Update API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('c_le_dualsys.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Dual Systems Update API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__dualsys__interface_8h.html">API Reference</a></p>
<p>Dual systems are systems composed with two set of partitions: one is said "ACTIVE", so currently in use, and the other said "UPDATE", so not used but ready-to-use.</p>
<p>On dual systems, when Legato updates an image through the le_fwupdate API, it works on the UPDATE system. And then an "install" command performs a switch from UPDATE to ACTIVE after a reboot: The new ACTIVE system is used. The UPDATE partition becomes ready for a new update or for roll-back if the new ACTIVE fails to start properly.</p>
<p>In each set, three sub-systems are defined:</p><ul>
<li>The "modem" group for all binaries and filesystem related to modem core,</li>
<li>The "lk" group for the LK bootloader,</li>
<li>The "linux" group the kernel, rootfs and legato partitions.</li>
</ul>
<h1><a class="anchor" id="le_dualsys_binding"></a>
IPC interfaces binding</h1>
<p>All the functions of this API are provided by the <b>le_dualsys</b> service.</p>
<p>Here's a code sample binding to the le_dualsys service: </p><pre class="fragment">bindings:
{
   clientExe.clientComponent.le_dualsys -&gt; fwupdateService.le_dualsys
}
</pre><dl class="section warning"><dt>Warning</dt><dd>All of these APIs are only available for all dual systems platforms. Please refer to the Product Technical Specification document of your platform for further details. Please refer to platformConstraintsFwUpdate for details.</dd></dl>
<h1><a class="anchor" id="le_dualsys_DisableSyncBeforeUpdate"></a>
Disable the check of sync before updating</h1>
<p>It is possible to force the update of any partition even if the systems are not synchronized. This is done by calling le_fwupdate_DisableSyncBeforeUpdate() with the value true. If the value is false, the synchronization will be mandatory before performing an update. Note that the synchronization is automatically done by calling the function <a class="el" href="le__fwupdate__interface_8h.html#a481234992a0fbc18f97c88f68dc00837">le_fwupdate_InitDownload()</a> when the synchronization check is enabled.</p>
<h1><a class="anchor" id="le_dualsys_system"></a>
Defining a System</h1>
<p>It is possible to define a system by calling <a class="el" href="le__dualsys__interface_8h.html#a333e42eb7703071817cd1fde3def8ce7">le_dualsys_SetSystem()</a>. This function takes three values, one for the modem sub-system, one for the lk sub-system and one for the linux sub-system. The values are one of 0 for system 1 or 1 for system 2. When set, the system will be usable after the next reset. If no error is encountered, this function will perform a reset.</p>
<p>It is possible the get the last defined system by calling the le_dualsys_GetSystem(). This function returns the values for the three sub-systems. This system is updated accordingly the last system set by <a class="el" href="le__dualsys__interface_8h.html#a333e42eb7703071817cd1fde3def8ce7">le_dualsys_SetSystem()</a>.</p>
<p>It is possible to get the current active system by calling <a class="el" href="le__dualsys__interface_8h.html#ada5eedff83c28236bafcf0a9bf85ae54">le_dualsys_GetCurrentSystem()</a>. This function returns the values for the three sub-systems. If <a class="el" href="le__dualsys__interface_8h.html#a333e42eb7703071817cd1fde3def8ce7">le_dualsys_SetSystem()</a> is called before <a class="el" href="le__dualsys__interface_8h.html#ada5eedff83c28236bafcf0a9bf85ae54">le_dualsys_GetCurrentSystem()</a>, the returned values may differ as they represent the current system in use.</p>
<hr/>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
