<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Update</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('legatoServicesUpdate.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Update </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="legatoServicesUpdate_Overview"></a>
Overview</h1>
<p>The process of updating software in a Legato based system split into multiple parts:</p><ul>
<li>the <code>updateDaemon</code> service which accepts updates over it's API <a class="el" href="c_update.html">Update API</a>.</li>
<li>separate update clients, provide the ability to initiate updates over various channels (command line, ssh, or even from the cloud using an appropriate cloud client).</li>
<li>parts of the Legato software stack assist the update service in providing its functionality.</li>
<li>the startup system also plays a roll in update and rollback.</li>
</ul>
<p>For the specifics of what the update service does and the actions that it performs see <a class="el" href="conceptsUpdates.html">Updates</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Because the specifics of how platforms function can differ, the behavior of the of the update service can vary by platform. This document focuses on the update process for common Sierra Wireless modules.</dd></dl>
<h2><a class="anchor" id="legatoServicesUpdate_AboutService"></a>
Update Service</h2>
<p>The <code>updateDaemon</code> process is part of Legato's core system services. It is run and controlled by the Supervisor and isn't a Legato app, so can't be started or stopped.</p>
<p>When the update receives a <a class="el" href="legatoServicesUpdatePack.html">.update file</a> it extracts update commands and files from the <code></code>.update pack and applies them to the target.</p>
<p>The <code></code>.update file commands understood by the service are:</p><ul>
<li>Update System &ndash; <b>Install a Legato system.</b> Updates the runtime environment but doesn't modify the OS or any support device firmware.</li>
<li>Update App &ndash; <b>Install an application.</b> If an application of the same name is already installed it is replaced with the version found within the <code></code>.update pack.</li>
<li>Remove App &ndash; <b>Removes the named application.</b> This is the only update command that doesn't have any data files associated with it.</li>
<li>Update Firmware &ndash; Update the firmware of an attached hardware device. For example the cellular modem found in wireless modules. On systems without a firmware portion, like the virtual platform, this command is unsupported.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>On Sierra Wireless modules, firmware level updates can include replacement copies of whole partition file systems. It is possible to replace the "Base" version of Legato this way. See legatoServicesUpdate_Base for more details on this. It is also possible to create a <code></code>.cwe file that instructs the modem to erase and reformat the user data partition allowing the user to create an update that takes their module back to a factor default state.</dd>
<dd>
On Sierra Wireless modules when firmware updates are installed a full reboot of the module will be triggered. For system updates only the runtime environment will be restarted.</dd></dl>
<h2><a class="anchor" id="legatoServicesUpdate_APIs"></a>
Update APIs</h2>
<p>The following APIs are provided by the update service to monitor and control the update process:</p><ul>
<li><a class="el" href="c_update.html">Update API</a></li>
<li><a class="el" href="c_updateCtrl.html">Update Control API</a></li>
<li><a class="el" href="c_le_instStat.html">Install Status API</a></li>
<li>c_le_appRemove</li>
</ul>
<h3><a class="anchor" id="legatoServicesUpdate_APIs_update"></a>
Update API</h3>
<p><b>API: <a class="el" href="c_update.html">Update API</a> </b></p>
<p>The Update API is used to push an update to the service and provides functions for getting information about the current and previously installed system.</p>
<h3><a class="anchor" id="legatoServicesUpdate_APIs_updateCtrl"></a>
Update Control API</h3>
<p><b>API: <a class="el" href="c_updateCtrl.html">Update Control API</a></b></p>
<p>The update control API is used to control the update process. For example, applying an update can cause the system to restart itself, an application can use le_updateCtrl.api to choose to block updates from being applied, if it is running a critical process that can't be interrupted.</p>
<h3><a class="anchor" id="legatoServicesUpdate_APIs_instStat"></a>
Install Status API</h3>
<p><b>API: <a class="el" href="c_le_instStat.html">Install Status API</a></b></p>
<p>The API Install Status can be used by an application to watch for other applications being installed or uninstalled from a system.</p>
<h3><a class="anchor" id="legatoServicesUpdate_APIs_appRemove"></a>
App Remove API</h3>
<p><b>API: c_le_appRemove</b></p>
<p>The App Remove API is used to remove applications from the running system.</p>
<h2><a class="anchor" id="legatoServicesUpdate_Tools"></a>
Update Clients</h2>
<p>Within the application framework there are multiple clients that use the update service:</p><ul>
<li>a command line client <a class="el" href="toolsHost_update.html">update</a> tool, used to transfer update packs from your dev machine to the target for installation.</li>
<li><a class="el" href="legatoServicesAirVantage.html">AirVantage Connector</a> uses the <code>update</code> service to receive and install software updates from the AirVantage server.</li>
</ul>
<p>You are also able to create your own app to handle updates. If you have your own method or protocol for delivering updates, you can build a service to download and control the updates.</p>
<h1>API Overview </h1>
<table class="doxtable">
<tr>
<th>Service </th><th>Description </th><th align="center">multi-app safe  </th></tr>
<tr>
<td><a class="el" href="c_update.html">Update API</a> </td><td>Apply app and firmware updates </td><td align="center"><div class="image">
<img src="green_dot.png" alt="green_dot.png"/>
</div>
 </td></tr>
<tr>
<td><a class="el" href="c_updateCtrl.html">Update Control API</a> </td><td>Control app and firmware updates </td><td align="center"><div class="image">
<img src="green_dot.png" alt="green_dot.png"/>
</div>
 </td></tr>
<tr>
<td><a class="el" href="c_le_instStat.html">Install Status API</a> </td><td>App install/uninstall notification </td><td align="center"><div class="image">
<img src="green_dot.png" alt="green_dot.png"/>
</div>
 </td></tr>
<tr>
<td><a class="el" href="c_fwupdate.html">Firmware Update API</a> </td><td>Firmware image updates </td><td align="center"></td></tr>
<tr>
<td><a class="el" href="c_flash.html">Flash API</a> </td><td>Flash management </td><td align="center"><div class="image">
<img src="green_dot.png" alt="green_dot.png"/>
</div>
 </td></tr>
<tr>
<td><a class="el" href="c_le_dualsys.html">Dual Systems Update API</a> </td><td>Dual systems partition definition </td><td align="center"></td></tr>
</table>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
