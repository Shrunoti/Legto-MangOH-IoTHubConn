\hypertarget{atom_file_8c}{}\section{framework/liblegato/linux/atom\+File.c File Reference}
\label{atom_file_8c}\index{framework/liblegato/linux/atom\+File.\+c@{framework/liblegato/linux/atom\+File.\+c}}
{\ttfamily \#include \char`\"{}legato.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}file\+Descriptor.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}file.\+h\char`\"{}}\\*
{\ttfamily \#include $<$sys/file.\+h$>$}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct_file_access__t}{File\+Access\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{atom_file_8c_a373fa9b161f8f28a558898495a3c6ea9}{T\+E\+M\+P\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}~\char`\"{}.bak$\sim$$\sim$\+X\+X\+X\+X\+XX\char`\"{}
\item 
\#define \hyperlink{atom_file_8c_abcace1b5b34edd5d4222e933b5a49d3a}{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}~\char`\"{}.lock$\sim$$\sim$\+X\+X\+X\+X\+XX\char`\"{}
\item 
\#define \hyperlink{atom_file_8c_a836e28e9463a55cf4b1ef12822e74bc9}{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+T\+E\+M\+P\+\_\+\+D\+IR}~\char`\"{}/tmp/\char`\"{}
\item 
\#define \hyperlink{atom_file_8c_a0376b2ead2de10bb7ab6a4d21ec304e9}{L\+O\+CK}~\hyperlink{sbtrace_8c_a7c6c2e5e914cf8eca19d150e90f3b106}{L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+lock(\&\hyperlink{thread_8c_abc03085ccf7c38e092cdf06bf6b98ea6}{Mutex}) == 0);
\begin{DoxyCompactList}\small\item\em Locks the mutex. \end{DoxyCompactList}\item 
\#define \hyperlink{atom_file_8c_ac82effb31e82e32254efc8b57251d59e}{U\+N\+L\+O\+CK}~\hyperlink{sbtrace_8c_a7c6c2e5e914cf8eca19d150e90f3b106}{L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+unlock(\&\hyperlink{thread_8c_abc03085ccf7c38e092cdf06bf6b98ea6}{Mutex}) == 0);
\begin{DoxyCompactList}\small\item\em Unlocks the mutex. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{struct_file_access__t}{File\+Access\+\_\+t} $\ast$ \hyperlink{atom_file_8c_a4c9e5c68d2f4fe9426343651f03fe2cf}{Get\+File\+Data} (int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd})
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{atom_file_8c_af5574d8131a085023934d9b50f091a05}{Save\+File\+Data} (int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd}, int lock\+Fd, int temp\+Fd, const char $\ast$path\+Name\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{atom_file_8c_a3a083ec8b672de9898cab404ed1624e8}{Delete\+File\+Data} (\hyperlink{struct_file_access__t}{File\+Access\+\_\+t} $\ast$access\+Ptr)
\item 
static \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_ae27dc4d8a7a49f4c795f8951fbb2a2e5}{Delete\+File} (const char $\ast$file\+Path)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{atom_file_8c_a9c4c93762cff42d96ac2cf13ff0a347b}{Get\+File\+Path} (const char $\ast$origin\+File\+Path, const char $\ast$file\+Extension, char $\ast$out\+File\+Path, size\+\_\+t file\+Path\+Size)
\item 
static \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_a8a66ae9105529160fa42862c93a18347}{Check\+If\+Reg\+File\+Exist} (const char $\ast$file\+Path)
\item 
static int \hyperlink{atom_file_8c_a09a2db1a9c91aaaeb98e7e1ce6550ba0}{Open\+Lock\+File} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, bool blocking)
\item 
static int \hyperlink{atom_file_8c_a2aea9e98b5bc5c62952bd47471deacf4}{Create\+Temp\+From\+Original} (const char $\ast$orig\+Path\+Ptr, const char $\ast$temp\+Path\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, bool copy)
\item 
static F\+I\+LE $\ast$ \hyperlink{atom_file_8c_a38b45a33096b6719d6255e67e701afa3}{Create\+Temp\+Stream\+From\+Original} (const char $\ast$orig\+Path\+Ptr, const char $\ast$temp\+Path\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, bool copy, \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} $\ast$result\+Ptr)
\item 
static int \hyperlink{atom_file_8c_a7d4542679429a6fb1dcb83ede721892a}{Open} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, bool blocking)
\item 
static int \hyperlink{atom_file_8c_acdeb415e99062762b23a0ede864e9c3c}{Create} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, \hyperlink{le__file_lock_8h_a35d8c575df68d1da52a1048916f7e7d9}{le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t} create\+Mode, mode\+\_\+t permissions, bool blocking)
\item 
static \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_aa61038be2a1d8b3eb207a6d02d56feaf}{Sync\+File} (\hyperlink{struct_file_access__t}{File\+Access\+\_\+t} $\ast$access\+Ptr, const char $\ast$temp\+File\+Path)
\item 
static \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_ac9bc94af099b19318174960fcdea7598}{Close} (int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd}, bool commit)
\item 
static \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_a2f4af2116243474c7494ca9319414797}{Delete} (const char $\ast$path\+Name\+Ptr, bool blocking)
\item 
int \hyperlink{atom_file_8c_a43f88f0430d01f3828ac9310b48974e7}{le\+\_\+atom\+File\+\_\+\+Open} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode)
\item 
int \hyperlink{atom_file_8c_a17672cb7568a41dfc4c84244e1104204}{le\+\_\+atom\+File\+\_\+\+Create} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, \hyperlink{le__file_lock_8h_a35d8c575df68d1da52a1048916f7e7d9}{le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t} create\+Mode, mode\+\_\+t permissions)
\item 
int \hyperlink{atom_file_8c_a57e9641d647ae59106bab67b5690cfb4}{le\+\_\+atom\+File\+\_\+\+Try\+Open} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode)
\item 
int \hyperlink{atom_file_8c_af56b841ef635512caf5011824ace74e8}{le\+\_\+atom\+File\+\_\+\+Try\+Create} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, \hyperlink{le__file_lock_8h_a35d8c575df68d1da52a1048916f7e7d9}{le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t} create\+Mode, mode\+\_\+t permissions)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{atom_file_8c_a2c44b530b5d7513e1de9ed28bbf651c0}{le\+\_\+atom\+File\+\_\+\+Cancel} (int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd})
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_a8f8397f267beafb22701b422b4410707}{le\+\_\+atom\+File\+\_\+\+Close} (int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd})
\item 
static F\+I\+LE $\ast$ \hyperlink{atom_file_8c_a1780cd0da9775abe9210542d2fcb3d5a}{Open\+Stream} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, bool blocking, \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} $\ast$result\+Ptr)
\item 
static F\+I\+LE $\ast$ \hyperlink{atom_file_8c_a24589147c26f6b8aabe049ef5a45fd24}{Create\+Stream} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, \hyperlink{le__file_lock_8h_a35d8c575df68d1da52a1048916f7e7d9}{le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t} create\+Mode, mode\+\_\+t permissions, bool blocking, \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} $\ast$result\+Ptr)
\item 
static \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_aaf9e1cd1e9865bc1b81611697420da02}{Close\+Stream} (F\+I\+LE $\ast$file, bool commit)
\item 
F\+I\+LE $\ast$ \hyperlink{atom_file_8c_a9eecd192057a65b94255cc3fe042d7a2}{le\+\_\+atom\+File\+\_\+\+Open\+Stream} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} $\ast$result\+Ptr)
\item 
F\+I\+LE $\ast$ \hyperlink{atom_file_8c_a84bd503ee3efb23393bc7228715b85c1}{le\+\_\+atom\+File\+\_\+\+Create\+Stream} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, \hyperlink{le__file_lock_8h_a35d8c575df68d1da52a1048916f7e7d9}{le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t} create\+Mode, mode\+\_\+t permissions, \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} $\ast$result\+Ptr)
\item 
F\+I\+LE $\ast$ \hyperlink{atom_file_8c_a5112afbf738c0f9d4909bdbc6da5c99d}{le\+\_\+atom\+File\+\_\+\+Try\+Open\+Stream} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} $\ast$result\+Ptr)
\item 
F\+I\+LE $\ast$ \hyperlink{atom_file_8c_a0376766efe9b1768e939714420c0b47d}{le\+\_\+atom\+File\+\_\+\+Try\+Create\+Stream} (const char $\ast$path\+Name\+Ptr, \hyperlink{le__file_lock_8h_a5e5400e33a5e10b7c624748a9ce11280}{le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t} access\+Mode, \hyperlink{le__file_lock_8h_a35d8c575df68d1da52a1048916f7e7d9}{le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t} create\+Mode, mode\+\_\+t permissions, \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} $\ast$result\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{atom_file_8c_ae5cf35b73463f7eea098aba57587b7c3}{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream} (F\+I\+LE $\ast$file\+Stream\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_aea745228ae746df24005a10ba06edd57}{le\+\_\+atom\+File\+\_\+\+Close\+Stream} (F\+I\+LE $\ast$file\+Stream\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_a0c305e7a46be873ce33e59fcd4285dfe}{le\+\_\+atom\+File\+\_\+\+Delete} (const char $\ast$path\+Name\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{atom_file_8c_a113bc9bb8b5c685092263061b018e8ce}{le\+\_\+atom\+File\+\_\+\+Try\+Delete} (const char $\ast$path\+Name\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{atom_file_8c_a8643568006aedb9cd5f8f720f7932042}{atom\+File\+\_\+\+Init} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static pthread\+\_\+mutex\+\_\+t \hyperlink{atom_file_8c_abc03085ccf7c38e092cdf06bf6b98ea6}{Mutex} = P\+T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+Z\+ER
\item 
static \hyperlink{le__mem_8h_a44a896f6a0a1a8c733e8038eb332989e}{le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} \hyperlink{atom_file_8c_a1d9b284eb284bb2630b4ecf35c42a8e0}{File\+Access\+Pool}
\item 
static \hyperlink{structle__dls___list__t}{le\+\_\+dls\+\_\+\+List\+\_\+t} \hyperlink{atom_file_8c_ac9aebd4f0d4334495126870207af62ed}{File\+Access\+List} = \hyperlink{le__doubly_linked_list_8h_a68f28b61cdfd004591f24730b4d5a740}{L\+E\+\_\+\+D\+L\+S\+\_\+\+L\+I\+S\+T\+\_\+\+I\+N\+IT}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{atom\+File.\+c@{atom\+File.\+c}!L\+O\+CK@{L\+O\+CK}}
\index{L\+O\+CK@{L\+O\+CK}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{L\+O\+CK}{LOCK}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+O\+CK~{\bf L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+lock(\&{\bf Mutex}) == 0);}\hypertarget{atom_file_8c_a0376b2ead2de10bb7ab6a4d21ec304e9}{}\label{atom_file_8c_a0376b2ead2de10bb7ab6a4d21ec304e9}


Locks the mutex. 

\index{atom\+File.\+c@{atom\+File.\+c}!L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON@{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}}
\index{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON@{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}{LOCK_FILE_EXTENSION}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON~\char`\"{}.lock$\sim$$\sim$\+X\+X\+X\+X\+XX\char`\"{}}\hypertarget{atom_file_8c_abcace1b5b34edd5d4222e933b5a49d3a}{}\label{atom_file_8c_abcace1b5b34edd5d4222e933b5a49d3a}
Extension used for lock file \index{atom\+File.\+c@{atom\+File.\+c}!L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+T\+E\+M\+P\+\_\+\+D\+IR@{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+T\+E\+M\+P\+\_\+\+D\+IR}}
\index{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+T\+E\+M\+P\+\_\+\+D\+IR@{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+T\+E\+M\+P\+\_\+\+D\+IR}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+T\+E\+M\+P\+\_\+\+D\+IR}{LOCK_FILE_TEMP_DIR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+O\+C\+K\+\_\+\+F\+I\+L\+E\+\_\+\+T\+E\+M\+P\+\_\+\+D\+IR~\char`\"{}/tmp/\char`\"{}}\hypertarget{atom_file_8c_a836e28e9463a55cf4b1ef12822e74bc9}{}\label{atom_file_8c_a836e28e9463a55cf4b1ef12822e74bc9}
Temp directory to use for lock file when directory is not writable \index{atom\+File.\+c@{atom\+File.\+c}!T\+E\+M\+P\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON@{T\+E\+M\+P\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}}
\index{T\+E\+M\+P\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON@{T\+E\+M\+P\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{T\+E\+M\+P\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON}{TEMP_FILE_EXTENSION}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+E\+M\+P\+\_\+\+F\+I\+L\+E\+\_\+\+E\+X\+T\+E\+N\+S\+I\+ON~\char`\"{}.bak$\sim$$\sim$\+X\+X\+X\+X\+XX\char`\"{}}\hypertarget{atom_file_8c_a373fa9b161f8f28a558898495a3c6ea9}{}\label{atom_file_8c_a373fa9b161f8f28a558898495a3c6ea9}
Extension used for temporary file \index{atom\+File.\+c@{atom\+File.\+c}!U\+N\+L\+O\+CK@{U\+N\+L\+O\+CK}}
\index{U\+N\+L\+O\+CK@{U\+N\+L\+O\+CK}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{U\+N\+L\+O\+CK}{UNLOCK}}]{\setlength{\rightskip}{0pt plus 5cm}\#define U\+N\+L\+O\+CK~{\bf L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+unlock(\&{\bf Mutex}) == 0);}\hypertarget{atom_file_8c_ac82effb31e82e32254efc8b57251d59e}{}\label{atom_file_8c_ac82effb31e82e32254efc8b57251d59e}


Unlocks the mutex. 



\subsection{Function Documentation}
\index{atom\+File.\+c@{atom\+File.\+c}!atom\+File\+\_\+\+Init@{atom\+File\+\_\+\+Init}}
\index{atom\+File\+\_\+\+Init@{atom\+File\+\_\+\+Init}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{atom\+File\+\_\+\+Init(void)}{atomFile_Init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} atom\+File\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a8643568006aedb9cd5f8f720f7932042}{}\label{atom_file_8c_a8643568006aedb9cd5f8f720f7932042}
Initialize the atomic file access internal memory pools. This function is meant to be called from Legato\textquotesingle{}s internal init. \index{atom\+File.\+c@{atom\+File.\+c}!Check\+If\+Reg\+File\+Exist@{Check\+If\+Reg\+File\+Exist}}
\index{Check\+If\+Reg\+File\+Exist@{Check\+If\+Reg\+File\+Exist}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Check\+If\+Reg\+File\+Exist(const char $\ast$file\+Path)}{CheckIfRegFileExist(const char *filePath)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf le\+\_\+result\+\_\+t} Check\+If\+Reg\+File\+Exist (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a8a66ae9105529160fa42862c93a18347}{}\label{atom_file_8c_a8a66ae9105529160fa42862c93a18347}
Checks the file at given file system path.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if the file exists and is a normal file. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if file does not exists. L\+E\+\_\+\+F\+A\+U\+LT for any other error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Path} & Path to the file in question. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Close@{Close}}
\index{Close@{Close}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Close(int fd, bool commit)}{Close(int fd, bool commit)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf le\+\_\+result\+\_\+t} Close (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{bool}]{commit}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_ac9bc94af099b19318174960fcdea7598}{}\label{atom_file_8c_ac9bc94af099b19318174960fcdea7598}
Commit or cancel all changes done on the file.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+F\+A\+U\+LT if there was an error 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & File descriptor to close. \\
\hline
\mbox{\tt in}  & {\em commit} & true to commit, false to cancel changes. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Close\+Stream@{Close\+Stream}}
\index{Close\+Stream@{Close\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Close\+Stream(\+F\+I\+L\+E $\ast$file, bool commit)}{CloseStream(FILE *file, bool commit)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf le\+\_\+result\+\_\+t} Close\+Stream (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{file, }
\item[{bool}]{commit}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_aaf9e1cd1e9865bc1b81611697420da02}{}\label{atom_file_8c_aaf9e1cd1e9865bc1b81611697420da02}
Commit or cancel all changes done on the stream. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file} & File Stream to close \\
\hline
\mbox{\tt in}  & {\em commit} & true to commit, false to cancel changes. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Create@{Create}}
\index{Create@{Create}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Create(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t create\+Mode, mode\+\_\+t permissions, bool blocking)}{Create(const char *pathNamePtr, le_flock_AccessMode_t accessMode, le_flock_CreateMode_t createMode, mode_t permissions, bool blocking)}}]{\setlength{\rightskip}{0pt plus 5cm}static int Create (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{{\bf le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t}}]{create\+Mode, }
\item[{mode\+\_\+t}]{permissions, }
\item[{bool}]{blocking}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_acdeb415e99062762b23a0ede864e9c3c}{}\label{atom_file_8c_acdeb415e99062762b23a0ede864e9c3c}
Create a file for atomic operation.

\begin{DoxyReturn}{Returns}
File descriptor for doing atomic operation. L\+E\+\_\+\+D\+U\+P\+L\+I\+C\+A\+TE if the file already exists and L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+F\+A\+I\+L\+\_\+\+I\+F\+\_\+\+E\+X\+I\+ST is specified in create\+Mode L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file. L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open. \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em create\+Mode} & The action to take if the file already exists. \\
\hline
\mbox{\tt in}  & {\em permissions} & The file permissions used when creating the file. \\
\hline
\mbox{\tt in}  & {\em blocking} & true if blocking, false if non-\/blocking. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Create\+Stream@{Create\+Stream}}
\index{Create\+Stream@{Create\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Create\+Stream(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t create\+Mode, mode\+\_\+t permissions, bool blocking, le\+\_\+result\+\_\+t $\ast$result\+Ptr)}{CreateStream(const char *pathNamePtr, le_flock_AccessMode_t accessMode, le_flock_CreateMode_t createMode, mode_t permissions, bool blocking, le_result_t *resultPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static F\+I\+LE$\ast$ Create\+Stream (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{{\bf le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t}}]{create\+Mode, }
\item[{mode\+\_\+t}]{permissions, }
\item[{bool}]{blocking, }
\item[{{\bf le\+\_\+result\+\_\+t} $\ast$}]{result\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a24589147c26f6b8aabe049ef5a45fd24}{}\label{atom_file_8c_a24589147c26f6b8aabe049ef5a45fd24}
Creates a file stream for atomic operation.

If there was an error N\+U\+LL is returned and result\+Ptr is set to\+:
\begin{DoxyItemize}
\item L\+E\+\_\+\+D\+U\+P\+L\+I\+C\+A\+TE if the file already exists and L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+F\+A\+I\+L\+\_\+\+I\+F\+\_\+\+E\+X\+I\+ST is specified in create\+Mode.
\item L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file.
\item L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
Buffered file stream handle to the file if successful. N\+U\+LL if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open. \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em create\+Mode} & The action to take if the file already exists. \\
\hline
\mbox{\tt in}  & {\em permissions} & The file permissions used when creating the file. \\
\hline
\mbox{\tt in}  & {\em blocking} & true if blocking, false if non-\/blocking. \\
\hline
\mbox{\tt out}  & {\em result\+Ptr} & A pointer to result code \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Create\+Temp\+From\+Original@{Create\+Temp\+From\+Original}}
\index{Create\+Temp\+From\+Original@{Create\+Temp\+From\+Original}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Create\+Temp\+From\+Original(const char $\ast$orig\+Path\+Ptr, const char $\ast$temp\+Path\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, bool copy)}{CreateTempFromOriginal(const char *origPathPtr, const char *tempPathPtr, le_flock_AccessMode_t accessMode, bool copy)}}]{\setlength{\rightskip}{0pt plus 5cm}static int Create\+Temp\+From\+Original (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{orig\+Path\+Ptr, }
\item[{const char $\ast$}]{temp\+Path\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{bool}]{copy}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a2aea9e98b5bc5c62952bd47471deacf4}{}\label{atom_file_8c_a2aea9e98b5bc5c62952bd47471deacf4}
Creates temporary file for doing all intermediate operations. This function is used to create temporary file when original file exists. File permissions are copied from the original file.

\begin{DoxyReturn}{Returns}
A file descriptor for doing atomic operation. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the file does not exist. L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em orig\+Path\+Ptr} & Path to original file. \\
\hline
\mbox{\tt in}  & {\em temp\+Path\+Ptr} & Path to temporary file. \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em copy} & Whether content of original file should be copied to temporary file. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Create\+Temp\+Stream\+From\+Original@{Create\+Temp\+Stream\+From\+Original}}
\index{Create\+Temp\+Stream\+From\+Original@{Create\+Temp\+Stream\+From\+Original}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Create\+Temp\+Stream\+From\+Original(const char $\ast$orig\+Path\+Ptr, const char $\ast$temp\+Path\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, bool copy, le\+\_\+result\+\_\+t $\ast$result\+Ptr)}{CreateTempStreamFromOriginal(const char *origPathPtr, const char *tempPathPtr, le_flock_AccessMode_t accessMode, bool copy, le_result_t *resultPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static F\+I\+LE$\ast$ Create\+Temp\+Stream\+From\+Original (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{orig\+Path\+Ptr, }
\item[{const char $\ast$}]{temp\+Path\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{bool}]{copy, }
\item[{{\bf le\+\_\+result\+\_\+t} $\ast$}]{result\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a38b45a33096b6719d6255e67e701afa3}{}\label{atom_file_8c_a38b45a33096b6719d6255e67e701afa3}
Creates temporary file stream for doing all intermediate operations. This function is used to create temporary file when original file exists. File permissions are copied from the original file.

If there was an error N\+U\+LL is returned and result\+Ptr is set to\+: L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if file doesn\textquotesingle{}t exists. L\+E\+\_\+\+F\+A\+U\+LT if there was an error.

\begin{DoxyReturn}{Returns}
Buffered file stream handle to the file if successful. N\+U\+LL if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em orig\+Path\+Ptr} & Path to original file. \\
\hline
\mbox{\tt in}  & {\em temp\+Path\+Ptr} & Path to temporary file. \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em copy} & Whether content of original file should be copied to temporary file. \\
\hline
\mbox{\tt out}  & {\em result\+Ptr} & A pointer to result code \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Delete@{Delete}}
\index{Delete@{Delete}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Delete(const char $\ast$path\+Name\+Ptr, bool blocking)}{Delete(const char *pathNamePtr, bool blocking)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf le\+\_\+result\+\_\+t} Delete (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{bool}]{blocking}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a2f4af2116243474c7494ca9319414797}{}\label{atom_file_8c_a2f4af2116243474c7494ca9319414797}
Atomically and safely deletes a file.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if file doesn\textquotesingle{}t exists. L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if file is already locked (i.\+e. someone is using it). L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to delete. \\
\hline
\mbox{\tt in}  & {\em blocking} & True if blocking, false if non-\/blocking. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Delete\+File@{Delete\+File}}
\index{Delete\+File@{Delete\+File}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Delete\+File(const char $\ast$file\+Path)}{DeleteFile(const char *filePath)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf le\+\_\+result\+\_\+t} Delete\+File (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_ae27dc4d8a7a49f4c795f8951fbb2a2e5}{}\label{atom_file_8c_ae27dc4d8a7a49f4c795f8951fbb2a2e5}
Deletes a file at a given path.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+F\+A\+U\+LT if failed, 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Path} & Path to the file to delete. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Delete\+File\+Data@{Delete\+File\+Data}}
\index{Delete\+File\+Data@{Delete\+File\+Data}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Delete\+File\+Data(\+File\+Access\+\_\+t $\ast$access\+Ptr)}{DeleteFileData(FileAccess_t *accessPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Delete\+File\+Data (
\begin{DoxyParamCaption}
\item[{{\bf File\+Access\+\_\+t} $\ast$}]{access\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a3a083ec8b672de9898cab404ed1624e8}{}\label{atom_file_8c_a3a083ec8b672de9898cab404ed1624e8}
Delete atomically accessed file data from memory 
\begin{DoxyParams}{Parameters}
{\em access\+Ptr} & File access data to be deleted. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Get\+File\+Data@{Get\+File\+Data}}
\index{Get\+File\+Data@{Get\+File\+Data}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Get\+File\+Data(int fd)}{GetFileData(int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf File\+Access\+\_\+t}$\ast$ Get\+File\+Data (
\begin{DoxyParamCaption}
\item[{int}]{fd}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a4c9e5c68d2f4fe9426343651f03fe2cf}{}\label{atom_file_8c_a4c9e5c68d2f4fe9426343651f03fe2cf}
Search and return \hyperlink{struct_file_access__t}{File\+Access\+\_\+t} object using file descriptor of temporary file.

\begin{DoxyReturn}{Returns}
\hyperlink{struct_file_access__t}{File\+Access\+\_\+t} object if exists any. N\+U\+LL if doesn\textquotesingle{}t exist 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & File descriptor of atomically accessed file. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Get\+File\+Path@{Get\+File\+Path}}
\index{Get\+File\+Path@{Get\+File\+Path}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Get\+File\+Path(const char $\ast$origin\+File\+Path, const char $\ast$file\+Extension, char $\ast$out\+File\+Path, size\+\_\+t file\+Path\+Size)}{GetFilePath(const char *originFilePath, const char *fileExtension, char *outFilePath, size_t filePathSize)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Get\+File\+Path (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{origin\+File\+Path, }
\item[{const char $\ast$}]{file\+Extension, }
\item[{char $\ast$}]{out\+File\+Path, }
\item[{size\+\_\+t}]{file\+Path\+Size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a9c4c93762cff42d96ac2cf13ff0a347b}{}\label{atom_file_8c_a9c4c93762cff42d96ac2cf13ff0a347b}
Get file path with file extension appended. If the directory is not writable, the lock is created into /tmp instead and in path name \textquotesingle{}/\textquotesingle{} are replaced by \textquotesingle{}.\textquotesingle{}. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em origin\+File\+Path} & Path of original file. \\
\hline
\mbox{\tt in}  & {\em file\+Extension} & Extension that should be appended with file path \\
\hline
\mbox{\tt out}  & {\em out\+File\+Path} & Path of appended file extension \\
\hline
\mbox{\tt in}  & {\em file\+Path\+Size} & File path length \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Cancel@{le\+\_\+atom\+File\+\_\+\+Cancel}}
\index{le\+\_\+atom\+File\+\_\+\+Cancel@{le\+\_\+atom\+File\+\_\+\+Cancel}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Cancel(int fd)}{le_atomFile_Cancel(int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+atom\+File\+\_\+\+Cancel (
\begin{DoxyParamCaption}
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a2c44b530b5d7513e1de9ed28bbf651c0}{}\label{atom_file_8c_a2c44b530b5d7513e1de9ed28bbf651c0}
Cancels all changes and closes the file descriptor. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & The file descriptor to close. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Cancel\+Stream@{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream}}
\index{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream@{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream(\+F\+I\+L\+E $\ast$file\+Stream\+Ptr)}{le_atomFile_CancelStream(FILE *fileStreamPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+atom\+File\+\_\+\+Cancel\+Stream (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{file\+Stream\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_ae5cf35b73463f7eea098aba57587b7c3}{}\label{atom_file_8c_ae5cf35b73463f7eea098aba57587b7c3}
Cancels all changes and closes the file stream. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Stream\+Ptr} & File stream pointer to close \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Close@{le\+\_\+atom\+File\+\_\+\+Close}}
\index{le\+\_\+atom\+File\+\_\+\+Close@{le\+\_\+atom\+File\+\_\+\+Close}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Close(int fd)}{le_atomFile_Close(int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} le\+\_\+atom\+File\+\_\+\+Close (
\begin{DoxyParamCaption}
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a8f8397f267beafb22701b422b4410707}{}\label{atom_file_8c_a8f8397f267beafb22701b422b4410707}
Commits all changes and closes the file descriptor. No need to close the file descriptor again if this function returns error (i.\+e. file descriptor is closed in both success and error scenario).

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+F\+A\+U\+LT if there was an error 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & The file descriptor to close. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Close\+Stream@{le\+\_\+atom\+File\+\_\+\+Close\+Stream}}
\index{le\+\_\+atom\+File\+\_\+\+Close\+Stream@{le\+\_\+atom\+File\+\_\+\+Close\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Close\+Stream(\+F\+I\+L\+E $\ast$file\+Stream\+Ptr)}{le_atomFile_CloseStream(FILE *fileStreamPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} le\+\_\+atom\+File\+\_\+\+Close\+Stream (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{file\+Stream\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_aea745228ae746df24005a10ba06edd57}{}\label{atom_file_8c_aea745228ae746df24005a10ba06edd57}
Commits all changes and closes the file stream. No need to close the file stream again if this function returns error (i.\+e. file stream is closed in both success and error scenario).

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+F\+A\+U\+LT if there was an error 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Stream\+Ptr} & File stream pointer to close \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Create@{le\+\_\+atom\+File\+\_\+\+Create}}
\index{le\+\_\+atom\+File\+\_\+\+Create@{le\+\_\+atom\+File\+\_\+\+Create}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Create(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t create\+Mode, mode\+\_\+t permissions)}{le_atomFile_Create(const char *pathNamePtr, le_flock_AccessMode_t accessMode, le_flock_CreateMode_t createMode, mode_t permissions)}}]{\setlength{\rightskip}{0pt plus 5cm}int le\+\_\+atom\+File\+\_\+\+Create (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{{\bf le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t}}]{create\+Mode, }
\item[{mode\+\_\+t}]{permissions}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a17672cb7568a41dfc4c84244e1104204}{}\label{atom_file_8c_a17672cb7568a41dfc4c84244e1104204}
Creates and opens file for atomic operation.

If the file does not exist it will be created with the file permissions specified in the argument permissions (modified by the process\textquotesingle{}s umask). Refer to the P\+O\+S\+IX function open(2) for details of mode\+\_\+t\+:

\href{http://man7.org/linux/man-pages/man2/open.2.html}{\tt http\+://man7.\+org/linux/man-\/pages/man2/open.\+2.\+html}

The file can be opened for reading, writing or both as specified in the access\+Mode argument. Parameter access\+Mode specifies the lock to be applied on the file (read lock will be applied for L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+R\+E\+AD and write lock will be placed for all other cases).

This is a blocking call. It will block until it can create and open the target file with specified parameters(i.\+e. access\+Mode, create\+Mode, permissions).

\begin{DoxyReturn}{Returns}
A file descriptor if successful. L\+E\+\_\+\+D\+U\+P\+L\+I\+C\+A\+TE if the file already exists and L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+F\+A\+I\+L\+\_\+\+I\+F\+\_\+\+E\+X\+I\+ST is specified in create\+Mode L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
File must be closed using \hyperlink{atom_file_8c_a8f8397f267beafb22701b422b4410707}{le\+\_\+atom\+File\+\_\+\+Close()} or \hyperlink{atom_file_8c_a2c44b530b5d7513e1de9ed28bbf651c0}{le\+\_\+atom\+File\+\_\+\+Cancel()} function. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em create\+Mode} & The action to take if the file already exists. \\
\hline
\mbox{\tt in}  & {\em permissions} & The file permissions used when creating the file. See the function header comments for more details. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Create\+Stream@{le\+\_\+atom\+File\+\_\+\+Create\+Stream}}
\index{le\+\_\+atom\+File\+\_\+\+Create\+Stream@{le\+\_\+atom\+File\+\_\+\+Create\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Create\+Stream(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t create\+Mode, mode\+\_\+t permissions, le\+\_\+result\+\_\+t $\ast$result\+Ptr)}{le_atomFile_CreateStream(const char *pathNamePtr, le_flock_AccessMode_t accessMode, le_flock_CreateMode_t createMode, mode_t permissions, le_result_t *resultPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}F\+I\+LE$\ast$ le\+\_\+atom\+File\+\_\+\+Create\+Stream (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{{\bf le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t}}]{create\+Mode, }
\item[{mode\+\_\+t}]{permissions, }
\item[{{\bf le\+\_\+result\+\_\+t} $\ast$}]{result\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a84bd503ee3efb23393bc7228715b85c1}{}\label{atom_file_8c_a84bd503ee3efb23393bc7228715b85c1}
Creates and open a file via C standard library buffered file stream for atomic operation.

If the file does not exist it will be created with the file permissions specified in the argument permissions (modified by the process\textquotesingle{}s umask). Refer to the P\+O\+S\+IX function open(2) for details of mode\+\_\+t\+:

\href{http://man7.org/linux/man-pages/man2/open.2.html}{\tt http\+://man7.\+org/linux/man-\/pages/man2/open.\+2.\+html}

The file can be opened for reading, writing or both as specified in the access\+Mode argument. Parameter access\+Mode specifies the lock to be applied on the file (read lock will be applied for L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+R\+E\+AD and write lock will be placed for all other cases).

This is a blocking call. It will block until it can create and open the target file with specified parameters(i.\+e. access\+Mode, create\+Mode, permissions).

If there was an error N\+U\+LL is returned and result\+Ptr is set to\+:
\begin{DoxyItemize}
\item L\+E\+\_\+\+D\+U\+P\+L\+I\+C\+A\+TE if the file already exists and L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+F\+A\+I\+L\+\_\+\+I\+F\+\_\+\+E\+X\+I\+ST is specified in create\+Mode.
\item L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
Buffered file stream handle to the file if successful. N\+U\+LL if there was an error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Stream must be closed using \hyperlink{atom_file_8c_aea745228ae746df24005a10ba06edd57}{le\+\_\+atom\+File\+\_\+\+Close\+Stream()} or \hyperlink{atom_file_8c_ae5cf35b73463f7eea098aba57587b7c3}{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream()} function. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em create\+Mode} & The action to take if the file already exists. \\
\hline
\mbox{\tt in}  & {\em permissions} & The file permissions used when creating the file. See the function header comments for more details. \\
\hline
\mbox{\tt out}  & {\em result\+Ptr} & A pointer to result code. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Delete@{le\+\_\+atom\+File\+\_\+\+Delete}}
\index{le\+\_\+atom\+File\+\_\+\+Delete@{le\+\_\+atom\+File\+\_\+\+Delete}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Delete(const char $\ast$path\+Name\+Ptr)}{le_atomFile_Delete(const char *pathNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} le\+\_\+atom\+File\+\_\+\+Delete (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a0c305e7a46be873ce33e59fcd4285dfe}{}\label{atom_file_8c_a0c305e7a46be873ce33e59fcd4285dfe}
Atomically deletes a file. This function also ensures safe deletion of file (i.\+e. if any other process/thread is using the file by acquiring file lock, it won\textquotesingle{}t delete the file unless lock is released). This is a blocking call. It will block until lock on file is released.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if file doesn\textquotesingle{}t exists. L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to delete \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Open@{le\+\_\+atom\+File\+\_\+\+Open}}
\index{le\+\_\+atom\+File\+\_\+\+Open@{le\+\_\+atom\+File\+\_\+\+Open}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Open(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode)}{le_atomFile_Open(const char *pathNamePtr, le_flock_AccessMode_t accessMode)}}]{\setlength{\rightskip}{0pt plus 5cm}int le\+\_\+atom\+File\+\_\+\+Open (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a43f88f0430d01f3828ac9310b48974e7}{}\label{atom_file_8c_a43f88f0430d01f3828ac9310b48974e7}
Opens an existing file for atomic access operation.

The file can be open for reading, writing or both as specified in the access\+Mode argument. Parameter access\+Mode specifies the lock to be applied on the file (read lock will be applied for L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+R\+E\+AD and write lock will be placed for all other cases).

This is a blocking call. It will block until it can open the target file with specified access\+Mode.

\begin{DoxyReturn}{Returns}
A file descriptor if successful. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the file does not exist. L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
File must be closed using \hyperlink{atom_file_8c_a8f8397f267beafb22701b422b4410707}{le\+\_\+atom\+File\+\_\+\+Close()} or \hyperlink{atom_file_8c_a2c44b530b5d7513e1de9ed28bbf651c0}{le\+\_\+atom\+File\+\_\+\+Cancel()} function. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Open\+Stream@{le\+\_\+atom\+File\+\_\+\+Open\+Stream}}
\index{le\+\_\+atom\+File\+\_\+\+Open\+Stream@{le\+\_\+atom\+File\+\_\+\+Open\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Open\+Stream(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, le\+\_\+result\+\_\+t $\ast$result\+Ptr)}{le_atomFile_OpenStream(const char *pathNamePtr, le_flock_AccessMode_t accessMode, le_result_t *resultPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}F\+I\+LE$\ast$ le\+\_\+atom\+File\+\_\+\+Open\+Stream (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{{\bf le\+\_\+result\+\_\+t} $\ast$}]{result\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a9eecd192057a65b94255cc3fe042d7a2}{}\label{atom_file_8c_a9eecd192057a65b94255cc3fe042d7a2}
Opens an existing file via C standard library buffered file stream for atomic operation.

The file can be open for reading, writing or both as specified in the access\+Mode argument. Parameter access\+Mode specifies the lock to be applied on the file (read lock will be applied for L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+R\+E\+AD and write lock will be placed for all other cases).

This is a blocking call. It will block until it can open the target file with specified access\+Mode.

If there was an error N\+U\+LL is returned and result\+Ptr is set to\+:
\begin{DoxyItemize}
\item L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the file does not exist.
\item L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
Buffered file stream handle to the file if successful. N\+U\+LL if there was an error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Stream must be closed using \hyperlink{atom_file_8c_aea745228ae746df24005a10ba06edd57}{le\+\_\+atom\+File\+\_\+\+Close\+Stream()} or \hyperlink{atom_file_8c_ae5cf35b73463f7eea098aba57587b7c3}{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream()} function. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt out}  & {\em result\+Ptr} & A pointer to result code. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Try\+Create@{le\+\_\+atom\+File\+\_\+\+Try\+Create}}
\index{le\+\_\+atom\+File\+\_\+\+Try\+Create@{le\+\_\+atom\+File\+\_\+\+Try\+Create}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Try\+Create(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t create\+Mode, mode\+\_\+t permissions)}{le_atomFile_TryCreate(const char *pathNamePtr, le_flock_AccessMode_t accessMode, le_flock_CreateMode_t createMode, mode_t permissions)}}]{\setlength{\rightskip}{0pt plus 5cm}int le\+\_\+atom\+File\+\_\+\+Try\+Create (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{{\bf le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t}}]{create\+Mode, }
\item[{mode\+\_\+t}]{permissions}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_af56b841ef635512caf5011824ace74e8}{}\label{atom_file_8c_af56b841ef635512caf5011824ace74e8}
Same as {\ttfamily \hyperlink{atom_file_8c_a17672cb7568a41dfc4c84244e1104204}{le\+\_\+atom\+File\+\_\+\+Create()}} except that it is non-\/blocking function and it will fail and return L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK immediately if target file has incompatible lock.

\begin{DoxyReturn}{Returns}
A file descriptor if successful. L\+E\+\_\+\+D\+U\+P\+L\+I\+C\+A\+TE if the file already exists and L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+F\+A\+I\+L\+\_\+\+I\+F\+\_\+\+E\+X\+I\+ST is specified in create\+Mode L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file. L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
File must be closed using \hyperlink{atom_file_8c_a8f8397f267beafb22701b422b4410707}{le\+\_\+atom\+File\+\_\+\+Close()} or \hyperlink{atom_file_8c_a2c44b530b5d7513e1de9ed28bbf651c0}{le\+\_\+atom\+File\+\_\+\+Cancel()} function. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em create\+Mode} & The action to take if the file already exists. \\
\hline
\mbox{\tt in}  & {\em permissions} & The file permissions used when creating the file. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Try\+Create\+Stream@{le\+\_\+atom\+File\+\_\+\+Try\+Create\+Stream}}
\index{le\+\_\+atom\+File\+\_\+\+Try\+Create\+Stream@{le\+\_\+atom\+File\+\_\+\+Try\+Create\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Try\+Create\+Stream(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t create\+Mode, mode\+\_\+t permissions, le\+\_\+result\+\_\+t $\ast$result\+Ptr)}{le_atomFile_TryCreateStream(const char *pathNamePtr, le_flock_AccessMode_t accessMode, le_flock_CreateMode_t createMode, mode_t permissions, le_result_t *resultPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}F\+I\+LE$\ast$ le\+\_\+atom\+File\+\_\+\+Try\+Create\+Stream (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{{\bf le\+\_\+flock\+\_\+\+Create\+Mode\+\_\+t}}]{create\+Mode, }
\item[{mode\+\_\+t}]{permissions, }
\item[{{\bf le\+\_\+result\+\_\+t} $\ast$}]{result\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a0376766efe9b1768e939714420c0b47d}{}\label{atom_file_8c_a0376766efe9b1768e939714420c0b47d}
Same as {\ttfamily \hyperlink{atom_file_8c_a84bd503ee3efb23393bc7228715b85c1}{le\+\_\+atom\+File\+\_\+\+Create\+Stream()}} except that it is non-\/blocking function and it will fail and return L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK immediately if target file has incompatible lock.

If there was an error N\+U\+LL is returned and result\+Ptr is set to\+:
\begin{DoxyItemize}
\item L\+E\+\_\+\+D\+U\+P\+L\+I\+C\+A\+TE if the file already exists and L\+E\+\_\+\+F\+L\+O\+C\+K\+\_\+\+F\+A\+I\+L\+\_\+\+I\+F\+\_\+\+E\+X\+I\+ST is specified in create\+Mode.
\item L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file.
\item L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
Buffered file stream handle to the file if successful. N\+U\+LL if there was an error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Stream must be closed using \hyperlink{atom_file_8c_aea745228ae746df24005a10ba06edd57}{le\+\_\+atom\+File\+\_\+\+Close\+Stream()} or \hyperlink{atom_file_8c_ae5cf35b73463f7eea098aba57587b7c3}{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream()} function. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em create\+Mode} & The action to take if the file already exists. \\
\hline
\mbox{\tt in}  & {\em permissions} & The file permissions used when creating the file. \\
\hline
\mbox{\tt out}  & {\em result\+Ptr} & A pointer to result code. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Try\+Delete@{le\+\_\+atom\+File\+\_\+\+Try\+Delete}}
\index{le\+\_\+atom\+File\+\_\+\+Try\+Delete@{le\+\_\+atom\+File\+\_\+\+Try\+Delete}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Try\+Delete(const char $\ast$path\+Name\+Ptr)}{le_atomFile_TryDelete(const char *pathNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} le\+\_\+atom\+File\+\_\+\+Try\+Delete (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a113bc9bb8b5c685092263061b018e8ce}{}\label{atom_file_8c_a113bc9bb8b5c685092263061b018e8ce}
Same as {\ttfamily \hyperlink{atom_file_8c_a0c305e7a46be873ce33e59fcd4285dfe}{le\+\_\+atom\+File\+\_\+\+Delete()}} except that it is non-\/blocking function and it will fail and return L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK immediately if target file is locked.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if file doesn\textquotesingle{}t exists. L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if file is already locked (i.\+e. someone is using it). L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to delete \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Try\+Open@{le\+\_\+atom\+File\+\_\+\+Try\+Open}}
\index{le\+\_\+atom\+File\+\_\+\+Try\+Open@{le\+\_\+atom\+File\+\_\+\+Try\+Open}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Try\+Open(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode)}{le_atomFile_TryOpen(const char *pathNamePtr, le_flock_AccessMode_t accessMode)}}]{\setlength{\rightskip}{0pt plus 5cm}int le\+\_\+atom\+File\+\_\+\+Try\+Open (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a57e9641d647ae59106bab67b5690cfb4}{}\label{atom_file_8c_a57e9641d647ae59106bab67b5690cfb4}
Same as {\ttfamily \hyperlink{atom_file_8c_a43f88f0430d01f3828ac9310b48974e7}{le\+\_\+atom\+File\+\_\+\+Open()}} except that it is non-\/blocking function and it will fail and return L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK immediately if target file has incompatible lock.

\begin{DoxyReturn}{Returns}
A file descriptor if successful. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the file does not exist. L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file. L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
File must be closed using \hyperlink{atom_file_8c_a8f8397f267beafb22701b422b4410707}{le\+\_\+atom\+File\+\_\+\+Close()} or \hyperlink{atom_file_8c_a2c44b530b5d7513e1de9ed28bbf651c0}{le\+\_\+atom\+File\+\_\+\+Cancel()} function. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!le\+\_\+atom\+File\+\_\+\+Try\+Open\+Stream@{le\+\_\+atom\+File\+\_\+\+Try\+Open\+Stream}}
\index{le\+\_\+atom\+File\+\_\+\+Try\+Open\+Stream@{le\+\_\+atom\+File\+\_\+\+Try\+Open\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+atom\+File\+\_\+\+Try\+Open\+Stream(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, le\+\_\+result\+\_\+t $\ast$result\+Ptr)}{le_atomFile_TryOpenStream(const char *pathNamePtr, le_flock_AccessMode_t accessMode, le_result_t *resultPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}F\+I\+LE$\ast$ le\+\_\+atom\+File\+\_\+\+Try\+Open\+Stream (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{{\bf le\+\_\+result\+\_\+t} $\ast$}]{result\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{atom_file_8c_a5112afbf738c0f9d4909bdbc6da5c99d}{}\label{atom_file_8c_a5112afbf738c0f9d4909bdbc6da5c99d}
Same as {\ttfamily \hyperlink{atom_file_8c_a9eecd192057a65b94255cc3fe042d7a2}{le\+\_\+atom\+File\+\_\+\+Open\+Stream()}} except that it is non-\/blocking function and it will fail and return L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK immediately if target file has incompatible lock.

If there was an error N\+U\+LL is returned and result\+Ptr is set to\+:
\begin{DoxyItemize}
\item L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the file does not exist.
\item L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file.
\item L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
Buffered file stream handle to the file if successful. N\+U\+LL if there was an error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Stream must be closed using \hyperlink{atom_file_8c_aea745228ae746df24005a10ba06edd57}{le\+\_\+atom\+File\+\_\+\+Close\+Stream()} or \hyperlink{atom_file_8c_ae5cf35b73463f7eea098aba57587b7c3}{le\+\_\+atom\+File\+\_\+\+Cancel\+Stream()} function. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt out}  & {\em result\+Ptr} & A pointer to result code. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Open@{Open}}
\index{Open@{Open}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Open(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, bool blocking)}{Open(const char *pathNamePtr, le_flock_AccessMode_t accessMode, bool blocking)}}]{\setlength{\rightskip}{0pt plus 5cm}static int Open (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{bool}]{blocking}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a7d4542679429a6fb1dcb83ede721892a}{}\label{atom_file_8c_a7d4542679429a6fb1dcb83ede721892a}
Open an existing file for atomic operation.

\begin{DoxyReturn}{Returns}
A file descriptor for doing atomic operation. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the file does not exist. L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file. L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open. \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em blocking} & true if blocking, false if non-\/blocking. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Open\+Lock\+File@{Open\+Lock\+File}}
\index{Open\+Lock\+File@{Open\+Lock\+File}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Open\+Lock\+File(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, bool blocking)}{OpenLockFile(const char *pathNamePtr, le_flock_AccessMode_t accessMode, bool blocking)}}]{\setlength{\rightskip}{0pt plus 5cm}static int Open\+Lock\+File (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{bool}]{blocking}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a09a2db1a9c91aaaeb98e7e1ce6550ba0}{}\label{atom_file_8c_a09a2db1a9c91aaaeb98e7e1ce6550ba0}
Open lock file for the file which will do atomic operation. If there is no lock file, this function will create and open lock file

\begin{DoxyReturn}{Returns}
A file descriptor for doing atomic operation. L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file. L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file for which lockfile should be open \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em blocking} & true if blocking, false if non-\/blocking. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Open\+Stream@{Open\+Stream}}
\index{Open\+Stream@{Open\+Stream}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Open\+Stream(const char $\ast$path\+Name\+Ptr, le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t access\+Mode, bool blocking, le\+\_\+result\+\_\+t $\ast$result\+Ptr)}{OpenStream(const char *pathNamePtr, le_flock_AccessMode_t accessMode, bool blocking, le_result_t *resultPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static F\+I\+LE$\ast$ Open\+Stream (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path\+Name\+Ptr, }
\item[{{\bf le\+\_\+flock\+\_\+\+Access\+Mode\+\_\+t}}]{access\+Mode, }
\item[{bool}]{blocking, }
\item[{{\bf le\+\_\+result\+\_\+t} $\ast$}]{result\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a1780cd0da9775abe9210542d2fcb3d5a}{}\label{atom_file_8c_a1780cd0da9775abe9210542d2fcb3d5a}
Open a stream for atomic operation.

If there was an error N\+U\+LL is returned and result\+Ptr is set to\+:
\begin{DoxyItemize}
\item L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the file does not exist.
\item L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there is already an incompatible lock on the file.
\item L\+E\+\_\+\+F\+A\+U\+LT if there was an error.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
Buffered file stream handle to the file if successful. N\+U\+LL if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path\+Name\+Ptr} & Path of the file to open. \\
\hline
\mbox{\tt in}  & {\em access\+Mode} & The access mode to open the file with. \\
\hline
\mbox{\tt in}  & {\em blocking} & true if blocking, false if non-\/blocking. \\
\hline
\mbox{\tt out}  & {\em result\+Ptr} & A pointer to result code. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Save\+File\+Data@{Save\+File\+Data}}
\index{Save\+File\+Data@{Save\+File\+Data}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Save\+File\+Data(int fd, int lock\+Fd, int temp\+Fd, const char $\ast$path\+Name\+Ptr)}{SaveFileData(int fd, int lockFd, int tempFd, const char *pathNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Save\+File\+Data (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{int}]{lock\+Fd, }
\item[{int}]{temp\+Fd, }
\item[{const char $\ast$}]{path\+Name\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_af5574d8131a085023934d9b50f091a05}{}\label{atom_file_8c_af5574d8131a085023934d9b50f091a05}
Store atomically accessed file info to memory 
\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor of atomically accessed file. \\
\hline
{\em lock\+Fd} & File descriptor of lock file. \\
\hline
{\em temp\+Fd} & File descriptor of temporary file. \\
\hline
{\em path\+Name\+Ptr} & Path to atomically accessed file. \\
\hline
\end{DoxyParams}
\index{atom\+File.\+c@{atom\+File.\+c}!Sync\+File@{Sync\+File}}
\index{Sync\+File@{Sync\+File}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Sync\+File(\+File\+Access\+\_\+t $\ast$access\+Ptr, const char $\ast$temp\+File\+Path)}{SyncFile(FileAccess_t *accessPtr, const char *tempFilePath)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf le\+\_\+result\+\_\+t} Sync\+File (
\begin{DoxyParamCaption}
\item[{{\bf File\+Access\+\_\+t} $\ast$}]{access\+Ptr, }
\item[{const char $\ast$}]{temp\+File\+Path}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_aa61038be2a1d8b3eb207a6d02d56feaf}{}\label{atom_file_8c_aa61038be2a1d8b3eb207a6d02d56feaf}
Sync files to disk

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful L\+E\+\_\+\+F\+A\+U\+LT if failed. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em access\+Ptr} & Object containing files to be Sync-\/ed \\
\hline
\mbox{\tt in}  & {\em temp\+File\+Path} & Path to temporary file. \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\index{atom\+File.\+c@{atom\+File.\+c}!File\+Access\+List@{File\+Access\+List}}
\index{File\+Access\+List@{File\+Access\+List}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{File\+Access\+List}{FileAccessList}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+dls\+\_\+\+List\+\_\+t} File\+Access\+List = {\bf L\+E\+\_\+\+D\+L\+S\+\_\+\+L\+I\+S\+T\+\_\+\+I\+N\+IT}\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_ac9aebd4f0d4334495126870207af62ed}{}\label{atom_file_8c_ac9aebd4f0d4334495126870207af62ed}
Linked list of \hyperlink{struct_file_access__t}{File\+Access\+\_\+t} objects. \index{atom\+File.\+c@{atom\+File.\+c}!File\+Access\+Pool@{File\+Access\+Pool}}
\index{File\+Access\+Pool@{File\+Access\+Pool}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{File\+Access\+Pool}{FileAccessPool}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} File\+Access\+Pool\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_a1d9b284eb284bb2630b4ecf35c42a8e0}{}\label{atom_file_8c_a1d9b284eb284bb2630b4ecf35c42a8e0}
Pool to allocate \hyperlink{struct_file_access__t}{File\+Access\+\_\+t} objects. \index{atom\+File.\+c@{atom\+File.\+c}!Mutex@{Mutex}}
\index{Mutex@{Mutex}!atom\+File.\+c@{atom\+File.\+c}}
\subsubsection[{\texorpdfstring{Mutex}{Mutex}}]{\setlength{\rightskip}{0pt plus 5cm}pthread\+\_\+mutex\+\_\+t Mutex = P\+T\+H\+R\+E\+A\+D\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+Z\+ER\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{atom_file_8c_abc03085ccf7c38e092cdf06bf6b98ea6}{}\label{atom_file_8c_abc03085ccf7c38e092cdf06bf6b98ea6}
Mutex used to protect shared data structures in this module. 