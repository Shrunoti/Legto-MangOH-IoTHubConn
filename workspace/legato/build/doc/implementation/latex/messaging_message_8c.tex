\hypertarget{messaging_message_8c}{}\section{framework/liblegato/linux/messaging\+Message.c File Reference}
\label{messaging_message_8c}\index{framework/liblegato/linux/messaging\+Message.\+c@{framework/liblegato/linux/messaging\+Message.\+c}}
{\ttfamily \#include \char`\"{}legato.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}messaging\+Message.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}messaging\+Protocol.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}messaging\+Session.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}messaging\+Interface.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}file\+Descriptor.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}unix\+Socket.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_a6f8f9b2ea22a1ee607ac7a1f9b5c22e0}{Message\+Destructor} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$obj\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_a0fc936bdc80c2ef5c88e5e7ae34d4add}{msg\+Message\+\_\+\+Init} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{le__mem_8h_a44a896f6a0a1a8c733e8038eb332989e}{le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} \hyperlink{messaging_message_8c_a7cfc6f2fb2e30652542d896f83f8f2c9}{msg\+Message\+\_\+\+Create\+Pool} (const char $\ast$name, size\+\_\+t largest\+Msg\+Size)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{messaging_message_8c_a817e963a9d1b288ea99ef565a9cea0a9}{msg\+Message\+\_\+\+Send} (int socket\+Fd, \hyperlink{struct_message__t}{Message\+\_\+t} $\ast$msg\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{messaging_message_8c_a2038202f6a4e6c7fe63295050ecf5483}{msg\+Message\+\_\+\+Receive} (int socket\+Fd, \hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_aac9cc357d6f742f7f55d615205837cc9}{msg\+Message\+\_\+\+Call\+Completion\+Callback} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} request\+Msg\+Ref, \hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} response\+Msg\+Ref)
\item 
\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{messaging_message_8c_a8293a69f256b98cbce5b9990ea3520f3}{le\+\_\+msg\+\_\+\+Create\+Msg} (\hyperlink{le__messaging_8h_aebfc01e15b430a5b4f3038a5bd518904}{le\+\_\+msg\+\_\+\+Session\+Ref\+\_\+t} \hyperlink{log_tool_8c_a0ba04d68f0faec00ca0db1c014f248be}{session\+Ref})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_a93be4a4e628d079f9f53db30f2e78b28}{le\+\_\+msg\+\_\+\+Add\+Ref} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_afc508c24d0b6933e8fbc4e0410d50271}{le\+\_\+msg\+\_\+\+Release\+Msg} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
bool \hyperlink{messaging_message_8c_a8b0824781c030b9ed6f8be48e4d20419}{le\+\_\+msg\+\_\+\+Needs\+Response} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$ \hyperlink{messaging_message_8c_a32d1c7ffd913db8546f6f1bd5cce58c4}{le\+\_\+msg\+\_\+\+Get\+Payload\+Ptr} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
size\+\_\+t \hyperlink{messaging_message_8c_ac12a43d9266aa931762e54ab0026693f}{le\+\_\+msg\+\_\+\+Get\+Max\+Payload\+Size} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_a43459773ce8a9febf0f2e66681e40e91}{le\+\_\+msg\+\_\+\+Set\+Fd} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref}, int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd})
\item 
int \hyperlink{messaging_message_8c_a1eff9dd7f93de58f5678ad3d6e0b734d}{le\+\_\+msg\+\_\+\+Get\+Fd} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_a073de097d281475c44a445b927fbb929}{le\+\_\+msg\+\_\+\+Send} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
\hyperlink{le__messaging_8h_aebfc01e15b430a5b4f3038a5bd518904}{le\+\_\+msg\+\_\+\+Session\+Ref\+\_\+t} \hyperlink{messaging_message_8c_a253088f1b852575b60d7732ca7afc79b}{le\+\_\+msg\+\_\+\+Get\+Session} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_a5440ae06a89b60ed04e9de5601496608}{le\+\_\+msg\+\_\+\+Request\+Response} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref}, \hyperlink{le__messaging_8h_a70cf756e252bb377e0443bcf89f66805}{le\+\_\+msg\+\_\+\+Response\+Callback\+\_\+t} handler\+Func, \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$context\+Ptr)
\item 
\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{messaging_message_8c_aa3cf113b26b154697ccef270dafe8798}{le\+\_\+msg\+\_\+\+Request\+Sync\+Response} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{messaging_message_8c_ac4545833ad2da9bb4cc5d18125f7d9f2}{le\+\_\+msg\+\_\+\+Respond} (\hyperlink{le__messaging_8h_a1e5c37fdd50a4d6d24cad82cb166f770}{le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} \hyperlink{log_tool_8c_a42c1c76c43e8d3aac1aaa1dcd535b278}{msg\+Ref})
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\hyperlink{c_messaging}{Low-\/level Messaging A\+PI} implementation\textquotesingle{}s \char`\"{}\+Message\char`\"{} module implementation.

See \hyperlink{messaging_8c}{messaging.\+c} for an overview of the \hyperlink{c_messaging}{Low-\/level Messaging A\+PI} implementation.

Copyright (C) Sierra Wireless Inc. 

\subsection{Function Documentation}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Add\+Ref@{le\+\_\+msg\+\_\+\+Add\+Ref}}
\index{le\+\_\+msg\+\_\+\+Add\+Ref@{le\+\_\+msg\+\_\+\+Add\+Ref}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Add\+Ref(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_AddRef(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+msg\+\_\+\+Add\+Ref (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a93be4a4e628d079f9f53db30f2e78b28}{}\label{messaging_message_8c_a93be4a4e628d079f9f53db30f2e78b28}
Adds to the reference count on a message object. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Create\+Msg@{le\+\_\+msg\+\_\+\+Create\+Msg}}
\index{le\+\_\+msg\+\_\+\+Create\+Msg@{le\+\_\+msg\+\_\+\+Create\+Msg}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Create\+Msg(le\+\_\+msg\+\_\+\+Session\+Ref\+\_\+t session\+Ref)}{le_msg_CreateMsg(le_msg_SessionRef_t sessionRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} le\+\_\+msg\+\_\+\+Create\+Msg (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Session\+Ref\+\_\+t}}]{session\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a8293a69f256b98cbce5b9990ea3520f3}{}\label{messaging_message_8c_a8293a69f256b98cbce5b9990ea3520f3}
Creates a message to be sent over a given session.

\begin{DoxyReturn}{Returns}
The message reference.
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\begin{DoxyItemize}
\item This function never returns on failure, so no need to check the return code.
\item If you see warnings about message pools expanding, then you may be forgetting to release the messages you have received. 
\end{DoxyItemize}
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em session\+Ref} & Reference to the session. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Get\+Fd@{le\+\_\+msg\+\_\+\+Get\+Fd}}
\index{le\+\_\+msg\+\_\+\+Get\+Fd@{le\+\_\+msg\+\_\+\+Get\+Fd}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Get\+Fd(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_GetFd(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}int le\+\_\+msg\+\_\+\+Get\+Fd (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a1eff9dd7f93de58f5678ad3d6e0b734d}{}\label{messaging_message_8c_a1eff9dd7f93de58f5678ad3d6e0b734d}
Fetches a received file descriptor from the message.

\begin{DoxyReturn}{Returns}
The file descriptor, or -\/1 if no file descriptor was sent with this message or if the fd was already fetched from the message. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Get\+Max\+Payload\+Size@{le\+\_\+msg\+\_\+\+Get\+Max\+Payload\+Size}}
\index{le\+\_\+msg\+\_\+\+Get\+Max\+Payload\+Size@{le\+\_\+msg\+\_\+\+Get\+Max\+Payload\+Size}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Get\+Max\+Payload\+Size(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_GetMaxPayloadSize(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t le\+\_\+msg\+\_\+\+Get\+Max\+Payload\+Size (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_ac12a43d9266aa931762e54ab0026693f}{}\label{messaging_message_8c_ac12a43d9266aa931762e54ab0026693f}
Gets the size, in bytes, of the message payload memory buffer.

\begin{DoxyReturn}{Returns}
The size, in bytes. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Get\+Payload\+Ptr@{le\+\_\+msg\+\_\+\+Get\+Payload\+Ptr}}
\index{le\+\_\+msg\+\_\+\+Get\+Payload\+Ptr@{le\+\_\+msg\+\_\+\+Get\+Payload\+Ptr}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Get\+Payload\+Ptr(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_GetPayloadPtr(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void}$\ast$ le\+\_\+msg\+\_\+\+Get\+Payload\+Ptr (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a32d1c7ffd913db8546f6f1bd5cce58c4}{}\label{messaging_message_8c_a32d1c7ffd913db8546f6f1bd5cce58c4}
Gets a pointer to the message payload memory buffer.

\begin{DoxyReturn}{Returns}
A pointer to the payload buffer.
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
Be careful not to overflow this buffer. 
\end{DoxyWarning}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Get\+Session@{le\+\_\+msg\+\_\+\+Get\+Session}}
\index{le\+\_\+msg\+\_\+\+Get\+Session@{le\+\_\+msg\+\_\+\+Get\+Session}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Get\+Session(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_GetSession(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+msg\+\_\+\+Session\+Ref\+\_\+t} le\+\_\+msg\+\_\+\+Get\+Session (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a253088f1b852575b60d7732ca7afc79b}{}\label{messaging_message_8c_a253088f1b852575b60d7732ca7afc79b}
Gets a reference to the session to which a given message belongs.

\begin{DoxyReturn}{Returns}
The session reference. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Needs\+Response@{le\+\_\+msg\+\_\+\+Needs\+Response}}
\index{le\+\_\+msg\+\_\+\+Needs\+Response@{le\+\_\+msg\+\_\+\+Needs\+Response}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Needs\+Response(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_NeedsResponse(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}bool le\+\_\+msg\+\_\+\+Needs\+Response (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a8b0824781c030b9ed6f8be48e4d20419}{}\label{messaging_message_8c_a8b0824781c030b9ed6f8be48e4d20419}
Checks whether a message requires a response or not.

\begin{DoxyNote}{Note}
This is intended for use on the server side only.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item T\+R\+UE if the message needs to be responded to using \hyperlink{messaging_message_8c_ac4545833ad2da9bb4cc5d18125f7d9f2}{le\+\_\+msg\+\_\+\+Respond()}.
\item F\+A\+L\+SE if the message does not need to be responded to, and should be disposed of using \hyperlink{messaging_message_8c_afc508c24d0b6933e8fbc4e0410d50271}{le\+\_\+msg\+\_\+\+Release\+Msg()} when it is no longer needed. 
\end{DoxyItemize}
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Release\+Msg@{le\+\_\+msg\+\_\+\+Release\+Msg}}
\index{le\+\_\+msg\+\_\+\+Release\+Msg@{le\+\_\+msg\+\_\+\+Release\+Msg}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Release\+Msg(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_ReleaseMsg(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+msg\+\_\+\+Release\+Msg (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_afc508c24d0b6933e8fbc4e0410d50271}{}\label{messaging_message_8c_afc508c24d0b6933e8fbc4e0410d50271}
Releases a message object, decrementing its reference count. If the reference count has reached zero, the message object is deleted. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Request\+Response@{le\+\_\+msg\+\_\+\+Request\+Response}}
\index{le\+\_\+msg\+\_\+\+Request\+Response@{le\+\_\+msg\+\_\+\+Request\+Response}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Request\+Response(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref, le\+\_\+msg\+\_\+\+Response\+Callback\+\_\+t handler\+Func, void $\ast$context\+Ptr)}{le_msg_RequestResponse(le_msg_MessageRef_t msgRef, le_msg_ResponseCallback_t handlerFunc, void *contextPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+msg\+\_\+\+Request\+Response (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref, }
\item[{{\bf le\+\_\+msg\+\_\+\+Response\+Callback\+\_\+t}}]{handler\+Func, }
\item[{{\bf void} $\ast$}]{context\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a5440ae06a89b60ed04e9de5601496608}{}\label{messaging_message_8c_a5440ae06a89b60ed04e9de5601496608}
Requests a response from a server by sending it a request. Does not block. Instead, provides a callback function to be called when the response arrives or the transaction terminates without a response (due to the session terminating or the server deleting the request without responding).

\begin{DoxyNote}{Note}

\begin{DoxyItemize}
\item The thread that is attached to the session (that is, the thread that created the session) will call the callback from its main event loop. Of course, this means that if that thread doesn\textquotesingle{}t run its main event loop then it will not call the callback.
\item This function can only be used on the client side of a session. 
\end{DoxyItemize}
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the request message. \\
\hline
\mbox{\tt in}  & {\em handler\+Func} & Function to be called when transaction done. \\
\hline
\mbox{\tt in}  & {\em context\+Ptr} & Opaque value to be passed to handler function. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Request\+Sync\+Response@{le\+\_\+msg\+\_\+\+Request\+Sync\+Response}}
\index{le\+\_\+msg\+\_\+\+Request\+Sync\+Response@{le\+\_\+msg\+\_\+\+Request\+Sync\+Response}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Request\+Sync\+Response(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_RequestSyncResponse(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t} le\+\_\+msg\+\_\+\+Request\+Sync\+Response (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_aa3cf113b26b154697ccef270dafe8798}{}\label{messaging_message_8c_aa3cf113b26b154697ccef270dafe8798}
Requests a response from a server by sending it a request. Blocks until the response arrives or until the transaction terminates without a response (i.\+e., if the session terminates or the server deletes the request without responding).

\begin{DoxyReturn}{Returns}
A reference to the response message, or N\+U\+LL if the transaction terminated without a response.
\end{DoxyReturn}
\begin{DoxyNote}{Note}

\begin{DoxyItemize}
\item To prevent deadlocks, this function can only be used on the client side of a session. Servers cannot use this function.
\item To prevent race conditions, only the client thread that is attached to the session (the thread that created the session) is allowed to perform a synchronous request-\/response transaction.
\end{DoxyItemize}
\end{DoxyNote}
\begin{DoxyWarning}{Warning}

\begin{DoxyItemize}
\item The calling (client) thread will be blocked until the server responds, so no other event handling will happen in that client thread until the response is received (or the server dies). Therefore, this function should only be used when the server is certain to respond quickly enough to ensure that it will not cause any event response time deadlines to be missed by the client. Consider using \hyperlink{messaging_message_8c_a5440ae06a89b60ed04e9de5601496608}{le\+\_\+msg\+\_\+\+Request\+Response()} instead.
\item If this function is used when the client and server are in the same thread, then the message will be discarded and N\+U\+LL will be returned. This is a deadlock prevention measure. 
\end{DoxyItemize}
\end{DoxyWarning}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the request message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Respond@{le\+\_\+msg\+\_\+\+Respond}}
\index{le\+\_\+msg\+\_\+\+Respond@{le\+\_\+msg\+\_\+\+Respond}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Respond(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_Respond(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+msg\+\_\+\+Respond (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_ac4545833ad2da9bb4cc5d18125f7d9f2}{}\label{messaging_message_8c_ac4545833ad2da9bb4cc5d18125f7d9f2}
Sends a response back to the client that send the request message.

Takes a reference to the request message. Copy the response payload (if any) into the same payload buffer that held the request payload, then call \hyperlink{messaging_message_8c_ac4545833ad2da9bb4cc5d18125f7d9f2}{le\+\_\+msg\+\_\+\+Respond()}.

The messaging system will delete the message automatically when it has finished sending the response.

\begin{DoxyNote}{Note}
This function can only be used on the server side of a session. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the request message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Send@{le\+\_\+msg\+\_\+\+Send}}
\index{le\+\_\+msg\+\_\+\+Send@{le\+\_\+msg\+\_\+\+Send}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Send(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{le_msg_Send(le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+msg\+\_\+\+Send (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a073de097d281475c44a445b927fbb929}{}\label{messaging_message_8c_a073de097d281475c44a445b927fbb929}
Sends a message. No response expected. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!le\+\_\+msg\+\_\+\+Set\+Fd@{le\+\_\+msg\+\_\+\+Set\+Fd}}
\index{le\+\_\+msg\+\_\+\+Set\+Fd@{le\+\_\+msg\+\_\+\+Set\+Fd}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+msg\+\_\+\+Set\+Fd(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref, int fd)}{le_msg_SetFd(le_msg_MessageRef_t msgRef, int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+msg\+\_\+\+Set\+Fd (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a43459773ce8a9febf0f2e66681e40e91}{}\label{messaging_message_8c_a43459773ce8a9febf0f2e66681e40e91}
Sets the file descriptor to be sent with this message.

This file descriptor will be closed when the message is sent (or when it is deleted without being sent).

At most one file descriptor is allowed to be sent per message. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Ref} & Reference to the message. \\
\hline
\mbox{\tt in}  & {\em fd} & File descriptor. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!Message\+Destructor@{Message\+Destructor}}
\index{Message\+Destructor@{Message\+Destructor}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{Message\+Destructor(void $\ast$obj\+Ptr)}{MessageDestructor(void *objPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Message\+Destructor (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{obj\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{messaging_message_8c_a6f8f9b2ea22a1ee607ac7a1f9b5c22e0}{}\label{messaging_message_8c_a6f8f9b2ea22a1ee607ac7a1f9b5c22e0}
Destructor function for Message objects. \index{messaging\+Message.\+c@{messaging\+Message.\+c}!msg\+Message\+\_\+\+Call\+Completion\+Callback@{msg\+Message\+\_\+\+Call\+Completion\+Callback}}
\index{msg\+Message\+\_\+\+Call\+Completion\+Callback@{msg\+Message\+\_\+\+Call\+Completion\+Callback}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{msg\+Message\+\_\+\+Call\+Completion\+Callback(le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t request\+Msg\+Ref, le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t response\+Msg\+Ref)}{msgMessage_CallCompletionCallback(le_msg_MessageRef_t requestMsgRef, le_msg_MessageRef_t responseMsgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} msg\+Message\+\_\+\+Call\+Completion\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{request\+Msg\+Ref, }
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{response\+Msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_aac9cc357d6f742f7f55d615205837cc9}{}\label{messaging_message_8c_aac9cc357d6f742f7f55d615205837cc9}
Call the completion callback function for a given message, if it has one. \index{messaging\+Message.\+c@{messaging\+Message.\+c}!msg\+Message\+\_\+\+Create\+Pool@{msg\+Message\+\_\+\+Create\+Pool}}
\index{msg\+Message\+\_\+\+Create\+Pool@{msg\+Message\+\_\+\+Create\+Pool}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{msg\+Message\+\_\+\+Create\+Pool(const char $\ast$name, size\+\_\+t largest\+Msg\+Size)}{msgMessage_CreatePool(const char *name, size_t largestMsgSize)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} msg\+Message\+\_\+\+Create\+Pool (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{name, }
\item[{size\+\_\+t}]{largest\+Msg\+Size}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a7cfc6f2fb2e30652542d896f83f8f2c9}{}\label{messaging_message_8c_a7cfc6f2fb2e30652542d896f83f8f2c9}
Create a Message Pool.

\begin{DoxyReturn}{Returns}
A reference to the pool. 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000046}{Todo}]Make this configurable. \end{DoxyRefDesc}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em name} & Name of the pool. \\
\hline
\mbox{\tt in}  & {\em largest\+Msg\+Size} & Size of the largest message payload, in bytes. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!msg\+Message\+\_\+\+Init@{msg\+Message\+\_\+\+Init}}
\index{msg\+Message\+\_\+\+Init@{msg\+Message\+\_\+\+Init}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{msg\+Message\+\_\+\+Init(void)}{msgMessage_Init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} msg\+Message\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a0fc936bdc80c2ef5c88e5e7ae34d4add}{}\label{messaging_message_8c_a0fc936bdc80c2ef5c88e5e7ae34d4add}
Initializes this module. This must be called only once at start-\/up, before any other functions in this module are called. \index{messaging\+Message.\+c@{messaging\+Message.\+c}!msg\+Message\+\_\+\+Receive@{msg\+Message\+\_\+\+Receive}}
\index{msg\+Message\+\_\+\+Receive@{msg\+Message\+\_\+\+Receive}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{msg\+Message\+\_\+\+Receive(int socket\+Fd, le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t msg\+Ref)}{msgMessage_Receive(int socketFd, le_msg_MessageRef_t msgRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} msg\+Message\+\_\+\+Receive (
\begin{DoxyParamCaption}
\item[{int}]{socket\+Fd, }
\item[{{\bf le\+\_\+msg\+\_\+\+Message\+Ref\+\_\+t}}]{msg\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a2038202f6a4e6c7fe63295050ecf5483}{}\label{messaging_message_8c_a2038202f6a4e6c7fe63295050ecf5483}
Receive a single message from a connected socket.

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item L\+E\+\_\+\+OK if successful.
\item L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK if there\textquotesingle{}s nothing there to receive and the socket is set non-\/blocking.
\item L\+E\+\_\+\+C\+L\+O\+S\+ED if the connection has closed.
\item L\+E\+\_\+\+C\+O\+M\+M\+\_\+\+E\+R\+R\+OR if an error was encountered. 
\end{DoxyItemize}
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em socket\+Fd} & The socket\textquotesingle{}s file descriptor. \\
\hline
\mbox{\tt in}  & {\em msg\+Ref} & Message object to store the received message in. \\
\hline
\end{DoxyParams}
\index{messaging\+Message.\+c@{messaging\+Message.\+c}!msg\+Message\+\_\+\+Send@{msg\+Message\+\_\+\+Send}}
\index{msg\+Message\+\_\+\+Send@{msg\+Message\+\_\+\+Send}!messaging\+Message.\+c@{messaging\+Message.\+c}}
\subsubsection[{\texorpdfstring{msg\+Message\+\_\+\+Send(int socket\+Fd, Message\+\_\+t $\ast$msg\+Ptr)}{msgMessage_Send(int socketFd, Message_t *msgPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} msg\+Message\+\_\+\+Send (
\begin{DoxyParamCaption}
\item[{int}]{socket\+Fd, }
\item[{{\bf Message\+\_\+t} $\ast$}]{msg\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{messaging_message_8c_a817e963a9d1b288ea99ef565a9cea0a9}{}\label{messaging_message_8c_a817e963a9d1b288ea99ef565a9cea0a9}
Send a single message over a connected socket.

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item L\+E\+\_\+\+OK if successful.
\item L\+E\+\_\+\+N\+O\+\_\+\+M\+E\+M\+O\+RY if the socket doesn\textquotesingle{}t have enough send buffer space available right now.
\item L\+E\+\_\+\+C\+O\+M\+M\+\_\+\+E\+R\+R\+OR if the local\+Socket\+Fd is not connected.
\item L\+E\+\_\+\+F\+A\+U\+LT if failed for some other reason (check your logs).
\end{DoxyItemize}
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Won\textquotesingle{}t return L\+E\+\_\+\+N\+O\+\_\+\+M\+E\+M\+O\+RY if the socket is in blocking mode. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em socket\+Fd} & Connected socket\textquotesingle{}s file descriptor. \\
\hline
 & {\em msg\+Ptr} & The Message to be sent. \\
\hline
\end{DoxyParams}
