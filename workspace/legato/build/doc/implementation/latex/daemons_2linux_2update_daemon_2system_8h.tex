\hypertarget{daemons_2linux_2update_daemon_2system_8h}{}\section{framework/daemons/linux/update\+Daemon/system.h File Reference}
\label{daemons_2linux_2update_daemon_2system_8h}\index{framework/daemons/linux/update\+Daemon/system.\+h@{framework/daemons/linux/update\+Daemon/system.\+h}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_af34f2d5f21e3a37a8869b7aee8986198}{system\+\_\+\+Prep\+Unpack\+Dir} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_ac94e85d94402550e84461177752c2d8a}{system\+\_\+\+Kill\+Unpack\+Dir} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
int \hyperlink{daemons_2linux_2update_daemon_2system_8h_ad6d0d438bb8eaa3698aa0b9d02b82410}{system\+\_\+\+Index} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
int \hyperlink{daemons_2linux_2update_daemon_2system_8h_a2806eaa30cb37907014680750f31f5de}{system\+\_\+\+Get\+Previous\+System\+Index} (int system\+Index)
\item 
size\+\_\+t \hyperlink{daemons_2linux_2update_daemon_2system_8h_a667252b4e84069ec7a61bfb9328ec8fa}{system\+\_\+\+Version} (char $\ast$version\+Ptr, size\+\_\+t version\+Size)
\item 
bool \hyperlink{daemons_2linux_2update_daemon_2system_8h_ad844d3816d0846e21b88925d99d99eab}{system\+\_\+\+Exists} (int system\+Index)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{daemons_2linux_2update_daemon_2system_8h_ab198c4acd07848e0559c2e24ee161a9a}{system\+\_\+\+Get\+System\+Hash} (int system\+Index, char hash\+Buffer\mbox{[}\hyperlink{limit_8h_a54afff2397b4c963793b121a90abc1dc}{L\+I\+M\+I\+T\+\_\+\+M\+D5\+\_\+\+S\+T\+R\+\_\+\+B\+Y\+T\+ES}\mbox{]})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_a90f4c4eb35e3893e96e295987185e623}{system\+\_\+\+Symlink\+App} (const char $\ast$system\+Name\+Ptr, const char $\ast$app\+Md5\+Ptr, const char $\ast$app\+Name\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_ab96628c3a43d33b3be5ba342529f3958}{system\+\_\+\+Unlink\+App} (const char $\ast$system\+Name\+Ptr, const char $\ast$app\+Name\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_a2ac45384977e75e61647d2b2527e6bfb}{system\+\_\+\+Update\+Current\+App\+Writeable\+Files} (const char $\ast$app\+Md5\+Ptr, const char $\ast$app\+Name\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_ab210d742a4c37b65fdc6818b709b4c28}{system\+\_\+\+Remove\+App} (const char $\ast$app\+Name\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{daemons_2linux_2update_daemon_2system_8h_ad38a96081a4f763465370a321c8c4d83}{system\+\_\+\+Copy\+App\+Config} (const char $\ast$app\+Name\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{daemons_2linux_2update_daemon_2system_8h_aa0d6a7737d01e5216a303445b31720e1}{system\+\_\+\+Finish\+Update} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{daemons_2linux_2update_daemon_2system_8h_a153c224f5a2ef11c850901697386bb03}{system\+\_\+\+Snapshot} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_a9372ed45bba69ee465ea771387e4419f}{system\+\_\+\+Mark\+Modified} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
bool \hyperlink{daemons_2linux_2update_daemon_2system_8h_aeb4f3fd1139573c363b7542eb31cfbe7}{system\+\_\+\+Is\+Modified} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
bool \hyperlink{daemons_2linux_2update_daemon_2system_8h_a6e4dea8a5905b9d8df09d71b17cee528}{system\+\_\+\+Has\+App} (const char $\ast$app\+Name\+Ptr)
\item 
bool \hyperlink{daemons_2linux_2update_daemon_2system_8h_a8afb5c98f0f3c14cab1668606c49ba94}{system\+\_\+\+App\+Used\+In\+Any\+System} (const char $\ast$app\+Hash\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_aff45119772f13bcf0d59a4e747867a47}{system\+\_\+\+Remove\+Unused\+Apps} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_aee5ebfd37a55328d6144e9e0e75fda69}{system\+\_\+\+Remove\+Unneeded} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{daemons_2linux_2update_daemon_2system_8h_a5efac20157ac7dc014f7ddb3f0808337}{system\+\_\+\+Get\+App\+Writeable\+Files\+Dir\+Path} (char $\ast$path\+Buff\+Ptr, size\+\_\+t buff\+Size, const char $\ast$system\+Name\+Ptr, const char $\ast$app\+Name\+Ptr)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const char $\ast$ \hyperlink{daemons_2linux_2update_daemon_2system_8h_a183aabda6f0dc9e057c9f0e53654e503}{system\+\_\+\+Unpack\+Path}
\item 
const char $\ast$ \hyperlink{daemons_2linux_2update_daemon_2system_8h_a13eef0955beafede871bf2a64286641c}{system\+\_\+\+Current\+Apps\+Dir}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+App\+Used\+In\+Any\+System@{system\+\_\+\+App\+Used\+In\+Any\+System}}
\index{system\+\_\+\+App\+Used\+In\+Any\+System@{system\+\_\+\+App\+Used\+In\+Any\+System}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+App\+Used\+In\+Any\+System(const char $\ast$app\+Hash\+Ptr)}{system_AppUsedInAnySystem(const char *appHashPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}bool system\+\_\+\+App\+Used\+In\+Any\+System (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{app\+Hash\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a8afb5c98f0f3c14cab1668606c49ba94}{}\label{daemons_2linux_2update_daemon_2system_8h_a8afb5c98f0f3c14cab1668606c49ba94}
Check all installed systems and see if the given application is installed in any of them. The search is done by application \hyperlink{class_m_d5}{M\+D5} hash.

\begin{DoxyReturn}{Returns}
true if there is any system with the given application installed, false otherwise. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em app\+Hash\+Ptr} & Look for this app hash. \\
\hline
\end{DoxyParams}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Copy\+App\+Config@{system\+\_\+\+Copy\+App\+Config}}
\index{system\+\_\+\+Copy\+App\+Config@{system\+\_\+\+Copy\+App\+Config}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Copy\+App\+Config(const char $\ast$app\+Name\+Ptr)}{system_CopyAppConfig(const char *appNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} system\+\_\+\+Copy\+App\+Config (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{app\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_ad38a96081a4f763465370a321c8c4d83}{}\label{daemons_2linux_2update_daemon_2system_8h_ad38a96081a4f763465370a321c8c4d83}
Copy a given app\textquotesingle{}s (app-\/specific) config file from the current running system to the system unpack area.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. 
\end{DoxyReturn}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Exists@{system\+\_\+\+Exists}}
\index{system\+\_\+\+Exists@{system\+\_\+\+Exists}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Exists(int system\+Index)}{system_Exists(int systemIndex)}}]{\setlength{\rightskip}{0pt plus 5cm}bool system\+\_\+\+Exists (
\begin{DoxyParamCaption}
\item[{int}]{system\+Index}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_ad844d3816d0846e21b88925d99d99eab}{}\label{daemons_2linux_2update_daemon_2system_8h_ad844d3816d0846e21b88925d99d99eab}
Check to see if the given system exists.

\begin{DoxyReturn}{Returns}
True if the system in question exists, false if not. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em system\+Index} & The system index to check. \\
\hline
\end{DoxyParams}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Finish\+Update@{system\+\_\+\+Finish\+Update}}
\index{system\+\_\+\+Finish\+Update@{system\+\_\+\+Finish\+Update}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Finish\+Update(void)}{system_FinishUpdate(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} system\+\_\+\+Finish\+Update (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_aa0d6a7737d01e5216a303445b31720e1}{}\label{daemons_2linux_2update_daemon_2system_8h_aa0d6a7737d01e5216a303445b31720e1}
Complete a system update and move the system from unpack into current.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. 
\end{DoxyReturn}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Get\+App\+Writeable\+Files\+Dir\+Path@{system\+\_\+\+Get\+App\+Writeable\+Files\+Dir\+Path}}
\index{system\+\_\+\+Get\+App\+Writeable\+Files\+Dir\+Path@{system\+\_\+\+Get\+App\+Writeable\+Files\+Dir\+Path}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Get\+App\+Writeable\+Files\+Dir\+Path(char $\ast$path\+Buff\+Ptr, size\+\_\+t buff\+Size, const char $\ast$system\+Name\+Ptr, const char $\ast$app\+Name\+Ptr)}{system_GetAppWriteableFilesDirPath(char *pathBuffPtr, size_t buffSize, const char *systemNamePtr, const char *appNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Get\+App\+Writeable\+Files\+Dir\+Path (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{path\+Buff\+Ptr, }
\item[{size\+\_\+t}]{buff\+Size, }
\item[{const char $\ast$}]{system\+Name\+Ptr, }
\item[{const char $\ast$}]{app\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a5efac20157ac7dc014f7ddb3f0808337}{}\label{daemons_2linux_2update_daemon_2system_8h_a5efac20157ac7dc014f7ddb3f0808337}
Get the file system path to the directory into which a given app\textquotesingle{}s writeable files are found inside a given system. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em path\+Buff\+Ptr} & Ptr to where the path will be put. \\
\hline
 & {\em buff\+Size} & Size of the buffer. \\
\hline
\end{DoxyParams}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Get\+Previous\+System\+Index@{system\+\_\+\+Get\+Previous\+System\+Index}}
\index{system\+\_\+\+Get\+Previous\+System\+Index@{system\+\_\+\+Get\+Previous\+System\+Index}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Get\+Previous\+System\+Index(int system\+Index)}{system_GetPreviousSystemIndex(int systemIndex)}}]{\setlength{\rightskip}{0pt plus 5cm}int system\+\_\+\+Get\+Previous\+System\+Index (
\begin{DoxyParamCaption}
\item[{int}]{system\+Index}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a2806eaa30cb37907014680750f31f5de}{}\label{daemons_2linux_2update_daemon_2system_8h_a2806eaa30cb37907014680750f31f5de}
Get the index for the previous system in the chain, using the current system as a starting point.

\begin{DoxyReturn}{Returns}
The index to the system that\textquotesingle{}s previous to the given system. -\/1 is returned if the previous system was not found. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em system\+Index} & Get the system that\textquotesingle{}s earlier to this system. \\
\hline
\end{DoxyParams}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Get\+System\+Hash@{system\+\_\+\+Get\+System\+Hash}}
\index{system\+\_\+\+Get\+System\+Hash@{system\+\_\+\+Get\+System\+Hash}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Get\+System\+Hash(int system\+Index, char hash\+Buffer[L\+I\+M\+I\+T\+\_\+\+M\+D5\+\_\+\+S\+T\+R\+\_\+\+B\+Y\+T\+ES])}{system_GetSystemHash(int systemIndex, char hashBuffer[LIMIT_MD5_STR_BYTES])}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} system\+\_\+\+Get\+System\+Hash (
\begin{DoxyParamCaption}
\item[{int}]{system\+Index, }
\item[{char}]{hash\+Buffer\mbox{[}\+L\+I\+M\+I\+T\+\_\+\+M\+D5\+\_\+\+S\+T\+R\+\_\+\+B\+Y\+T\+E\+S\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_ab198c4acd07848e0559c2e24ee161a9a}{}\label{daemons_2linux_2update_daemon_2system_8h_ab198c4acd07848e0559c2e24ee161a9a}
Read the hash ID from a given system.

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item L\+E\+\_\+\+OK if no problems are encountered.
\item L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the given index does not correspond to an available system.
\item L\+E\+\_\+\+F\+O\+R\+M\+A\+T\+\_\+\+E\+R\+R\+OR if there are problems reading the hash from the system. 
\end{DoxyItemize}
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em system\+Index} & The system to read the hash for. \\
\hline
\mbox{\tt out}  & {\em hash\+Buffer} & Buffer to hold the system\textquotesingle{}s hash ID. \\
\hline
\end{DoxyParams}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Has\+App@{system\+\_\+\+Has\+App}}
\index{system\+\_\+\+Has\+App@{system\+\_\+\+Has\+App}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Has\+App(const char $\ast$app\+Name\+Ptr)}{system_HasApp(const char *appNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}bool system\+\_\+\+Has\+App (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{app\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a6e4dea8a5905b9d8df09d71b17cee528}{}\label{daemons_2linux_2update_daemon_2system_8h_a6e4dea8a5905b9d8df09d71b17cee528}
Checks to see if an application with a given name is used in the current running system.

\begin{DoxyReturn}{Returns}
true if the app is in the system. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em app\+Name\+Ptr} & Look for this app name. \\
\hline
\end{DoxyParams}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Index@{system\+\_\+\+Index}}
\index{system\+\_\+\+Index@{system\+\_\+\+Index}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Index(void)}{system_Index(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int system\+\_\+\+Index (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_ad6d0d438bb8eaa3698aa0b9d02b82410}{}\label{daemons_2linux_2update_daemon_2system_8h_ad6d0d438bb8eaa3698aa0b9d02b82410}
Get the current systems index.

\begin{DoxyReturn}{Returns}
The index ID of the current system.
\end{DoxyReturn}
Get the current system\textquotesingle{}s index.

\begin{DoxyReturn}{Returns}
System index. 
\end{DoxyReturn}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Is\+Modified@{system\+\_\+\+Is\+Modified}}
\index{system\+\_\+\+Is\+Modified@{system\+\_\+\+Is\+Modified}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Is\+Modified(void)}{system_IsModified(void)}}]{\setlength{\rightskip}{0pt plus 5cm}bool system\+\_\+\+Is\+Modified (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_aeb4f3fd1139573c363b7542eb31cfbe7}{}\label{daemons_2linux_2update_daemon_2system_8h_aeb4f3fd1139573c363b7542eb31cfbe7}
Check to see if the current system has been marked as modified.

\begin{DoxyReturn}{Returns}
true if the system has been modified, false if not. 
\end{DoxyReturn}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Kill\+Unpack\+Dir@{system\+\_\+\+Kill\+Unpack\+Dir}}
\index{system\+\_\+\+Kill\+Unpack\+Dir@{system\+\_\+\+Kill\+Unpack\+Dir}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Kill\+Unpack\+Dir(void)}{system_KillUnpackDir(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Kill\+Unpack\+Dir (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_ac94e85d94402550e84461177752c2d8a}{}\label{daemons_2linux_2update_daemon_2system_8h_ac94e85d94402550e84461177752c2d8a}
Remove the systems unpack directory. \index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Mark\+Modified@{system\+\_\+\+Mark\+Modified}}
\index{system\+\_\+\+Mark\+Modified@{system\+\_\+\+Mark\+Modified}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Mark\+Modified(void)}{system_MarkModified(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Mark\+Modified (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a9372ed45bba69ee465ea771387e4419f}{}\label{daemons_2linux_2update_daemon_2system_8h_a9372ed45bba69ee465ea771387e4419f}
Mark the system as being modified. \index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Prep\+Unpack\+Dir@{system\+\_\+\+Prep\+Unpack\+Dir}}
\index{system\+\_\+\+Prep\+Unpack\+Dir@{system\+\_\+\+Prep\+Unpack\+Dir}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Prep\+Unpack\+Dir(void)}{system_PrepUnpackDir(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Prep\+Unpack\+Dir (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_af34f2d5f21e3a37a8869b7aee8986198}{}\label{daemons_2linux_2update_daemon_2system_8h_af34f2d5f21e3a37a8869b7aee8986198}
Prepare the unpack directory for use (delete any old one and create a fresh empty one). \index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Remove\+App@{system\+\_\+\+Remove\+App}}
\index{system\+\_\+\+Remove\+App@{system\+\_\+\+Remove\+App}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Remove\+App(const char $\ast$app\+Name\+Ptr)}{system_RemoveApp(const char *appNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Remove\+App (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{app\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_ab210d742a4c37b65fdc6818b709b4c28}{}\label{daemons_2linux_2update_daemon_2system_8h_ab210d742a4c37b65fdc6818b709b4c28}
Remove a given app\textquotesingle{}s files from the current running system. \index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Remove\+Unneeded@{system\+\_\+\+Remove\+Unneeded}}
\index{system\+\_\+\+Remove\+Unneeded@{system\+\_\+\+Remove\+Unneeded}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Remove\+Unneeded(void)}{system_RemoveUnneeded(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Remove\+Unneeded (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_aee5ebfd37a55328d6144e9e0e75fda69}{}\label{daemons_2linux_2update_daemon_2system_8h_aee5ebfd37a55328d6144e9e0e75fda69}
Delete any systems that are \char`\"{}bad\char`\"{} or older than the newest \char`\"{}good\char`\"{}. \index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Remove\+Unused\+Apps@{system\+\_\+\+Remove\+Unused\+Apps}}
\index{system\+\_\+\+Remove\+Unused\+Apps@{system\+\_\+\+Remove\+Unused\+Apps}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Remove\+Unused\+Apps(void)}{system_RemoveUnusedApps(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Remove\+Unused\+Apps (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_aff45119772f13bcf0d59a4e747867a47}{}\label{daemons_2linux_2update_daemon_2system_8h_aff45119772f13bcf0d59a4e747867a47}
Delete any apps that are not used by any systems (including the \char`\"{}unpack\char`\"{} system, if there is one). \index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Snapshot@{system\+\_\+\+Snapshot}}
\index{system\+\_\+\+Snapshot@{system\+\_\+\+Snapshot}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Snapshot(void)}{system_Snapshot(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} system\+\_\+\+Snapshot (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a153c224f5a2ef11c850901697386bb03}{}\label{daemons_2linux_2update_daemon_2system_8h_a153c224f5a2ef11c850901697386bb03}
Take a snapshot of the current system.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. 
\end{DoxyReturn}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Symlink\+App@{system\+\_\+\+Symlink\+App}}
\index{system\+\_\+\+Symlink\+App@{system\+\_\+\+Symlink\+App}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Symlink\+App(const char $\ast$system\+Name\+Ptr, const char $\ast$app\+Md5\+Ptr, const char $\ast$app\+Name\+Ptr)}{system_SymlinkApp(const char *systemNamePtr, const char *appMd5Ptr, const char *appNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Symlink\+App (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{system\+Name\+Ptr, }
\item[{const char $\ast$}]{app\+Md5\+Ptr, }
\item[{const char $\ast$}]{app\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a90f4c4eb35e3893e96e295987185e623}{}\label{daemons_2linux_2update_daemon_2system_8h_a90f4c4eb35e3893e96e295987185e623}
Create a symlink to a given app\textquotesingle{}s non-\/writeable files in a given system. 
\begin{DoxyParams}{Parameters}
{\em system\+Name\+Ptr} & E.\+g., \char`\"{}current\char`\"{} or \char`\"{}unpack\char`\"{}. \\
\hline
\end{DoxyParams}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Unlink\+App@{system\+\_\+\+Unlink\+App}}
\index{system\+\_\+\+Unlink\+App@{system\+\_\+\+Unlink\+App}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Unlink\+App(const char $\ast$system\+Name\+Ptr, const char $\ast$app\+Name\+Ptr)}{system_UnlinkApp(const char *systemNamePtr, const char *appNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Unlink\+App (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{system\+Name\+Ptr, }
\item[{const char $\ast$}]{app\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_ab96628c3a43d33b3be5ba342529f3958}{}\label{daemons_2linux_2update_daemon_2system_8h_ab96628c3a43d33b3be5ba342529f3958}
Remove a symlink to a given app\textquotesingle{}s non-\/writeable files in a given system. 
\begin{DoxyParams}{Parameters}
{\em system\+Name\+Ptr} & E.\+g., \char`\"{}current\char`\"{} or \char`\"{}unpack\char`\"{}. \\
\hline
\end{DoxyParams}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Update\+Current\+App\+Writeable\+Files@{system\+\_\+\+Update\+Current\+App\+Writeable\+Files}}
\index{system\+\_\+\+Update\+Current\+App\+Writeable\+Files@{system\+\_\+\+Update\+Current\+App\+Writeable\+Files}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Update\+Current\+App\+Writeable\+Files(const char $\ast$app\+Md5\+Ptr, const char $\ast$app\+Name\+Ptr)}{system_UpdateCurrentAppWriteableFiles(const char *appMd5Ptr, const char *appNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} system\+\_\+\+Update\+Current\+App\+Writeable\+Files (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{app\+Md5\+Ptr, }
\item[{const char $\ast$}]{app\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a2ac45384977e75e61647d2b2527e6bfb}{}\label{daemons_2linux_2update_daemon_2system_8h_a2ac45384977e75e61647d2b2527e6bfb}
Update a given app\textquotesingle{}s writeable files in the \char`\"{}current\char`\"{} system to match what\textquotesingle{}s in the app\textquotesingle{}s install directory (/legato/apps/$<$hash$>$). Deletes from the current system files that are not in the app\textquotesingle{}s install directory. Adds to the current system files from the apps\textquotesingle{} install directory that are not in the current system. Leaves alone files that are in both the current system and the app\textquotesingle{}s install directory.

\begin{DoxyWarning}{Warning}
Assumes the app identified by the hash is installed in /legato/apps/$<$hash$>$. 
\end{DoxyWarning}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Version@{system\+\_\+\+Version}}
\index{system\+\_\+\+Version@{system\+\_\+\+Version}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Version(char $\ast$version\+Ptr, size\+\_\+t version\+Size)}{system_Version(char *versionPtr, size_t versionSize)}}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t system\+\_\+\+Version (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{version\+Ptr, }
\item[{size\+\_\+t}]{version\+Size}
\end{DoxyParamCaption}
)}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a667252b4e84069ec7a61bfb9328ec8fa}{}\label{daemons_2linux_2update_daemon_2system_8h_a667252b4e84069ec7a61bfb9328ec8fa}
Read the current system\textquotesingle{}s version string (null-\/terminated).

\begin{DoxyReturn}{Returns}
Length of the version string, in bytes, excluding the null terminator. 0 if version string could not be read. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em version\+Ptr} & Buffer to write the version string too. \\
\hline
\mbox{\tt in}  & {\em version\+Size} & Size of the buffer passed in. \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Current\+Apps\+Dir@{system\+\_\+\+Current\+Apps\+Dir}}
\index{system\+\_\+\+Current\+Apps\+Dir@{system\+\_\+\+Current\+Apps\+Dir}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Current\+Apps\+Dir}{system_CurrentAppsDir}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ system\+\_\+\+Current\+Apps\+Dir}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a13eef0955beafede871bf2a64286641c}{}\label{daemons_2linux_2update_daemon_2system_8h_a13eef0955beafede871bf2a64286641c}
Absolute file system path to directory containing apps in current running system. \index{daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}!system\+\_\+\+Unpack\+Path@{system\+\_\+\+Unpack\+Path}}
\index{system\+\_\+\+Unpack\+Path@{system\+\_\+\+Unpack\+Path}!daemons/linux/update\+Daemon/system.\+h@{daemons/linux/update\+Daemon/system.\+h}}
\subsubsection[{\texorpdfstring{system\+\_\+\+Unpack\+Path}{system_UnpackPath}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ system\+\_\+\+Unpack\+Path}\hypertarget{daemons_2linux_2update_daemon_2system_8h_a183aabda6f0dc9e057c9f0e53654e503}{}\label{daemons_2linux_2update_daemon_2system_8h_a183aabda6f0dc9e057c9f0e53654e503}
Absolute file system path to the directory that systems get unpacked into. 