\hypertarget{semaphores_8c}{}\section{framework/liblegato/linux/semaphores.c File Reference}
\label{semaphores_8c}\index{framework/liblegato/linux/semaphores.\+c@{framework/liblegato/linux/semaphores.\+c}}
{\ttfamily \#include \char`\"{}legato.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}semaphores.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}thread.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{semaphores_8c_a3987ee819c0689005c181d154233ce1c}{D\+E\+F\+A\+U\+L\+T\+\_\+\+P\+O\+O\+L\+\_\+\+S\+I\+ZE}~4
\item 
\#define \hyperlink{semaphores_8c_a6ece5a35a2a1c6823a48befff37fc75b}{L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST}()~\hyperlink{sbtrace_8c_a7c6c2e5e914cf8eca19d150e90f3b106}{L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+lock(\&\hyperlink{semaphores_8c_a5f06b43d0777f3383c1c7078c7f476bf}{Semaphore\+List\+Mutex}) == 0)
\begin{DoxyCompactList}\small\item\em Lock the Semaphore List Mutex. \end{DoxyCompactList}\item 
\#define \hyperlink{semaphores_8c_aa1f1521519bec8b5fc1eb1ce365a36ef}{U\+N\+L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST}()~\hyperlink{sbtrace_8c_a7c6c2e5e914cf8eca19d150e90f3b106}{L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+unlock(\&\hyperlink{semaphores_8c_a5f06b43d0777f3383c1c7078c7f476bf}{Semaphore\+List\+Mutex}) == 0)
\begin{DoxyCompactList}\small\item\em Unlock the Semaphore List Mutex. \end{DoxyCompactList}\item 
\#define \hyperlink{semaphores_8c_a0b82f360a54d80c907fa1d5296616b66}{L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST}(semaphore\+Ptr)~\hyperlink{sbtrace_8c_a7c6c2e5e914cf8eca19d150e90f3b106}{L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+lock(\&(semaphore\+Ptr)-\/$>$waiting\+List\+Mutex) == 0)
\begin{DoxyCompactList}\small\item\em Lock a semaphore\textquotesingle{}s Waiting List Mutex. \end{DoxyCompactList}\item 
\#define \hyperlink{semaphores_8c_a666b7564afd983180ce4e9eb7ffa612c}{U\+N\+L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST}(semaphore\+Ptr)~\hyperlink{sbtrace_8c_a7c6c2e5e914cf8eca19d150e90f3b106}{L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+unlock(\&(semaphore\+Ptr)-\/$>$waiting\+List\+Mutex) == 0)
\begin{DoxyCompactList}\small\item\em Unlock a semaphore\textquotesingle{}s Waiting List Mutex. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{semaphores_8c_a43e0550c0dfe2001e6b7552acf1ac4a2}{Add\+To\+Waiting\+List} (\hyperlink{struct_semaphore__t}{Semaphore\+\_\+t} $\ast$semaphore\+Ptr, \hyperlink{structsem___thread_rec__t}{sem\+\_\+\+Thread\+Rec\+\_\+t} $\ast$per\+Thread\+Rec\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{semaphores_8c_ac60ba9404909f6fa34afb45b1826b377}{Remove\+From\+Waiting\+List} (\hyperlink{struct_semaphore__t}{Semaphore\+\_\+t} $\ast$semaphore\+Ptr, \hyperlink{structsem___thread_rec__t}{sem\+\_\+\+Thread\+Rec\+\_\+t} $\ast$per\+Thread\+Rec\+Ptr)
\item 
size\+\_\+t $\ast$$\ast$ \hyperlink{semaphores_8c_adb7ad1cf9458b47f8a1a0c93e762854d}{sem\+\_\+\+Get\+Semaphore\+List\+Chg\+Cnt\+Ref} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{semaphores_8c_a725c8be224d8f3265a50cea25ff3e402}{sem\+\_\+\+Init} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{semaphores_8c_af94ebc9551d3f7dc18903f3964cecf0f}{sem\+\_\+\+Thread\+Init} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{le__semaphore_8h_a25b1300f952a83efe8ad0a321f2d06dc}{le\+\_\+sem\+\_\+\+Ref\+\_\+t} \hyperlink{semaphores_8c_add9fab5440abcff5a8bc3b8bd1126d99}{le\+\_\+sem\+\_\+\+Create} (const char $\ast$name, int32\+\_\+t initial\+Count)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{semaphores_8c_a96361b126f59934354ca17bf8b74b8f6}{le\+\_\+sem\+\_\+\+Delete} (\hyperlink{le__semaphore_8h_a25b1300f952a83efe8ad0a321f2d06dc}{le\+\_\+sem\+\_\+\+Ref\+\_\+t} semaphore\+Ptr)
\item 
\hyperlink{le__semaphore_8h_a25b1300f952a83efe8ad0a321f2d06dc}{le\+\_\+sem\+\_\+\+Ref\+\_\+t} \hyperlink{semaphores_8c_a8932403a6f1425e42d4d3e2e61bafc4f}{le\+\_\+sem\+\_\+\+Find\+Semaphore} (const char $\ast$name)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{semaphores_8c_aecdf87fe330dd008771b7530edbb1f2b}{le\+\_\+sem\+\_\+\+Wait} (\hyperlink{le__semaphore_8h_a25b1300f952a83efe8ad0a321f2d06dc}{le\+\_\+sem\+\_\+\+Ref\+\_\+t} semaphore\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{semaphores_8c_a6a6c435042dd37a3c78ebbab6ec72689}{le\+\_\+sem\+\_\+\+Try\+Wait} (\hyperlink{le__semaphore_8h_a25b1300f952a83efe8ad0a321f2d06dc}{le\+\_\+sem\+\_\+\+Ref\+\_\+t} semaphore\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{semaphores_8c_a14475f0c2f5483427279d39220f55eaa}{le\+\_\+sem\+\_\+\+Wait\+With\+Time\+Out} (\hyperlink{le__semaphore_8h_a25b1300f952a83efe8ad0a321f2d06dc}{le\+\_\+sem\+\_\+\+Ref\+\_\+t} semaphore\+Ptr, \hyperlink{structle__clk___time__t}{le\+\_\+clk\+\_\+\+Time\+\_\+t} time\+To\+Wait)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{semaphores_8c_abb859411cc58fbcc576c986ef52083b2}{le\+\_\+sem\+\_\+\+Post} (\hyperlink{le__semaphore_8h_a25b1300f952a83efe8ad0a321f2d06dc}{le\+\_\+sem\+\_\+\+Ref\+\_\+t} semaphore\+Ptr)
\item 
int \hyperlink{semaphores_8c_ac4858ccb0ba748ca463bb29807b75c05}{le\+\_\+sem\+\_\+\+Get\+Value} (\hyperlink{le__semaphore_8h_a25b1300f952a83efe8ad0a321f2d06dc}{le\+\_\+sem\+\_\+\+Ref\+\_\+t} semaphore\+Ptr)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static size\+\_\+t \hyperlink{semaphores_8c_a1c414d8dcd906579a3a6cf1d8ff0b980}{Semaphore\+List\+Change\+Count} = 0
\item 
static size\+\_\+t $\ast$ \hyperlink{semaphores_8c_a4c0400419d087207751d6bb7730c4c7c}{Semaphore\+List\+Change\+Count\+Ref} = \&\hyperlink{semaphores_8c_a1c414d8dcd906579a3a6cf1d8ff0b980}{Semaphore\+List\+Change\+Count}
\item 
static \hyperlink{le__mem_8h_a44a896f6a0a1a8c733e8038eb332989e}{le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} \hyperlink{semaphores_8c_a88c62c625d432f8a17e5496072a00917}{Semaphore\+Pool\+Ref}
\item 
static \hyperlink{structle__dls___list__t}{le\+\_\+dls\+\_\+\+List\+\_\+t} \hyperlink{semaphores_8c_a0522bdf2e78706bf8eeddc0431179cde}{Semaphore\+List} = \hyperlink{le__doubly_linked_list_8h_a68f28b61cdfd004591f24730b4d5a740}{L\+E\+\_\+\+D\+L\+S\+\_\+\+L\+I\+S\+T\+\_\+\+I\+N\+IT}
\item 
static pthread\+\_\+mutex\+\_\+t \hyperlink{semaphores_8c_a5f06b43d0777f3383c1c7078c7f476bf}{Semaphore\+List\+Mutex} = P\+T\+H\+R\+E\+A\+D\+\_\+\+R\+E\+C\+U\+R\+S\+I\+V\+E\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+Z\+E\+R\+\_\+\+NP
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Legato \hyperlink{c_semaphore}{Semaphore A\+PI} implementation.

Each semaphore is represented by a {\bfseries  Semaphore object }. They are dynamically allocated from the {\bfseries  Semaphore Pool } and are stored on the {\bfseries  Semaphore List } until they are destroyed.

In addition, each thread has a {\bfseries  Per-\/\+Thread Semaphore Record }, which is kept in the Thread object inside the thread module and is fetched through a call to \hyperlink{thread_8c_a6c762c01422a1032a7dc704f35ddde01}{thread\+\_\+\+Get\+Semaphore\+Rec\+Ptr()}. That Per-\/\+Thread Semaphore Record holds a pointer to a semaphore that the thread is waiting on (or N\+U\+LL if not waiting on a semaphore).

Some of the tricky features of the Semaphore have to do with the diagnostic capabilities provided by command-\/line tools. That is, the command-\/line tools can ask\+:
\begin{DoxyEnumerate}
\item What semaphore is a given thread currently waiting on?
\begin{DoxyItemize}
\item A single semaphore reference per thread keeps track of this (N\+U\+LL if not waiting).
\end{DoxyItemize}
\item What semaphores currently exist in the process?
\begin{DoxyItemize}
\item A single per-\/process list of all semaphores keeps track of this (the Semaphore List).
\end{DoxyItemize}
\item What threads, if any, are currently waiting on a given semaphore?
\begin{DoxyItemize}
\item Each Semaphore object has a list of Per-\/\+Thread Semaphore Records for this.
\end{DoxyItemize}
\end{DoxyEnumerate}

Copyright (C) Sierra Wireless Inc. 

\subsection{Macro Definition Documentation}
\index{semaphores.\+c@{semaphores.\+c}!D\+E\+F\+A\+U\+L\+T\+\_\+\+P\+O\+O\+L\+\_\+\+S\+I\+ZE@{D\+E\+F\+A\+U\+L\+T\+\_\+\+P\+O\+O\+L\+\_\+\+S\+I\+ZE}}
\index{D\+E\+F\+A\+U\+L\+T\+\_\+\+P\+O\+O\+L\+\_\+\+S\+I\+ZE@{D\+E\+F\+A\+U\+L\+T\+\_\+\+P\+O\+O\+L\+\_\+\+S\+I\+ZE}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{D\+E\+F\+A\+U\+L\+T\+\_\+\+P\+O\+O\+L\+\_\+\+S\+I\+ZE}{DEFAULT_POOL_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\+E\+F\+A\+U\+L\+T\+\_\+\+P\+O\+O\+L\+\_\+\+S\+I\+ZE~4}\hypertarget{semaphores_8c_a3987ee819c0689005c181d154233ce1c}{}\label{semaphores_8c_a3987ee819c0689005c181d154233ce1c}
Number of objects in the Semaphore Pool to start with. T\+O\+DO\+: Change this to be configurable per-\/process. \index{semaphores.\+c@{semaphores.\+c}!L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST@{L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST}}
\index{L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST@{L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST}{LOCK_SEMAPHORE_LIST}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST(
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)~{\bf L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+lock(\&{\bf Semaphore\+List\+Mutex}) == 0)}\hypertarget{semaphores_8c_a6ece5a35a2a1c6823a48befff37fc75b}{}\label{semaphores_8c_a6ece5a35a2a1c6823a48befff37fc75b}


Lock the Semaphore List Mutex. 

\index{semaphores.\+c@{semaphores.\+c}!L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST@{L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST}}
\index{L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST@{L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST}{LOCK_WAITING_LIST}}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST(
\begin{DoxyParamCaption}
\item[{}]{semaphore\+Ptr}
\end{DoxyParamCaption}
)~{\bf L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+lock(\&(semaphore\+Ptr)-\/$>$waiting\+List\+Mutex) == 0)}\hypertarget{semaphores_8c_a0b82f360a54d80c907fa1d5296616b66}{}\label{semaphores_8c_a0b82f360a54d80c907fa1d5296616b66}


Lock a semaphore\textquotesingle{}s Waiting List Mutex. 

\index{semaphores.\+c@{semaphores.\+c}!U\+N\+L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST@{U\+N\+L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST}}
\index{U\+N\+L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST@{U\+N\+L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{U\+N\+L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST}{UNLOCK_SEMAPHORE_LIST}}]{\setlength{\rightskip}{0pt plus 5cm}\#define U\+N\+L\+O\+C\+K\+\_\+\+S\+E\+M\+A\+P\+H\+O\+R\+E\+\_\+\+L\+I\+ST(
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)~{\bf L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+unlock(\&{\bf Semaphore\+List\+Mutex}) == 0)}\hypertarget{semaphores_8c_aa1f1521519bec8b5fc1eb1ce365a36ef}{}\label{semaphores_8c_aa1f1521519bec8b5fc1eb1ce365a36ef}


Unlock the Semaphore List Mutex. 

\index{semaphores.\+c@{semaphores.\+c}!U\+N\+L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST@{U\+N\+L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST}}
\index{U\+N\+L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST@{U\+N\+L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{U\+N\+L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST}{UNLOCK_WAITING_LIST}}]{\setlength{\rightskip}{0pt plus 5cm}\#define U\+N\+L\+O\+C\+K\+\_\+\+W\+A\+I\+T\+I\+N\+G\+\_\+\+L\+I\+ST(
\begin{DoxyParamCaption}
\item[{}]{semaphore\+Ptr}
\end{DoxyParamCaption}
)~{\bf L\+E\+\_\+\+A\+S\+S\+E\+RT}(pthread\+\_\+mutex\+\_\+unlock(\&(semaphore\+Ptr)-\/$>$waiting\+List\+Mutex) == 0)}\hypertarget{semaphores_8c_a666b7564afd983180ce4e9eb7ffa612c}{}\label{semaphores_8c_a666b7564afd983180ce4e9eb7ffa612c}


Unlock a semaphore\textquotesingle{}s Waiting List Mutex. 



\subsection{Function Documentation}
\index{semaphores.\+c@{semaphores.\+c}!Add\+To\+Waiting\+List@{Add\+To\+Waiting\+List}}
\index{Add\+To\+Waiting\+List@{Add\+To\+Waiting\+List}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{Add\+To\+Waiting\+List(\+Semaphore\+\_\+t $\ast$semaphore\+Ptr, sem\+\_\+\+Thread\+Rec\+\_\+t $\ast$per\+Thread\+Rec\+Ptr)}{AddToWaitingList(Semaphore_t *semaphorePtr, sem_ThreadRec_t *perThreadRecPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Add\+To\+Waiting\+List (
\begin{DoxyParamCaption}
\item[{{\bf Semaphore\+\_\+t} $\ast$}]{semaphore\+Ptr, }
\item[{{\bf sem\+\_\+\+Thread\+Rec\+\_\+t} $\ast$}]{per\+Thread\+Rec\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{semaphores_8c_a43e0550c0dfe2001e6b7552acf1ac4a2}{}\label{semaphores_8c_a43e0550c0dfe2001e6b7552acf1ac4a2}
Adds a thread\textquotesingle{}s Semaphore Record to a Semaphore object\textquotesingle{}s waiting list. \index{semaphores.\+c@{semaphores.\+c}!le\+\_\+sem\+\_\+\+Create@{le\+\_\+sem\+\_\+\+Create}}
\index{le\+\_\+sem\+\_\+\+Create@{le\+\_\+sem\+\_\+\+Create}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+sem\+\_\+\+Create(const char $\ast$name, int32\+\_\+t initial\+Count)}{le_sem_Create(const char *name, int32_t initialCount)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+sem\+\_\+\+Ref\+\_\+t} le\+\_\+sem\+\_\+\+Create (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{name, }
\item[{int32\+\_\+t}]{initial\+Count}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_add9fab5440abcff5a8bc3b8bd1126d99}{}\label{semaphores_8c_add9fab5440abcff5a8bc3b8bd1126d99}
Create a semaphore shared by threads within the same process

\begin{DoxyReturn}{Returns}
Upon successful completion, it shall return reference to the semaphore, otherwise, assert with L\+E\+\_\+\+F\+A\+T\+AL and log. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em name} & Name of the semaphore \\
\hline
\mbox{\tt in}  & {\em initial\+Count} & initial number of semaphore \\
\hline
\end{DoxyParams}
\index{semaphores.\+c@{semaphores.\+c}!le\+\_\+sem\+\_\+\+Delete@{le\+\_\+sem\+\_\+\+Delete}}
\index{le\+\_\+sem\+\_\+\+Delete@{le\+\_\+sem\+\_\+\+Delete}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+sem\+\_\+\+Delete(le\+\_\+sem\+\_\+\+Ref\+\_\+t semaphore\+Ptr)}{le_sem_Delete(le_sem_Ref_t semaphorePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+sem\+\_\+\+Delete (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+sem\+\_\+\+Ref\+\_\+t}}]{semaphore\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_a96361b126f59934354ca17bf8b74b8f6}{}\label{semaphores_8c_a96361b126f59934354ca17bf8b74b8f6}
Delete a semaphore 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em semaphore\+Ptr} & Pointer to the semaphore \\
\hline
\end{DoxyParams}
\index{semaphores.\+c@{semaphores.\+c}!le\+\_\+sem\+\_\+\+Find\+Semaphore@{le\+\_\+sem\+\_\+\+Find\+Semaphore}}
\index{le\+\_\+sem\+\_\+\+Find\+Semaphore@{le\+\_\+sem\+\_\+\+Find\+Semaphore}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+sem\+\_\+\+Find\+Semaphore(const char $\ast$name)}{le_sem_FindSemaphore(const char *name)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+sem\+\_\+\+Ref\+\_\+t} le\+\_\+sem\+\_\+\+Find\+Semaphore (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{name}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_a8932403a6f1425e42d4d3e2e61bafc4f}{}\label{semaphores_8c_a8932403a6f1425e42d4d3e2e61bafc4f}
Finds a semaphore given the semaphore\textquotesingle{}s name.

\begin{DoxyReturn}{Returns}
Reference to the semaphore, or N\+U\+LL if the semaphore doesn\textquotesingle{}t exist. Invalid Name will do L\+E\+\_\+\+F\+A\+T\+AL 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em name} & The name of the semaphore. \\
\hline
\end{DoxyParams}
\index{semaphores.\+c@{semaphores.\+c}!le\+\_\+sem\+\_\+\+Get\+Value@{le\+\_\+sem\+\_\+\+Get\+Value}}
\index{le\+\_\+sem\+\_\+\+Get\+Value@{le\+\_\+sem\+\_\+\+Get\+Value}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+sem\+\_\+\+Get\+Value(le\+\_\+sem\+\_\+\+Ref\+\_\+t semaphore\+Ptr)}{le_sem_GetValue(le_sem_Ref_t semaphorePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}int le\+\_\+sem\+\_\+\+Get\+Value (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+sem\+\_\+\+Ref\+\_\+t}}]{semaphore\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_ac4858ccb0ba748ca463bb29807b75c05}{}\label{semaphores_8c_ac4858ccb0ba748ca463bb29807b75c05}
Get the value of a semaphore.

\begin{DoxyReturn}{Returns}
value of the semaphore 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em semaphore\+Ptr} & Pointer to the semaphore \\
\hline
\end{DoxyParams}
\index{semaphores.\+c@{semaphores.\+c}!le\+\_\+sem\+\_\+\+Post@{le\+\_\+sem\+\_\+\+Post}}
\index{le\+\_\+sem\+\_\+\+Post@{le\+\_\+sem\+\_\+\+Post}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+sem\+\_\+\+Post(le\+\_\+sem\+\_\+\+Ref\+\_\+t semaphore\+Ptr)}{le_sem_Post(le_sem_Ref_t semaphorePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+sem\+\_\+\+Post (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+sem\+\_\+\+Ref\+\_\+t}}]{semaphore\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_abb859411cc58fbcc576c986ef52083b2}{}\label{semaphores_8c_abb859411cc58fbcc576c986ef52083b2}
Post a semaphore.

\begin{DoxyReturn}{Returns}
Nothing. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em semaphore\+Ptr} & Pointer to the semaphore \\
\hline
\end{DoxyParams}
\index{semaphores.\+c@{semaphores.\+c}!le\+\_\+sem\+\_\+\+Try\+Wait@{le\+\_\+sem\+\_\+\+Try\+Wait}}
\index{le\+\_\+sem\+\_\+\+Try\+Wait@{le\+\_\+sem\+\_\+\+Try\+Wait}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+sem\+\_\+\+Try\+Wait(le\+\_\+sem\+\_\+\+Ref\+\_\+t semaphore\+Ptr)}{le_sem_TryWait(le_sem_Ref_t semaphorePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} le\+\_\+sem\+\_\+\+Try\+Wait (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+sem\+\_\+\+Ref\+\_\+t}}]{semaphore\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_a6a6c435042dd37a3c78ebbab6ec72689}{}\label{semaphores_8c_a6a6c435042dd37a3c78ebbab6ec72689}
Try to wait for a semaphore.

it is the same as \hyperlink{semaphores_8c_aecdf87fe330dd008771b7530edbb1f2b}{le\+\_\+sem\+\_\+\+Wait}, exept that if the decrement cannot be immediately performes, then call returns an L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK instead of blocking

\begin{DoxyReturn}{Returns}
Upon successful completion, it shall return L\+E\+\_\+\+OK (0), otherwise, L\+E\+\_\+\+W\+O\+U\+L\+D\+\_\+\+B\+L\+O\+CK as the call would block if it was a blocking call. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em semaphore\+Ptr} & Pointer to the semaphore \\
\hline
\end{DoxyParams}
\index{semaphores.\+c@{semaphores.\+c}!le\+\_\+sem\+\_\+\+Wait@{le\+\_\+sem\+\_\+\+Wait}}
\index{le\+\_\+sem\+\_\+\+Wait@{le\+\_\+sem\+\_\+\+Wait}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+sem\+\_\+\+Wait(le\+\_\+sem\+\_\+\+Ref\+\_\+t semaphore\+Ptr)}{le_sem_Wait(le_sem_Ref_t semaphorePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} le\+\_\+sem\+\_\+\+Wait (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+sem\+\_\+\+Ref\+\_\+t}}]{semaphore\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_aecdf87fe330dd008771b7530edbb1f2b}{}\label{semaphores_8c_aecdf87fe330dd008771b7530edbb1f2b}
Wait for a semaphore.

\begin{DoxyReturn}{Returns}
Nothing. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em semaphore\+Ptr} & Pointer to the semaphore \\
\hline
\end{DoxyParams}
\index{semaphores.\+c@{semaphores.\+c}!le\+\_\+sem\+\_\+\+Wait\+With\+Time\+Out@{le\+\_\+sem\+\_\+\+Wait\+With\+Time\+Out}}
\index{le\+\_\+sem\+\_\+\+Wait\+With\+Time\+Out@{le\+\_\+sem\+\_\+\+Wait\+With\+Time\+Out}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+sem\+\_\+\+Wait\+With\+Time\+Out(le\+\_\+sem\+\_\+\+Ref\+\_\+t semaphore\+Ptr, le\+\_\+clk\+\_\+\+Time\+\_\+t time\+To\+Wait)}{le_sem_WaitWithTimeOut(le_sem_Ref_t semaphorePtr, le_clk_Time_t timeToWait)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} le\+\_\+sem\+\_\+\+Wait\+With\+Time\+Out (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+sem\+\_\+\+Ref\+\_\+t}}]{semaphore\+Ptr, }
\item[{{\bf le\+\_\+clk\+\_\+\+Time\+\_\+t}}]{time\+To\+Wait}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_a14475f0c2f5483427279d39220f55eaa}{}\label{semaphores_8c_a14475f0c2f5483427279d39220f55eaa}
Wait for a semaphore with a limit on how long to wait.

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item L\+E\+\_\+\+OK The function succeed
\item L\+E\+\_\+\+T\+I\+M\+E\+O\+UT time\+To\+Wait elapsed
\end{DoxyItemize}
\end{DoxyReturn}
\begin{DoxyNote}{Note}
When L\+E\+\_\+\+T\+I\+M\+E\+O\+UT occurs the semaphore is not decremented. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em semaphore\+Ptr} & Pointer to the semaphore. \\
\hline
\mbox{\tt in}  & {\em time\+To\+Wait} & Time to wait \\
\hline
\end{DoxyParams}
\index{semaphores.\+c@{semaphores.\+c}!Remove\+From\+Waiting\+List@{Remove\+From\+Waiting\+List}}
\index{Remove\+From\+Waiting\+List@{Remove\+From\+Waiting\+List}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{Remove\+From\+Waiting\+List(\+Semaphore\+\_\+t $\ast$semaphore\+Ptr, sem\+\_\+\+Thread\+Rec\+\_\+t $\ast$per\+Thread\+Rec\+Ptr)}{RemoveFromWaitingList(Semaphore_t *semaphorePtr, sem_ThreadRec_t *perThreadRecPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Remove\+From\+Waiting\+List (
\begin{DoxyParamCaption}
\item[{{\bf Semaphore\+\_\+t} $\ast$}]{semaphore\+Ptr, }
\item[{{\bf sem\+\_\+\+Thread\+Rec\+\_\+t} $\ast$}]{per\+Thread\+Rec\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{semaphores_8c_ac60ba9404909f6fa34afb45b1826b377}{}\label{semaphores_8c_ac60ba9404909f6fa34afb45b1826b377}
Removes a thread\textquotesingle{}s Semaphore Record from a Semaphore object\textquotesingle{}s waiting list. \index{semaphores.\+c@{semaphores.\+c}!sem\+\_\+\+Get\+Semaphore\+List\+Chg\+Cnt\+Ref@{sem\+\_\+\+Get\+Semaphore\+List\+Chg\+Cnt\+Ref}}
\index{sem\+\_\+\+Get\+Semaphore\+List\+Chg\+Cnt\+Ref@{sem\+\_\+\+Get\+Semaphore\+List\+Chg\+Cnt\+Ref}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{sem\+\_\+\+Get\+Semaphore\+List\+Chg\+Cnt\+Ref(void)}{sem_GetSemaphoreListChgCntRef(void)}}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t$\ast$$\ast$ sem\+\_\+\+Get\+Semaphore\+List\+Chg\+Cnt\+Ref (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_adb7ad1cf9458b47f8a1a0c93e762854d}{}\label{semaphores_8c_adb7ad1cf9458b47f8a1a0c93e762854d}
Exposing the semaphore list change counter; mainly for the Inspect tool. \index{semaphores.\+c@{semaphores.\+c}!sem\+\_\+\+Init@{sem\+\_\+\+Init}}
\index{sem\+\_\+\+Init@{sem\+\_\+\+Init}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{sem\+\_\+\+Init(void)}{sem_Init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} sem\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_a725c8be224d8f3265a50cea25ff3e402}{}\label{semaphores_8c_a725c8be224d8f3265a50cea25ff3e402}
Initialize the Semaphore module.

This function must be called exactly once at process start-\/up before any other semaphore module functions are called. \index{semaphores.\+c@{semaphores.\+c}!sem\+\_\+\+Thread\+Init@{sem\+\_\+\+Thread\+Init}}
\index{sem\+\_\+\+Thread\+Init@{sem\+\_\+\+Thread\+Init}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{sem\+\_\+\+Thread\+Init(void)}{sem_ThreadInit(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} sem\+\_\+\+Thread\+Init (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{semaphores_8c_af94ebc9551d3f7dc18903f3964cecf0f}{}\label{semaphores_8c_af94ebc9551d3f7dc18903f3964cecf0f}
Initialize the thread-\/specific parts of the semaphore module.

This function must be called once by each thread when it starts, before any other semaphore module functions are called by that thread. 

\subsection{Variable Documentation}
\index{semaphores.\+c@{semaphores.\+c}!Semaphore\+List@{Semaphore\+List}}
\index{Semaphore\+List@{Semaphore\+List}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{Semaphore\+List}{SemaphoreList}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+dls\+\_\+\+List\+\_\+t} Semaphore\+List = {\bf L\+E\+\_\+\+D\+L\+S\+\_\+\+L\+I\+S\+T\+\_\+\+I\+N\+IT}\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{semaphores_8c_a0522bdf2e78706bf8eeddc0431179cde}{}\label{semaphores_8c_a0522bdf2e78706bf8eeddc0431179cde}
Semaphore List.

List on which all Semaphore objects in the process are kept. \index{semaphores.\+c@{semaphores.\+c}!Semaphore\+List\+Change\+Count@{Semaphore\+List\+Change\+Count}}
\index{Semaphore\+List\+Change\+Count@{Semaphore\+List\+Change\+Count}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{Semaphore\+List\+Change\+Count}{SemaphoreListChangeCount}}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t Semaphore\+List\+Change\+Count = 0\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{semaphores_8c_a1c414d8dcd906579a3a6cf1d8ff0b980}{}\label{semaphores_8c_a1c414d8dcd906579a3a6cf1d8ff0b980}
A counter that increments every time a change is made to the semaphore. \index{semaphores.\+c@{semaphores.\+c}!Semaphore\+List\+Change\+Count\+Ref@{Semaphore\+List\+Change\+Count\+Ref}}
\index{Semaphore\+List\+Change\+Count\+Ref@{Semaphore\+List\+Change\+Count\+Ref}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{Semaphore\+List\+Change\+Count\+Ref}{SemaphoreListChangeCountRef}}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t$\ast$ Semaphore\+List\+Change\+Count\+Ref = \&{\bf Semaphore\+List\+Change\+Count}\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{semaphores_8c_a4c0400419d087207751d6bb7730c4c7c}{}\label{semaphores_8c_a4c0400419d087207751d6bb7730c4c7c}
\index{semaphores.\+c@{semaphores.\+c}!Semaphore\+List\+Mutex@{Semaphore\+List\+Mutex}}
\index{Semaphore\+List\+Mutex@{Semaphore\+List\+Mutex}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{Semaphore\+List\+Mutex}{SemaphoreListMutex}}]{\setlength{\rightskip}{0pt plus 5cm}pthread\+\_\+mutex\+\_\+t Semaphore\+List\+Mutex = P\+T\+H\+R\+E\+A\+D\+\_\+\+R\+E\+C\+U\+R\+S\+I\+V\+E\+\_\+\+M\+U\+T\+E\+X\+\_\+\+I\+N\+I\+T\+I\+A\+L\+I\+Z\+E\+R\+\_\+\+NP\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{semaphores_8c_a5f06b43d0777f3383c1c7078c7f476bf}{}\label{semaphores_8c_a5f06b43d0777f3383c1c7078c7f476bf}
Semaphore List Mutex.

Basic pthreads mutex used to protect the Semaphore List from multi-\/threaded race conditions. Helper macro functions \hyperlink{mutex_8c_ac14e09cf9bbd3b524369a164e881f5a8}{L\+O\+C\+K\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+I\+S\+T()} and \hyperlink{mutex_8c_a9151f7436d51bd112769d4b61d28a4be}{U\+N\+L\+O\+C\+K\+\_\+\+M\+U\+T\+E\+X\+\_\+\+L\+I\+S\+T()} are provided to lock and unlock this mutex respectively. \index{semaphores.\+c@{semaphores.\+c}!Semaphore\+Pool\+Ref@{Semaphore\+Pool\+Ref}}
\index{Semaphore\+Pool\+Ref@{Semaphore\+Pool\+Ref}!semaphores.\+c@{semaphores.\+c}}
\subsubsection[{\texorpdfstring{Semaphore\+Pool\+Ref}{SemaphorePoolRef}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} Semaphore\+Pool\+Ref\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{semaphores_8c_a88c62c625d432f8a17e5496072a00917}{}\label{semaphores_8c_a88c62c625d432f8a17e5496072a00917}
Semaphore Pool.

Memory pool from which Semaphore objects are allocated. 