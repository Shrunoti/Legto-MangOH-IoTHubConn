\hypertarget{update_8c}{}\section{framework/tools/target/linux/update/update.c File Reference}
\label{update_8c}\index{framework/tools/target/linux/update/update.\+c@{framework/tools/target/linux/update/update.\+c}}
{\ttfamily \#include \char`\"{}legato.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}limit.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}interfaces.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_a4636a28aa35491d27d7c67d3495be126}{Print\+Help} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_aa37309e9f5b1dfdc8eb5d4a4d322ae51}{Set\+Force} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_acf60bfa3bb5fd5f04dff22be100c3716}{Remove\+Selected} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_afd09a464c9e56744e09838b64c880624}{Mark\+Good} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_aff146420886889b6ec4fbb321ca71b81}{Mark\+Bad} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_ae17017727fce490bd40ab8d5d04df5c6}{End\+Deferral} (int sig\+Num)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_ad957c743eaa7c4e1070f151ba863552b}{Start\+Deferral} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
static int \hyperlink{update_8c_a26da46d4cf0b20ccf279262a6aee36c9}{Get\+Update\+File} (const char $\ast$file\+Path\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_ad827154105dd68f1e9c81fecb74ce186}{Handle\+Positional\+Arg} (const char $\ast$arg\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_aaf4b5ba945b098a7ce70091946da3e41}{Print\+Progress\+Bar} (uint percent\+Done, const char $\ast$prog\+Msg)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_add07ea6b43f96db3af9ab1b7b1323262}{Print\+Error\+Msg} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_a3918cb74875053e60c7ae765ec2db52e}{Update\+Progress\+Handler} (\hyperlink{le__update__interface_8h_ae9758536ebaf1842cdaaddd6cf95a672}{le\+\_\+update\+\_\+\+State\+\_\+t} update\+State, uint percent\+Done, \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$context\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_a7e9813b02ae7292a2500d6b7fbfc43ed}{Update} (const char $\ast$file\+Path\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_8c_a46126abfe3d0d51f1fbaf588f956f7e8}{Remove\+App} (const char $\ast$app\+Name\+Ptr)
\item 
\hyperlink{update_8c_aa2f5e260288f4aa534c523f67d52d183}{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback} (\hyperlink{update_8c_aa37309e9f5b1dfdc8eb5d4a4d322ae51}{Set\+Force},\char`\"{}f\char`\"{},\char`\"{}force\char`\"{})
\item 
\hyperlink{update_8c_a262ffef780257d12f2e0e942a496123d}{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback} (\hyperlink{update_8c_acf60bfa3bb5fd5f04dff22be100c3716}{Remove\+Selected},\char`\"{}r\char`\"{},\char`\"{}\hyperlink{app_stop_client_8c_a5d172089e2e0c7a575dbb9681fcebe61}{remove}\char`\"{})
\item 
\hyperlink{update_8c_a89f22887e4e3cab28806d57b578eaaae}{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback} (\hyperlink{update_8c_afd09a464c9e56744e09838b64c880624}{Mark\+Good},\char`\"{}g\char`\"{},\char`\"{}mark-\/good\char`\"{})
\item 
\hyperlink{update_8c_a126b7d01ac949a32bddef0d87b6cf876}{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback} (\hyperlink{update_8c_aff146420886889b6ec4fbb321ca71b81}{Mark\+Bad},\char`\"{}b\char`\"{},\char`\"{}mark-\/bad\char`\"{})
\item 
\hyperlink{update_8c_aefab5ca8677b04eb2a93e49a5a39e6c8}{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback} (\hyperlink{update_8c_ad957c743eaa7c4e1070f151ba863552b}{Start\+Deferral},\char`\"{}d\char`\"{},\char`\"{}defer\char`\"{})
\item 
\hyperlink{update_8c_a858e49acd0ec05b0ef34a669cf3c5cfc}{le\+\_\+arg\+\_\+\+Add\+Positional\+Callback} (\hyperlink{update_8c_ad827154105dd68f1e9c81fecb74ce186}{Handle\+Positional\+Arg})
\item 
\hyperlink{update_8c_a485307e2fb9becdd3a349e5bd9c21108}{le\+\_\+arg\+\_\+\+Allow\+Less\+Positional\+Args\+Than\+Callbacks} ()
\item 
\hyperlink{update_8c_a90d7318a26a47ff744c89bedb6b02907}{le\+\_\+arg\+\_\+\+Scan} ()
\item 
\hyperlink{update_8c_aa347717dd6990ddc7c42a4f4a523c5a2}{if} (!\hyperlink{update_8c_ac3fdeca3b63101bb46822fca80eacc18}{Done})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static bool \hyperlink{update_8c_a56bebf9e403c00c86550516e851d76bc}{Force} = false
\item 
static bool \hyperlink{update_8c_aa56cc9128fc84425a8d6450cf3d4e123}{Do\+Remove} = false
\item 
static bool \hyperlink{update_8c_ac3fdeca3b63101bb46822fca80eacc18}{Done} = false
\item 
static const char $\ast$ \hyperlink{update_8c_a43a14549b79620dd634cdc21daafcdbe}{Arg\+Ptr} = \char`\"{}-\/\char`\"{}
\item 
\hyperlink{update_8c_a0392d452f926ce36c4852de26b5eca12}{C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+I\+N\+IT}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Client of update service provider(i.\+e. Update\+Daemon) for installing/removing app, and installing firmware. This client receives update package via S\+T\+D\+IN and sequentially calls update A\+P\+Is for successful update. This client follows the steps mentioned in le\+\_\+update.\+api documentation while performing update. A callback is implemented here to receive progress of ongoing update process.

Copyright (C) Sierra Wireless Inc. 

\subsection{Function Documentation}
\index{update.\+c@{update.\+c}!End\+Deferral@{End\+Deferral}}
\index{End\+Deferral@{End\+Deferral}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{End\+Deferral(int sig\+Num)}{EndDeferral(int sigNum)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} End\+Deferral (
\begin{DoxyParamCaption}
\item[{int}]{sig\+Num}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_ae17017727fce490bd40ab8d5d04df5c6}{}\label{update_8c_ae17017727fce490bd40ab8d5d04df5c6}
Function that gets called when we get S\+I\+G\+I\+NT (generally user hits Ctrl-\/C) so we can release our Defer before we die. \index{update.\+c@{update.\+c}!Get\+Update\+File@{Get\+Update\+File}}
\index{Get\+Update\+File@{Get\+Update\+File}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Get\+Update\+File(const char $\ast$file\+Path\+Ptr)}{GetUpdateFile(const char *filePathPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static int Get\+Update\+File (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_a26da46d4cf0b20ccf279262a6aee36c9}{}\label{update_8c_a26da46d4cf0b20ccf279262a6aee36c9}
Gets the file descriptor for the input stream. Input file either might be given via S\+T\+D\+IN or parameter. If no parameter is given, this function waits for data through S\+T\+D\+IN.

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item File descriptor pointing to update file. 
\end{DoxyItemize}
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em file\+Path\+Ptr} & The file path, or \char`\"{}-\/\char`\"{} for stdin. \\
\hline
\end{DoxyParams}
\index{update.\+c@{update.\+c}!Handle\+Positional\+Arg@{Handle\+Positional\+Arg}}
\index{Handle\+Positional\+Arg@{Handle\+Positional\+Arg}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Handle\+Positional\+Arg(const char $\ast$arg\+Ptr)}{HandlePositionalArg(const char *argPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Handle\+Positional\+Arg (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{arg\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_ad827154105dd68f1e9c81fecb74ce186}{}\label{update_8c_ad827154105dd68f1e9c81fecb74ce186}
Processes a positional argument from the command line. \index{update.\+c@{update.\+c}!if@{if}}
\index{if@{if}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{if("!Done)}{if(!Done)}}]{\setlength{\rightskip}{0pt plus 5cm}if (
\begin{DoxyParamCaption}
\item[{!}]{Done}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_aa347717dd6990ddc7c42a4f4a523c5a2}{}\label{update_8c_aa347717dd6990ddc7c42a4f4a523c5a2}
\index{update.\+c@{update.\+c}!le\+\_\+arg\+\_\+\+Add\+Positional\+Callback@{le\+\_\+arg\+\_\+\+Add\+Positional\+Callback}}
\index{le\+\_\+arg\+\_\+\+Add\+Positional\+Callback@{le\+\_\+arg\+\_\+\+Add\+Positional\+Callback}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+arg\+\_\+\+Add\+Positional\+Callback(\+Handle\+Positional\+Arg)}{le_arg_AddPositionalCallback(HandlePositionalArg)}}]{\setlength{\rightskip}{0pt plus 5cm}le\+\_\+arg\+\_\+\+Add\+Positional\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Handle\+Positional\+Arg}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_a858e49acd0ec05b0ef34a669cf3c5cfc}{}\label{update_8c_a858e49acd0ec05b0ef34a669cf3c5cfc}
\index{update.\+c@{update.\+c}!le\+\_\+arg\+\_\+\+Allow\+Less\+Positional\+Args\+Than\+Callbacks@{le\+\_\+arg\+\_\+\+Allow\+Less\+Positional\+Args\+Than\+Callbacks}}
\index{le\+\_\+arg\+\_\+\+Allow\+Less\+Positional\+Args\+Than\+Callbacks@{le\+\_\+arg\+\_\+\+Allow\+Less\+Positional\+Args\+Than\+Callbacks}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+arg\+\_\+\+Allow\+Less\+Positional\+Args\+Than\+Callbacks()}{le_arg_AllowLessPositionalArgsThanCallbacks()}}]{\setlength{\rightskip}{0pt plus 5cm}le\+\_\+arg\+\_\+\+Allow\+Less\+Positional\+Args\+Than\+Callbacks (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_a485307e2fb9becdd3a349e5bd9c21108}{}\label{update_8c_a485307e2fb9becdd3a349e5bd9c21108}
Tell the argument parser to allow less positional arguments than positional callbacks.

If less positional arguments are encountered than the number of positional callbacks when this is allowed, any positional callbacks that don\textquotesingle{}t have arguments won\textquotesingle{}t be called. If this is not allowed, \hyperlink{args_8c_af44485fc914a7ac6f562d23d66c3410c}{le\+\_\+arg\+\_\+\+Scan()} will print an error message to the standard error stream and exit the process with E\+X\+I\+T\+\_\+\+F\+A\+I\+L\+U\+RE if there are less positional arguments than there are positional callbacks. \index{update.\+c@{update.\+c}!le\+\_\+arg\+\_\+\+Scan@{le\+\_\+arg\+\_\+\+Scan}}
\index{le\+\_\+arg\+\_\+\+Scan@{le\+\_\+arg\+\_\+\+Scan}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+arg\+\_\+\+Scan()}{le_arg_Scan()}}]{\setlength{\rightskip}{0pt plus 5cm}le\+\_\+arg\+\_\+\+Scan (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_a90d7318a26a47ff744c89bedb6b02907}{}\label{update_8c_a90d7318a26a47ff744c89bedb6b02907}
Scans the argument list, setting variables and calling callbacks registered using the le\+\_\+arg\+\_\+\+Set\+Xxx\+Var(), le\+\_\+arg\+\_\+\+Set\+Xxx\+Callback(), and le\+\_\+arg\+\_\+\+Add\+Positional\+Parameters() functions. \index{update.\+c@{update.\+c}!le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}}
\index{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback(\+Set\+Force,""f"",""force"")}{le_arg_SetFlagCallback(SetForce,"f","force")}}]{\setlength{\rightskip}{0pt plus 5cm}le\+\_\+arg\+\_\+\+Set\+Flag\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Set\+Force}}]{, }
\item[{\char`\"{}f\char`\"{}}]{, }
\item[{\char`\"{}force\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_aa2f5e260288f4aa534c523f67d52d183}{}\label{update_8c_aa2f5e260288f4aa534c523f67d52d183}
\index{update.\+c@{update.\+c}!le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}}
\index{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback(\+Remove\+Selected,""r"",""remove"")}{le_arg_SetFlagCallback(RemoveSelected,"r","remove")}}]{\setlength{\rightskip}{0pt plus 5cm}le\+\_\+arg\+\_\+\+Set\+Flag\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Remove\+Selected}}]{, }
\item[{\char`\"{}r\char`\"{}}]{, }
\item[{\char`\"{}remove\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_a262ffef780257d12f2e0e942a496123d}{}\label{update_8c_a262ffef780257d12f2e0e942a496123d}
\index{update.\+c@{update.\+c}!le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}}
\index{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback(\+Mark\+Good,""g"",""mark-\/good"")}{le_arg_SetFlagCallback(MarkGood,"g","mark-good")}}]{\setlength{\rightskip}{0pt plus 5cm}le\+\_\+arg\+\_\+\+Set\+Flag\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Mark\+Good}}]{, }
\item[{\char`\"{}g\char`\"{}}]{, }
\item[{\char`\"{}mark-\/good\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_a89f22887e4e3cab28806d57b578eaaae}{}\label{update_8c_a89f22887e4e3cab28806d57b578eaaae}
\index{update.\+c@{update.\+c}!le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}}
\index{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback(\+Mark\+Bad,""b"",""mark-\/bad"")}{le_arg_SetFlagCallback(MarkBad,"b","mark-bad")}}]{\setlength{\rightskip}{0pt plus 5cm}le\+\_\+arg\+\_\+\+Set\+Flag\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Mark\+Bad}}]{, }
\item[{\char`\"{}b\char`\"{}}]{, }
\item[{\char`\"{}mark-\/bad\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_a126b7d01ac949a32bddef0d87b6cf876}{}\label{update_8c_a126b7d01ac949a32bddef0d87b6cf876}
\index{update.\+c@{update.\+c}!le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}}
\index{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback@{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{le\+\_\+arg\+\_\+\+Set\+Flag\+Callback(\+Start\+Deferral,""d"",""defer"")}{le_arg_SetFlagCallback(StartDeferral,"d","defer")}}]{\setlength{\rightskip}{0pt plus 5cm}le\+\_\+arg\+\_\+\+Set\+Flag\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Start\+Deferral}}]{, }
\item[{\char`\"{}d\char`\"{}}]{, }
\item[{\char`\"{}defer\char`\"{}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_8c_aefab5ca8677b04eb2a93e49a5a39e6c8}{}\label{update_8c_aefab5ca8677b04eb2a93e49a5a39e6c8}
\index{update.\+c@{update.\+c}!Mark\+Bad@{Mark\+Bad}}
\index{Mark\+Bad@{Mark\+Bad}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Mark\+Bad(void)}{MarkBad(void)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Mark\+Bad (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_aff146420886889b6ec4fbb321ca71b81}{}\label{update_8c_aff146420886889b6ec4fbb321ca71b81}
Function that gets called when --mark-\/bad or -\/b appear on the command-\/line. \index{update.\+c@{update.\+c}!Mark\+Good@{Mark\+Good}}
\index{Mark\+Good@{Mark\+Good}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Mark\+Good(void)}{MarkGood(void)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Mark\+Good (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_afd09a464c9e56744e09838b64c880624}{}\label{update_8c_afd09a464c9e56744e09838b64c880624}
Function that gets called when --mark-\/good or -\/g appear on the command-\/line. \index{update.\+c@{update.\+c}!Print\+Error\+Msg@{Print\+Error\+Msg}}
\index{Print\+Error\+Msg@{Print\+Error\+Msg}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Print\+Error\+Msg(void)}{PrintErrorMsg(void)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Print\+Error\+Msg (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_add07ea6b43f96db3af9ab1b7b1323262}{}\label{update_8c_add07ea6b43f96db3af9ab1b7b1323262}
Print message according to the error code. \index{update.\+c@{update.\+c}!Print\+Help@{Print\+Help}}
\index{Print\+Help@{Print\+Help}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Print\+Help(void)}{PrintHelp(void)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Print\+Help (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_a4636a28aa35491d27d7c67d3495be126}{}\label{update_8c_a4636a28aa35491d27d7c67d3495be126}
Prints help to stdout. \index{update.\+c@{update.\+c}!Print\+Progress\+Bar@{Print\+Progress\+Bar}}
\index{Print\+Progress\+Bar@{Print\+Progress\+Bar}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Print\+Progress\+Bar(uint percent\+Done, const char $\ast$prog\+Msg)}{PrintProgressBar(uint percentDone, const char *progMsg)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Print\+Progress\+Bar (
\begin{DoxyParamCaption}
\item[{uint}]{percent\+Done, }
\item[{const char $\ast$}]{prog\+Msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_aaf4b5ba945b098a7ce70091946da3e41}{}\label{update_8c_aaf4b5ba945b098a7ce70091946da3e41}
This function is used for printing progress bar. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em percent\+Done} & Percent done (for current state) of update task underway. \\
\hline
\mbox{\tt in}  & {\em prog\+Msg} & Message to print with progress bar \\
\hline
\end{DoxyParams}
\index{update.\+c@{update.\+c}!Remove\+App@{Remove\+App}}
\index{Remove\+App@{Remove\+App}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Remove\+App(const char $\ast$app\+Name\+Ptr)}{RemoveApp(const char *appNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Remove\+App (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{app\+Name\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_a46126abfe3d0d51f1fbaf588f956f7e8}{}\label{update_8c_a46126abfe3d0d51f1fbaf588f956f7e8}
Remove an application. 
\begin{DoxyParams}{Parameters}
{\em app\+Name\+Ptr} & The app name. \\
\hline
\end{DoxyParams}
\index{update.\+c@{update.\+c}!Remove\+Selected@{Remove\+Selected}}
\index{Remove\+Selected@{Remove\+Selected}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Remove\+Selected(void)}{RemoveSelected(void)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Remove\+Selected (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_acf60bfa3bb5fd5f04dff22be100c3716}{}\label{update_8c_acf60bfa3bb5fd5f04dff22be100c3716}
Function that gets called when --remove or -\/r appear on the command-\/line. \index{update.\+c@{update.\+c}!Set\+Force@{Set\+Force}}
\index{Set\+Force@{Set\+Force}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Set\+Force(void)}{SetForce(void)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Set\+Force (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_aa37309e9f5b1dfdc8eb5d4a4d322ae51}{}\label{update_8c_aa37309e9f5b1dfdc8eb5d4a4d322ae51}
Function that gets called when --force or -\/f appear on the command-\/line. \index{update.\+c@{update.\+c}!Start\+Deferral@{Start\+Deferral}}
\index{Start\+Deferral@{Start\+Deferral}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Start\+Deferral(void)}{StartDeferral(void)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Start\+Deferral (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_ad957c743eaa7c4e1070f151ba863552b}{}\label{update_8c_ad957c743eaa7c4e1070f151ba863552b}
Function that gets called when --defer or -\/d appear on the command-\/line. \index{update.\+c@{update.\+c}!Update@{Update}}
\index{Update@{Update}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Update(const char $\ast$file\+Path\+Ptr)}{Update(const char *filePathPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Update (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_a7e9813b02ae7292a2500d6b7fbfc43ed}{}\label{update_8c_a7e9813b02ae7292a2500d6b7fbfc43ed}
Process an update pack. 
\begin{DoxyParams}{Parameters}
{\em file\+Path\+Ptr} & The file path, or \char`\"{}-\/\char`\"{} for stdin. \\
\hline
\end{DoxyParams}
\index{update.\+c@{update.\+c}!Update\+Progress\+Handler@{Update\+Progress\+Handler}}
\index{Update\+Progress\+Handler@{Update\+Progress\+Handler}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Update\+Progress\+Handler(le\+\_\+update\+\_\+\+State\+\_\+t update\+State, uint percent\+Done, void $\ast$context\+Ptr)}{UpdateProgressHandler(le_update_State_t updateState, uint percentDone, void *contextPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Update\+Progress\+Handler (
\begin{DoxyParamCaption}
\item[{{\bf le\+\_\+update\+\_\+\+State\+\_\+t}}]{update\+State, }
\item[{uint}]{percent\+Done, }
\item[{{\bf void} $\ast$}]{context\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_a3918cb74875053e60c7ae765ec2db52e}{}\label{update_8c_a3918cb74875053e60c7ae765ec2db52e}
Callback function which is registered in update service provider(\+Update\+Daemon) to get status information for ongoing update task. 
\begin{DoxyParams}{Parameters}
{\em update\+State} & Current State of ongoing update task in Update State machine. \\
\hline
{\em percent\+Done} & Percent done for current state. As example\+: at state L\+E\+\_\+\+U\+P\+D\+A\+T\+E\+\_\+\+S\+T\+A\+T\+E\+\_\+\+U\+N\+P\+A\+C\+K\+I\+NG, percent\+Done=80 means, 80\% of the update file data is already transferred to unpack process. \\
\hline
{\em context\+Ptr} & Context pointer. \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\index{update.\+c@{update.\+c}!Arg\+Ptr@{Arg\+Ptr}}
\index{Arg\+Ptr@{Arg\+Ptr}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Arg\+Ptr}{ArgPtr}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ Arg\+Ptr = \char`\"{}-\/\char`\"{}\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_a43a14549b79620dd634cdc21daafcdbe}{}\label{update_8c_a43a14549b79620dd634cdc21daafcdbe}
Positional command-\/line argument. \index{update.\+c@{update.\+c}!C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+I\+N\+IT@{C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+I\+N\+IT}}
\index{C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+I\+N\+IT@{C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+I\+N\+IT}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+I\+N\+IT}{COMPONENT_INIT}}]{\setlength{\rightskip}{0pt plus 5cm}C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+I\+N\+IT}\hypertarget{update_8c_a0392d452f926ce36c4852de26b5eca12}{}\label{update_8c_a0392d452f926ce36c4852de26b5eca12}
{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    
    \hyperlink{update_8c_aa2f5e260288f4aa534c523f67d52d183}{le\_arg\_SetFlagCallback}(\hyperlink{update_8c_a4636a28aa35491d27d7c67d3495be126}{PrintHelp}, NULL, \textcolor{stringliteral}{"help"})
\end{DoxyCode}
\index{update.\+c@{update.\+c}!Done@{Done}}
\index{Done@{Done}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Done}{Done}}]{\setlength{\rightskip}{0pt plus 5cm}bool Done = false\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_ac3fdeca3b63101bb46822fca80eacc18}{}\label{update_8c_ac3fdeca3b63101bb46822fca80eacc18}
set to true in an option parsing callback if the option should cause the update or removal work to be skipped. \index{update.\+c@{update.\+c}!Do\+Remove@{Do\+Remove}}
\index{Do\+Remove@{Do\+Remove}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Do\+Remove}{DoRemove}}]{\setlength{\rightskip}{0pt plus 5cm}bool Do\+Remove = false\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_aa56cc9128fc84425a8d6450cf3d4e123}{}\label{update_8c_aa56cc9128fc84425a8d6450cf3d4e123}
true = -\/r or --remove was specified on the command-\/line. \index{update.\+c@{update.\+c}!Force@{Force}}
\index{Force@{Force}!update.\+c@{update.\+c}}
\subsubsection[{\texorpdfstring{Force}{Force}}]{\setlength{\rightskip}{0pt plus 5cm}bool Force = false\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{update_8c_a56bebf9e403c00c86550516e851d76bc}{}\label{update_8c_a56bebf9e403c00c86550516e851d76bc}
true = -\/f or --force was specified on the command-\/line. 