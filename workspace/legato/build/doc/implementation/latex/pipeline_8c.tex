\hypertarget{pipeline_8c}{}\section{framework/liblegato/linux/pipeline.c File Reference}
\label{pipeline_8c}\index{framework/liblegato/linux/pipeline.\+c@{framework/liblegato/linux/pipeline.\+c}}
{\ttfamily \#include \char`\"{}legato.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pipeline.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}file\+Descriptor.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct_pipeline__t}{Pipeline\+\_\+t}
\begin{DoxyCompactList}\small\item\em Pipeline class. \end{DoxyCompactList}\item 
struct \hyperlink{struct_process__t}{Process\+\_\+t}
\begin{DoxyCompactList}\small\item\em Process class. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_af66bb3e4fa7e730c8cd2eecabeef84e4}{pipeline\+\_\+\+Init} ()
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_a3a05f730961804bd75a0f04cfd53b4c9}{Delete\+Process} (\hyperlink{struct_process__t}{Process\+\_\+t} $\ast$process\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_a2c642f67fb80222ae3cefaeb29a4fc4a}{Delete\+Pipeline} (\hyperlink{struct_pipeline__t}{Pipeline\+\_\+t} $\ast$pipeline\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_acc9208132fbd7b6f21c95b2c5e41701e}{Thread\+Death\+Handler} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$pipeline)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_ac74c7c30322279f6b65be4dea7dc2e41}{Copy\+Fd} (int src, int dest)
\item 
\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} \hyperlink{pipeline_8c_a182c3868d586864efbcf6487172b2b07}{pipeline\+\_\+\+Create} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_ae15e18fdcb35f8da14531967e0706d34}{pipeline\+\_\+\+Delete} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_a93ac6d99ab9f280ed7775d80ef417930}{pipeline\+\_\+\+Append} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, \hyperlink{pipeline_8h_a53e3ab7501d0fbda2b26eef532d81522}{pipeline\+\_\+\+Process\+Func\+\_\+t} func, \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$param)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_aa0f06827e76701914e05f0680e657b99}{pipeline\+\_\+\+Set\+Input} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_ae7a6d4db607aea4887cc0d3f94735354}{pipeline\+\_\+\+Set\+Output} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd})
\item 
int \hyperlink{pipeline_8c_ab3a19ee599f8d260000a013abedcea95}{pipeline\+\_\+\+Create\+Input\+Pipe} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline)
\item 
int \hyperlink{pipeline_8c_a20070b94cc1b09129716560cd84b815a}{pipeline\+\_\+\+Create\+Output\+Pipe} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_ad9c761edaba473ad641b11881f4a5d47}{pipeline\+\_\+\+Create\+Pipe} (int $\ast$read\+Fd\+Ptr, int $\ast$write\+Fd\+Ptr)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_a00a8a845d0aeaa3620f418f59e0d123a}{Move\+Fd} (int src, int dest)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_a402d03db0992a2a91cb860dc064be022}{Fork} (\hyperlink{struct_process__t}{Process\+\_\+t} $\ast$process\+Ptr, int in\+Fd, int out\+Fd)
\item 
static int \hyperlink{pipeline_8c_aeaf912b20f4f8616616609731a48f3d8}{Open\+Dev\+Null} (int flags)
\item 
static \hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{pipeline_8c_a0ba40a7eb8217bb778adcef2006dc393}{Handle\+Dead\+Child} (\hyperlink{struct_pipeline__t}{Pipeline\+\_\+t} $\ast$pipeline\+Ptr, \hyperlink{struct_process__t}{Process\+\_\+t} $\ast$process\+Ptr, int status)
\item 
static \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_acc066a6e78e1916d2bbcd15cad8731e6}{Signal\+Event\+Handler} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$unused)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_aed5a5f3ba88d66bb542744eb56eb7eda}{pipeline\+\_\+\+Start} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, \hyperlink{pipeline_8h_a768a6dc8deffe73dcd6a7a30696a23e9}{pipeline\+\_\+\+Termination\+Handler\+\_\+t} callback)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8c_affc4272b72a3a41b34ab69fd30a36a70}{pipeline\+\_\+\+Check\+Children} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{le__event_loop_8h_ae6e351b38bc95954f159d16d19d2d55c}{le\+\_\+event\+\_\+\+Id\+\_\+t} \hyperlink{pipeline_8c_a6a932aba6b8928daeb663f770ec89fa0}{Signal\+Event\+Id}
\begin{DoxyCompactList}\small\item\em Event ID for triggering reaping of dead child processes when S\+I\+G\+C\+H\+LD signals are received. \end{DoxyCompactList}\item 
static \hyperlink{le__mem_8h_a44a896f6a0a1a8c733e8038eb332989e}{le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} \hyperlink{pipeline_8c_acd60e170c9a8c36b309a65ab7f159408}{Pipeline\+Pool}
\begin{DoxyCompactList}\small\item\em Pipeline memory pool. \end{DoxyCompactList}\item 
static \hyperlink{le__mem_8h_a44a896f6a0a1a8c733e8038eb332989e}{le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} \hyperlink{pipeline_8c_a62899d3b636dd960175da1f98ee110b0}{Process\+Pool}
\begin{DoxyCompactList}\small\item\em Process memory pool. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Implementation of the pipeline A\+PI.

There are two classes of objects\+:
\begin{DoxyItemize}
\item Pipeline
\item Process
\end{DoxyItemize}

Each is allocated from its own pool.

Pipelines are kept on a global list of pipelines.

Processes are kept on a Pipeline\textquotesingle{}s list of processes.

Thread destructors are used to clean up everything if the client thread dies without deleting pipelines first.

Pub-\/sub event reporting is used to trigger reaping of child processes. \hyperlink{pipeline_8c_affc4272b72a3a41b34ab69fd30a36a70}{pipeline\+\_\+\+Check\+Children()} reports the event, and each pipeline registers a handler when it starts. This ensures that all callbacks from pipelines happen under the correct thread. It also ensures that all data structure access is single-\/threaded.





Copyright (C) Sierra Wireless Inc. 

\subsection{Function Documentation}
\index{pipeline.\+c@{pipeline.\+c}!Copy\+Fd@{Copy\+Fd}}
\index{Copy\+Fd@{Copy\+Fd}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Copy\+Fd(int src, int dest)}{CopyFd(int src, int dest)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Copy\+Fd (
\begin{DoxyParamCaption}
\item[{int}]{src, }
\item[{int}]{dest}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_ac74c7c30322279f6b65be4dea7dc2e41}{}\label{pipeline_8c_ac74c7c30322279f6b65be4dea7dc2e41}
Copies one open file descriptor to another specific file descriptor number. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em src} & Source file descriptor. \\
\hline
\mbox{\tt in}  & {\em dest} & Destination file descriptor. \\
\hline
\end{DoxyParams}
\index{pipeline.\+c@{pipeline.\+c}!Delete\+Pipeline@{Delete\+Pipeline}}
\index{Delete\+Pipeline@{Delete\+Pipeline}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Delete\+Pipeline(\+Pipeline\+\_\+t $\ast$pipeline\+Ptr)}{DeletePipeline(Pipeline_t *pipelinePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Delete\+Pipeline (
\begin{DoxyParamCaption}
\item[{{\bf Pipeline\+\_\+t} $\ast$}]{pipeline\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_a2c642f67fb80222ae3cefaeb29a4fc4a}{}\label{pipeline_8c_a2c642f67fb80222ae3cefaeb29a4fc4a}
Delete a pipeline object. Assumes the thread destructor has already been deleted. \index{pipeline.\+c@{pipeline.\+c}!Delete\+Process@{Delete\+Process}}
\index{Delete\+Process@{Delete\+Process}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Delete\+Process(\+Process\+\_\+t $\ast$process\+Ptr)}{DeleteProcess(Process_t *processPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Delete\+Process (
\begin{DoxyParamCaption}
\item[{{\bf Process\+\_\+t} $\ast$}]{process\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_a3a05f730961804bd75a0f04cfd53b4c9}{}\label{pipeline_8c_a3a05f730961804bd75a0f04cfd53b4c9}
Delete a process object.

\begin{DoxyWarning}{Warning}
Assumes it has been removed from the Pipeline\textquotesingle{}s process list. 
\end{DoxyWarning}
\index{pipeline.\+c@{pipeline.\+c}!Fork@{Fork}}
\index{Fork@{Fork}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Fork(\+Process\+\_\+t $\ast$process\+Ptr, int in\+Fd, int out\+Fd)}{Fork(Process_t *processPtr, int inFd, int outFd)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Fork (
\begin{DoxyParamCaption}
\item[{{\bf Process\+\_\+t} $\ast$}]{process\+Ptr, }
\item[{int}]{in\+Fd, }
\item[{int}]{out\+Fd}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_a402d03db0992a2a91cb860dc064be022}{}\label{pipeline_8c_a402d03db0992a2a91cb860dc064be022}
Fork a child process.

In the child, sets up stdin and stdout, and calls the process function. Will not return in the child process.

In the parent process, stores the child\textquotesingle{}s process ID (pid) in the Process object and returns. \index{pipeline.\+c@{pipeline.\+c}!Handle\+Dead\+Child@{Handle\+Dead\+Child}}
\index{Handle\+Dead\+Child@{Handle\+Dead\+Child}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Handle\+Dead\+Child(\+Pipeline\+\_\+t $\ast$pipeline\+Ptr, Process\+\_\+t $\ast$process\+Ptr, int status)}{HandleDeadChild(Pipeline_t *pipelinePtr, Process_t *processPtr, int status)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf le\+\_\+result\+\_\+t} Handle\+Dead\+Child (
\begin{DoxyParamCaption}
\item[{{\bf Pipeline\+\_\+t} $\ast$}]{pipeline\+Ptr, }
\item[{{\bf Process\+\_\+t} $\ast$}]{process\+Ptr, }
\item[{int}]{status}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_a0ba40a7eb8217bb778adcef2006dc393}{}\label{pipeline_8c_a0ba40a7eb8217bb778adcef2006dc393}
Handle the death of a child process in a pipeline.

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item L\+E\+\_\+\+OK if it is safe to continue using the pipeline.
\item L\+E\+\_\+\+T\+E\+R\+M\+I\+N\+A\+T\+ED if the pipeline has terminated and should not be accessed again. 
\end{DoxyItemize}
\end{DoxyReturn}
\index{pipeline.\+c@{pipeline.\+c}!Move\+Fd@{Move\+Fd}}
\index{Move\+Fd@{Move\+Fd}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Move\+Fd(int src, int dest)}{MoveFd(int src, int dest)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Move\+Fd (
\begin{DoxyParamCaption}
\item[{int}]{src, }
\item[{int}]{dest}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_a00a8a845d0aeaa3620f418f59e0d123a}{}\label{pipeline_8c_a00a8a845d0aeaa3620f418f59e0d123a}
Move a file descriptor to a specific fd number. Does nothing if src and dest are the same. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em src} & Source file descriptor (will be closed, unless dest is the same). \\
\hline
\mbox{\tt in}  & {\em dest} & Destination file descriptor. \\
\hline
\end{DoxyParams}
\index{pipeline.\+c@{pipeline.\+c}!Open\+Dev\+Null@{Open\+Dev\+Null}}
\index{Open\+Dev\+Null@{Open\+Dev\+Null}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Open\+Dev\+Null(int flags)}{OpenDevNull(int flags)}}]{\setlength{\rightskip}{0pt plus 5cm}static int Open\+Dev\+Null (
\begin{DoxyParamCaption}
\item[{int}]{flags}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_aeaf912b20f4f8616616609731a48f3d8}{}\label{pipeline_8c_aeaf912b20f4f8616616609731a48f3d8}
Open /dev/null.

\begin{DoxyReturn}{Returns}
fd 
\end{DoxyReturn}
\index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Append@{pipeline\+\_\+\+Append}}
\index{pipeline\+\_\+\+Append@{pipeline\+\_\+\+Append}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Append(pipeline\+\_\+\+Ref\+\_\+t pipeline, pipeline\+\_\+\+Process\+Func\+\_\+t func, void $\ast$param)}{pipeline_Append(pipeline_Ref_t pipeline, pipeline_ProcessFunc_t func, void *param)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Append (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline, }
\item[{{\bf pipeline\+\_\+\+Process\+Func\+\_\+t}}]{func, }
\item[{{\bf void} $\ast$}]{param}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_a93ac6d99ab9f280ed7775d80ef417930}{}\label{pipeline_8c_a93ac6d99ab9f280ed7775d80ef417930}
Adds a process to the end of the pipeline.

\begin{DoxyWarning}{Warning}
Be sure that param is not a pointer to something that will get deallocated before the process starts. 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em func} & Function to be called in the child process. \\
\hline
{\em param} & Parameter to pass to the func when it is called. \\
\hline
\end{DoxyParams}
\index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Check\+Children@{pipeline\+\_\+\+Check\+Children}}
\index{pipeline\+\_\+\+Check\+Children@{pipeline\+\_\+\+Check\+Children}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Check\+Children(void)}{pipeline_CheckChildren(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Check\+Children (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_affc4272b72a3a41b34ab69fd30a36a70}{}\label{pipeline_8c_affc4272b72a3a41b34ab69fd30a36a70}
Check all pipelines started by threads in this process for the death of any of its children.

If it finds one or more have died, then it will reap them and report results through completion callbacks.

This does nothing if there are no pipelines running.

\begin{DoxyNote}{Note}
It\textquotesingle{}s up to the caller to get the S\+I\+G\+C\+H\+LD notification somehow (it is recommended to use the \hyperlink{c_signals}{Signals A\+PI}).
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
We don\textquotesingle{}t know what thread is calling this function. 
\end{DoxyWarning}
\index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Create@{pipeline\+\_\+\+Create}}
\index{pipeline\+\_\+\+Create@{pipeline\+\_\+\+Create}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Create(void)}{pipeline_Create(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pipeline\+\_\+\+Ref\+\_\+t} pipeline\+\_\+\+Create (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_a182c3868d586864efbcf6487172b2b07}{}\label{pipeline_8c_a182c3868d586864efbcf6487172b2b07}
Create a new pipeline. \index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Create\+Input\+Pipe@{pipeline\+\_\+\+Create\+Input\+Pipe}}
\index{pipeline\+\_\+\+Create\+Input\+Pipe@{pipeline\+\_\+\+Create\+Input\+Pipe}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Create\+Input\+Pipe(pipeline\+\_\+\+Ref\+\_\+t pipeline)}{pipeline_CreateInputPipe(pipeline_Ref_t pipeline)}}]{\setlength{\rightskip}{0pt plus 5cm}int pipeline\+\_\+\+Create\+Input\+Pipe (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_ab3a19ee599f8d260000a013abedcea95}{}\label{pipeline_8c_ab3a19ee599f8d260000a013abedcea95}
Creates a pipe for the first process in the pipeline to read from and returns the write end of the pipe.

\begin{DoxyReturn}{Returns}
The file descriptor of the write end of the pipe.
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
Remember to close the write end of the pipe when you are done. The read end will be closed automatically. 
\end{DoxyWarning}
\index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Create\+Output\+Pipe@{pipeline\+\_\+\+Create\+Output\+Pipe}}
\index{pipeline\+\_\+\+Create\+Output\+Pipe@{pipeline\+\_\+\+Create\+Output\+Pipe}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Create\+Output\+Pipe(pipeline\+\_\+\+Ref\+\_\+t pipeline)}{pipeline_CreateOutputPipe(pipeline_Ref_t pipeline)}}]{\setlength{\rightskip}{0pt plus 5cm}int pipeline\+\_\+\+Create\+Output\+Pipe (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_a20070b94cc1b09129716560cd84b815a}{}\label{pipeline_8c_a20070b94cc1b09129716560cd84b815a}
Creates a pipe for the last process in the pipeline to write into and returns the read end of the pipe.

\begin{DoxyReturn}{Returns}
The file descriptor of the read end of the pipe.
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
Remember to close the read end of the pipe when you are done. The write end will be closed automatically. 
\end{DoxyWarning}
\index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Create\+Pipe@{pipeline\+\_\+\+Create\+Pipe}}
\index{pipeline\+\_\+\+Create\+Pipe@{pipeline\+\_\+\+Create\+Pipe}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Create\+Pipe(int $\ast$read\+Fd\+Ptr, int $\ast$write\+Fd\+Ptr)}{pipeline_CreatePipe(int *readFdPtr, int *writeFdPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Create\+Pipe (
\begin{DoxyParamCaption}
\item[{int $\ast$}]{read\+Fd\+Ptr, }
\item[{int $\ast$}]{write\+Fd\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_ad9c761edaba473ad641b11881f4a5d47}{}\label{pipeline_8c_ad9c761edaba473ad641b11881f4a5d47}
Create a pipe. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em read\+Fd\+Ptr} & Ptr to where the fd for the read end of the pipe will be put. \\
\hline
\mbox{\tt out}  & {\em write\+Fd\+Ptr} & Ptr to where the fd for the write end of the pipe will be put. \\
\hline
\end{DoxyParams}
\index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Delete@{pipeline\+\_\+\+Delete}}
\index{pipeline\+\_\+\+Delete@{pipeline\+\_\+\+Delete}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Delete(pipeline\+\_\+\+Ref\+\_\+t pipeline)}{pipeline_Delete(pipeline_Ref_t pipeline)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Delete (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_ae15e18fdcb35f8da14531967e0706d34}{}\label{pipeline_8c_ae15e18fdcb35f8da14531967e0706d34}
Delete a pipeline.

If the processes are still running, force kills them (using S\+I\+G\+K\+I\+LL).

Any data left in pipes will be lost. \index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Init@{pipeline\+\_\+\+Init}}
\index{pipeline\+\_\+\+Init@{pipeline\+\_\+\+Init}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Init()}{pipeline_Init()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_af66bb3e4fa7e730c8cd2eecabeef84e4}{}\label{pipeline_8c_af66bb3e4fa7e730c8cd2eecabeef84e4}
Initialize the pipeline module.

This should be called by liblegato\textquotesingle{}s \hyperlink{init_8c}{init.\+c} module at start-\/up. \index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Set\+Input@{pipeline\+\_\+\+Set\+Input}}
\index{pipeline\+\_\+\+Set\+Input@{pipeline\+\_\+\+Set\+Input}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Set\+Input(pipeline\+\_\+\+Ref\+\_\+t pipeline, int fd)}{pipeline_SetInput(pipeline_Ref_t pipeline, int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Set\+Input (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_aa0f06827e76701914e05f0680e657b99}{}\label{pipeline_8c_aa0f06827e76701914e05f0680e657b99}
Provides a file descriptor for the pipeline to read its input from. \index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Set\+Output@{pipeline\+\_\+\+Set\+Output}}
\index{pipeline\+\_\+\+Set\+Output@{pipeline\+\_\+\+Set\+Output}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Set\+Output(pipeline\+\_\+\+Ref\+\_\+t pipeline, int fd)}{pipeline_SetOutput(pipeline_Ref_t pipeline, int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Set\+Output (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_ae7a6d4db607aea4887cc0d3f94735354}{}\label{pipeline_8c_ae7a6d4db607aea4887cc0d3f94735354}
Provides a file descriptor for the pipeline to write its output to. \index{pipeline.\+c@{pipeline.\+c}!pipeline\+\_\+\+Start@{pipeline\+\_\+\+Start}}
\index{pipeline\+\_\+\+Start@{pipeline\+\_\+\+Start}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Start(pipeline\+\_\+\+Ref\+\_\+t pipeline, pipeline\+\_\+\+Termination\+Handler\+\_\+t callback)}{pipeline_Start(pipeline_Ref_t pipeline, pipeline_TerminationHandler_t callback)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Start (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline, }
\item[{{\bf pipeline\+\_\+\+Termination\+Handler\+\_\+t}}]{callback}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8c_aed5a5f3ba88d66bb542744eb56eb7eda}{}\label{pipeline_8c_aed5a5f3ba88d66bb542744eb56eb7eda}
Executes the processes in the pipeline. A completion callback function is provided, which will be called when the pipeline terminates. \index{pipeline.\+c@{pipeline.\+c}!Signal\+Event\+Handler@{Signal\+Event\+Handler}}
\index{Signal\+Event\+Handler@{Signal\+Event\+Handler}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Signal\+Event\+Handler(void $\ast$unused)}{SignalEventHandler(void *unused)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Signal\+Event\+Handler (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{unused}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_acc066a6e78e1916d2bbcd15cad8731e6}{}\label{pipeline_8c_acc066a6e78e1916d2bbcd15cad8731e6}
Function that gets called for each pipeline that has running processes when a signal event is reported. \index{pipeline.\+c@{pipeline.\+c}!Thread\+Death\+Handler@{Thread\+Death\+Handler}}
\index{Thread\+Death\+Handler@{Thread\+Death\+Handler}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Thread\+Death\+Handler(void $\ast$pipeline)}{ThreadDeathHandler(void *pipeline)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf void} Thread\+Death\+Handler (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{pipeline}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_acc9208132fbd7b6f21c95b2c5e41701e}{}\label{pipeline_8c_acc9208132fbd7b6f21c95b2c5e41701e}
Function called for each pipeline if the thread is dying. Deletes the pipeline. 

\subsection{Variable Documentation}
\index{pipeline.\+c@{pipeline.\+c}!Pipeline\+Pool@{Pipeline\+Pool}}
\index{Pipeline\+Pool@{Pipeline\+Pool}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Pipeline\+Pool}{PipelinePool}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} Pipeline\+Pool\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_acd60e170c9a8c36b309a65ab7f159408}{}\label{pipeline_8c_acd60e170c9a8c36b309a65ab7f159408}


Pipeline memory pool. 

\index{pipeline.\+c@{pipeline.\+c}!Process\+Pool@{Process\+Pool}}
\index{Process\+Pool@{Process\+Pool}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Process\+Pool}{ProcessPool}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} Process\+Pool\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_a62899d3b636dd960175da1f98ee110b0}{}\label{pipeline_8c_a62899d3b636dd960175da1f98ee110b0}


Process memory pool. 

\index{pipeline.\+c@{pipeline.\+c}!Signal\+Event\+Id@{Signal\+Event\+Id}}
\index{Signal\+Event\+Id@{Signal\+Event\+Id}!pipeline.\+c@{pipeline.\+c}}
\subsubsection[{\texorpdfstring{Signal\+Event\+Id}{SignalEventId}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+event\+\_\+\+Id\+\_\+t} Signal\+Event\+Id\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{pipeline_8c_a6a932aba6b8928daeb663f770ec89fa0}{}\label{pipeline_8c_a6a932aba6b8928daeb663f770ec89fa0}


Event ID for triggering reaping of dead child processes when S\+I\+G\+C\+H\+LD signals are received. 

