\hypertarget{pipeline_8h}{}\section{framework/liblegato/linux/pipeline.h File Reference}
\label{pipeline_8h}\index{framework/liblegato/linux/pipeline.\+h@{framework/liblegato/linux/pipeline.\+h}}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct pipeline $\ast$ \hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t}
\item 
typedef int($\ast$ \hyperlink{pipeline_8h_a53e3ab7501d0fbda2b26eef532d81522}{pipeline\+\_\+\+Process\+Func\+\_\+t}) (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$param)
\item 
typedef \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void}($\ast$ \hyperlink{pipeline_8h_a768a6dc8deffe73dcd6a7a30696a23e9}{pipeline\+\_\+\+Termination\+Handler\+\_\+t}) (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, int status)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} \hyperlink{pipeline_8h_a182c3868d586864efbcf6487172b2b07}{pipeline\+\_\+\+Create} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8h_ae15e18fdcb35f8da14531967e0706d34}{pipeline\+\_\+\+Delete} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8h_a93ac6d99ab9f280ed7775d80ef417930}{pipeline\+\_\+\+Append} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, \hyperlink{pipeline_8h_a53e3ab7501d0fbda2b26eef532d81522}{pipeline\+\_\+\+Process\+Func\+\_\+t} func, \hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} $\ast$param)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8h_aa0f06827e76701914e05f0680e657b99}{pipeline\+\_\+\+Set\+Input} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8h_ae7a6d4db607aea4887cc0d3f94735354}{pipeline\+\_\+\+Set\+Output} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, int \hyperlink{app_stop_client_8c_a44f21d5190b5a6df8089f54799628d7e}{fd})
\item 
int \hyperlink{pipeline_8h_ab3a19ee599f8d260000a013abedcea95}{pipeline\+\_\+\+Create\+Input\+Pipe} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline)
\item 
int \hyperlink{pipeline_8h_a20070b94cc1b09129716560cd84b815a}{pipeline\+\_\+\+Create\+Output\+Pipe} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8h_ad9c761edaba473ad641b11881f4a5d47}{pipeline\+\_\+\+Create\+Pipe} (int $\ast$read\+Fd\+Ptr, int $\ast$write\+Fd\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8h_aed5a5f3ba88d66bb542744eb56eb7eda}{pipeline\+\_\+\+Start} (\hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\+\_\+\+Ref\+\_\+t} pipeline, \hyperlink{pipeline_8h_a768a6dc8deffe73dcd6a7a30696a23e9}{pipeline\+\_\+\+Termination\+Handler\+\_\+t} callback)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8h_affc4272b72a3a41b34ab69fd30a36a70}{pipeline\+\_\+\+Check\+Children} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{pipeline_8h_af66bb3e4fa7e730c8cd2eecabeef84e4}{pipeline\+\_\+\+Init} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A\+PI for creating pipes and pipelines of processes.

The following code creates a pipeline \char`\"{}$<$c$>$cat foo $\vert$ md5sum$<$/c$>$\char`\"{} where the {\ttfamily tar} process reads its data from the parent process\textquotesingle{}s standard input and the output from the {\ttfamily md5sum} process is delivered to an FD Monitor handler function called Pipe\+Output\+Handler() as it arrives.

To make the completion callback work, the caller must monitor for S\+I\+G\+C\+H\+LD signals and call \hyperlink{pipeline_8h_affc4272b72a3a41b34ab69fd30a36a70}{pipeline\+\_\+\+Check\+Children()} when it arrives.


\begin{DoxyCode}
\textcolor{keyword}{static} \textcolor{keywordtype}{void} ChildSignalHandler(\textcolor{keywordtype}{int} sigNum)
\{
    \hyperlink{pipeline_8c_affc4272b72a3a41b34ab69fd30a36a70}{pipeline\_CheckChildren}();
\}

\textcolor{keyword}{static} \textcolor{keywordtype}{void} CatProcess(\textcolor{keywordtype}{void}* param)
\{
    \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filePath = param;

    execl(\textcolor{stringliteral}{"cat"}, filePath, (\textcolor{keywordtype}{char}*)NULL);
\}

\textcolor{keyword}{static} \textcolor{keywordtype}{void} Md5SumProcess(\textcolor{keywordtype}{void})
\{
    execl(\textcolor{stringliteral}{"md5sum"}, \textcolor{stringliteral}{"md5sum"}, (\textcolor{keywordtype}{char}*)NULL);
\}

\textcolor{keyword}{static} \textcolor{keywordtype}{void} CompletionCallback
(
    \hyperlink{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{pipeline\_Ref\_t} pipeline,
    \textcolor{keywordtype}{int} result \textcolor{comment}{// Exit status of the last process in the pipeline (see 'man waitpid').}
)
\{
    \textcolor{keywordflow}{if} (WIFEXITED(result) && WEXITSTATUS(EXIT\_SUCCESS))
    \{
        \textcolor{comment}{// Hooray!}
    \}
    \textcolor{keywordflow}{else}
    \{
        \textcolor{comment}{// Boo!  Killed by a signal or exited with non-zero exit code.}
    \}
    \hyperlink{pipeline_8c_ae15e18fdcb35f8da14531967e0706d34}{pipeline\_Delete}(pipeline);
\}

\textcolor{keyword}{static} \textcolor{keywordtype}{void} RunPipeline()
\{
    pipeline\_PipelineRef\_t pipeline = \hyperlink{pipeline_8c_a182c3868d586864efbcf6487172b2b07}{pipeline\_Create}();

    \hyperlink{pipeline_8c_a93ac6d99ab9f280ed7775d80ef417930}{pipeline\_Append}(pipeline, CatProcess, \textcolor{stringliteral}{"foo"});

    \hyperlink{pipeline_8c_a93ac6d99ab9f280ed7775d80ef417930}{pipeline\_Append}(pipeline, Md5SumProcess, NULL);

    \hyperlink{pipeline_8c_aa0f06827e76701914e05f0680e657b99}{pipeline\_SetInput}(pipeline, STDIN\_FILENO);

    fdMonitor\_Create(\textcolor{stringliteral}{"my pipeline"}, \hyperlink{pipeline_8c_a20070b94cc1b09129716560cd84b815a}{pipeline\_CreateOutputPipe}(pipeline), 
      PipeOutputHandler, POLLIN);

    \hyperlink{pipeline_8c_aed5a5f3ba88d66bb542744eb56eb7eda}{pipeline\_Start}(pipeline, CompletionCallback);
\}

\hyperlink{le__event_loop_8h_abdb9187a56836a93d19cc793cbd4b7ec}{COMPONENT\_INIT}
\{
    \hyperlink{supervisor_8c_afa9069e7bbdeed2332b5cbffbb472691}{le\_sig\_Block}(SIGCHLD);
    \hyperlink{supervisor_8c_a2eb645189be654e43dfeb29c95143ed8}{le\_sig\_SetEventHandler}(SIGCHLD, ChildSignalHandler);

    RunPipeline();
\}
\end{DoxyCode}






Summary of available functions in this A\+PI\+:


\begin{DoxyItemize}
\item \hyperlink{pipeline_8h_a182c3868d586864efbcf6487172b2b07}{pipeline\+\_\+\+Create()} creates a new pipeline.
\item \hyperlink{pipeline_8h_ae15e18fdcb35f8da14531967e0706d34}{pipeline\+\_\+\+Delete()} deletes a pipeline. Kills all remaining processes in the pipeline.
\item \hyperlink{pipeline_8h_a93ac6d99ab9f280ed7775d80ef417930}{pipeline\+\_\+\+Append()} adds a process to the end of the pipeline.
\item \hyperlink{pipeline_8h_aa0f06827e76701914e05f0680e657b99}{pipeline\+\_\+\+Set\+Input()} provides a file descriptor for the pipeline to read its input from.
\item \hyperlink{pipeline_8h_ab3a19ee599f8d260000a013abedcea95}{pipeline\+\_\+\+Create\+Input\+Pipe()} creates a pipe to be connected to the input of the first process in the pipeline. Returns the write end for the caller to use to write data into the pipe.
\item \hyperlink{pipeline_8h_ae7a6d4db607aea4887cc0d3f94735354}{pipeline\+\_\+\+Set\+Output()} provides a file descriptor for the pipeline to write its output to.
\item \hyperlink{pipeline_8h_a20070b94cc1b09129716560cd84b815a}{pipeline\+\_\+\+Create\+Output\+Pipe()} creates a pipe to be connected to the output of the last process in the pipeline. Returns the read end for the caller to use to read data from the pipe.
\item \hyperlink{pipeline_8h_ad9c761edaba473ad641b11881f4a5d47}{pipeline\+\_\+\+Create\+Pipe()} can be used to create a pipe. It\textquotesingle{}s a simple wrapper around pipe().
\item \hyperlink{pipeline_8h_aed5a5f3ba88d66bb542744eb56eb7eda}{pipeline\+\_\+\+Start()} executes the processes in the pipeline. A completion callback function is provided, which will be called when the pipeline terminates.
\item \hyperlink{pipeline_8h_affc4272b72a3a41b34ab69fd30a36a70}{pipeline\+\_\+\+Check\+Children()} must be called to tell the pipeline to check for the death of any of its children. This should be done in response to a S\+I\+G\+C\+H\+LD signal. It is recommended to use the \hyperlink{c_signals}{Signals A\+PI} to detect S\+I\+G\+C\+H\+LD signals. DO N\+OT call any of this A\+PI\textquotesingle{}s functions from inside an asynchronous signal handler. This A\+PI is N\+OT async safe.
\end{DoxyItemize}

{\bfseries Future Enhancements\+:}


\begin{DoxyItemize}
\item pipeline\+\_\+\+Set\+Timeout()
\item pipeline\+\_\+\+Set/\+Get\+Context\+Ptr()
\item pipeline\+\_\+\+Signal() -\/ Send a signal to all processes in the pipeline.
\item pipeline\+\_\+\+Prepend()
\end{DoxyItemize}





Copyright (C) Sierra Wireless Inc. 

\subsection{Typedef Documentation}
\index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Process\+Func\+\_\+t@{pipeline\+\_\+\+Process\+Func\+\_\+t}}
\index{pipeline\+\_\+\+Process\+Func\+\_\+t@{pipeline\+\_\+\+Process\+Func\+\_\+t}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Process\+Func\+\_\+t}{pipeline_ProcessFunc_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef int($\ast$ pipeline\+\_\+\+Process\+Func\+\_\+t) ({\bf void} $\ast$param)}\hypertarget{pipeline_8h_a53e3ab7501d0fbda2b26eef532d81522}{}\label{pipeline_8h_a53e3ab7501d0fbda2b26eef532d81522}
Process functions look like this. These are the functions that run in the child process. They can do whatever is needed in that process, e.\+g., setuid(), setgid(), execl(), or just do something and exit.

Standard input and standard output will be properly set up for the pipeline before this function is called.

If the function returns, the process will exit.


\begin{DoxyParams}{Parameters}
{\em Parameter} & passed to \hyperlink{pipeline_8h_a93ac6d99ab9f280ed7775d80ef417930}{pipeline\+\_\+\+Append()} for this process.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Exit code for the process.
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
The Legato app framework is not fully fork-\/safe yet, so it is recommended that the process exec a program, unless it just has something trivial to do using P\+O\+S\+IX A\+P\+Is. 
\end{DoxyWarning}
\index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Ref\+\_\+t@{pipeline\+\_\+\+Ref\+\_\+t}}
\index{pipeline\+\_\+\+Ref\+\_\+t@{pipeline\+\_\+\+Ref\+\_\+t}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Ref\+\_\+t}{pipeline_Ref_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct pipeline$\ast$ {\bf pipeline\+\_\+\+Ref\+\_\+t}}\hypertarget{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}{}\label{pipeline_8h_adfb885380a9b0f550fafe4de0a2d2564}
Reference to a pipeline. \index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Termination\+Handler\+\_\+t@{pipeline\+\_\+\+Termination\+Handler\+\_\+t}}
\index{pipeline\+\_\+\+Termination\+Handler\+\_\+t@{pipeline\+\_\+\+Termination\+Handler\+\_\+t}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Termination\+Handler\+\_\+t}{pipeline_TerminationHandler_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf void}($\ast$ pipeline\+\_\+\+Termination\+Handler\+\_\+t) ({\bf pipeline\+\_\+\+Ref\+\_\+t} pipeline, int status)}\hypertarget{pipeline_8h_a768a6dc8deffe73dcd6a7a30696a23e9}{}\label{pipeline_8h_a768a6dc8deffe73dcd6a7a30696a23e9}
Pipeline termination handler functions must look like this.


\begin{DoxyParams}{Parameters}
{\em pipeline} & Reference to the pipeline that terminated.\\
\hline
{\em status} & Status code from the last process in the pipeline. Must be processed using W\+I\+F\+E\+X\+I\+T\+E\+D(), W\+E\+X\+I\+T\+S\+T\+A\+T\+U\+S(), W\+I\+F\+S\+I\+G\+N\+A\+L\+E\+D(), W\+T\+E\+R\+M\+S\+I\+G(), etc. See \textquotesingle{}man waitpid\textquotesingle{}. \\
\hline
\end{DoxyParams}


\subsection{Function Documentation}
\index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Append@{pipeline\+\_\+\+Append}}
\index{pipeline\+\_\+\+Append@{pipeline\+\_\+\+Append}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Append(pipeline\+\_\+\+Ref\+\_\+t pipeline, pipeline\+\_\+\+Process\+Func\+\_\+t func, void $\ast$param)}{pipeline_Append(pipeline_Ref_t pipeline, pipeline_ProcessFunc_t func, void *param)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Append (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline, }
\item[{{\bf pipeline\+\_\+\+Process\+Func\+\_\+t}}]{func, }
\item[{{\bf void} $\ast$}]{param}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_a93ac6d99ab9f280ed7775d80ef417930}{}\label{pipeline_8h_a93ac6d99ab9f280ed7775d80ef417930}
Adds a process to the end of the pipeline.

\begin{DoxyWarning}{Warning}
Be sure that param is not a pointer to something that will get deallocated before the process starts. 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em func} & Function to be called in the child process. \\
\hline
{\em param} & Parameter to pass to the func when it is called. \\
\hline
\end{DoxyParams}
\index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Check\+Children@{pipeline\+\_\+\+Check\+Children}}
\index{pipeline\+\_\+\+Check\+Children@{pipeline\+\_\+\+Check\+Children}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Check\+Children(void)}{pipeline_CheckChildren(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Check\+Children (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_affc4272b72a3a41b34ab69fd30a36a70}{}\label{pipeline_8h_affc4272b72a3a41b34ab69fd30a36a70}
Check all pipelines started by threads in this process for the death of any of its children.

If it finds one or more have died, then it will reap them and report results through completion callbacks.

This does nothing if there are no pipelines running.

\begin{DoxyNote}{Note}
It\textquotesingle{}s up to the caller to get the S\+I\+G\+C\+H\+LD notification somehow (it is recommended to use the \hyperlink{c_signals}{Signals A\+PI}).
\end{DoxyNote}
Check all pipelines started by threads in this process for the death of any of its children.

If it finds one or more have died, then it will reap them and report results through completion callbacks.

This does nothing if there are no pipelines running.

\begin{DoxyNote}{Note}
It\textquotesingle{}s up to the caller to get the S\+I\+G\+C\+H\+LD notification somehow (it is recommended to use the \hyperlink{c_signals}{Signals A\+PI}).
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
We don\textquotesingle{}t know what thread is calling this function. 
\end{DoxyWarning}
\index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Create@{pipeline\+\_\+\+Create}}
\index{pipeline\+\_\+\+Create@{pipeline\+\_\+\+Create}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Create(void)}{pipeline_Create(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pipeline\+\_\+\+Ref\+\_\+t} pipeline\+\_\+\+Create (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_a182c3868d586864efbcf6487172b2b07}{}\label{pipeline_8h_a182c3868d586864efbcf6487172b2b07}
Create a new pipeline. \index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Create\+Input\+Pipe@{pipeline\+\_\+\+Create\+Input\+Pipe}}
\index{pipeline\+\_\+\+Create\+Input\+Pipe@{pipeline\+\_\+\+Create\+Input\+Pipe}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Create\+Input\+Pipe(pipeline\+\_\+\+Ref\+\_\+t pipeline)}{pipeline_CreateInputPipe(pipeline_Ref_t pipeline)}}]{\setlength{\rightskip}{0pt plus 5cm}int pipeline\+\_\+\+Create\+Input\+Pipe (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_ab3a19ee599f8d260000a013abedcea95}{}\label{pipeline_8h_ab3a19ee599f8d260000a013abedcea95}
Creates a pipe for the first process in the pipeline to read from and returns the write end of the pipe.

\begin{DoxyReturn}{Returns}
The file descriptor of the write end of the pipe.
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
Remember to close the write end of the pipe when you are done. The read end will be closed automatically. 
\end{DoxyWarning}
\index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Create\+Output\+Pipe@{pipeline\+\_\+\+Create\+Output\+Pipe}}
\index{pipeline\+\_\+\+Create\+Output\+Pipe@{pipeline\+\_\+\+Create\+Output\+Pipe}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Create\+Output\+Pipe(pipeline\+\_\+\+Ref\+\_\+t pipeline)}{pipeline_CreateOutputPipe(pipeline_Ref_t pipeline)}}]{\setlength{\rightskip}{0pt plus 5cm}int pipeline\+\_\+\+Create\+Output\+Pipe (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_a20070b94cc1b09129716560cd84b815a}{}\label{pipeline_8h_a20070b94cc1b09129716560cd84b815a}
Creates a pipe for the last process in the pipeline to write into and returns the read end of the pipe.

\begin{DoxyReturn}{Returns}
The file descriptor of the read end of the pipe.
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
Remember to close the read end of the pipe when you are done. The write end will be closed automatically. 
\end{DoxyWarning}
\index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Create\+Pipe@{pipeline\+\_\+\+Create\+Pipe}}
\index{pipeline\+\_\+\+Create\+Pipe@{pipeline\+\_\+\+Create\+Pipe}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Create\+Pipe(int $\ast$read\+Fd\+Ptr, int $\ast$write\+Fd\+Ptr)}{pipeline_CreatePipe(int *readFdPtr, int *writeFdPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Create\+Pipe (
\begin{DoxyParamCaption}
\item[{int $\ast$}]{read\+Fd\+Ptr, }
\item[{int $\ast$}]{write\+Fd\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_ad9c761edaba473ad641b11881f4a5d47}{}\label{pipeline_8h_ad9c761edaba473ad641b11881f4a5d47}
Create a pipe. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em read\+Fd\+Ptr} & Ptr to where the fd for the read end of the pipe will be put. \\
\hline
\mbox{\tt out}  & {\em write\+Fd\+Ptr} & Ptr to where the fd for the write end of the pipe will be put. \\
\hline
\end{DoxyParams}
\index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Delete@{pipeline\+\_\+\+Delete}}
\index{pipeline\+\_\+\+Delete@{pipeline\+\_\+\+Delete}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Delete(pipeline\+\_\+\+Ref\+\_\+t pipeline)}{pipeline_Delete(pipeline_Ref_t pipeline)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Delete (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_ae15e18fdcb35f8da14531967e0706d34}{}\label{pipeline_8h_ae15e18fdcb35f8da14531967e0706d34}
Delete a pipeline.

If the processes are still running, force kills them (using S\+I\+G\+K\+I\+LL).

Any data left in pipes will be lost. \index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Init@{pipeline\+\_\+\+Init}}
\index{pipeline\+\_\+\+Init@{pipeline\+\_\+\+Init}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Init()}{pipeline_Init()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_af66bb3e4fa7e730c8cd2eecabeef84e4}{}\label{pipeline_8h_af66bb3e4fa7e730c8cd2eecabeef84e4}
Initialize the pipeline module.

This should be called by liblegato\textquotesingle{}s \hyperlink{init_8c}{init.\+c} module at start-\/up. \index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Set\+Input@{pipeline\+\_\+\+Set\+Input}}
\index{pipeline\+\_\+\+Set\+Input@{pipeline\+\_\+\+Set\+Input}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Set\+Input(pipeline\+\_\+\+Ref\+\_\+t pipeline, int fd)}{pipeline_SetInput(pipeline_Ref_t pipeline, int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Set\+Input (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_aa0f06827e76701914e05f0680e657b99}{}\label{pipeline_8h_aa0f06827e76701914e05f0680e657b99}
Provides a file descriptor for the pipeline to read its input from. \index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Set\+Output@{pipeline\+\_\+\+Set\+Output}}
\index{pipeline\+\_\+\+Set\+Output@{pipeline\+\_\+\+Set\+Output}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Set\+Output(pipeline\+\_\+\+Ref\+\_\+t pipeline, int fd)}{pipeline_SetOutput(pipeline_Ref_t pipeline, int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Set\+Output (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_ae7a6d4db607aea4887cc0d3f94735354}{}\label{pipeline_8h_ae7a6d4db607aea4887cc0d3f94735354}
Provides a file descriptor for the pipeline to write its output to. \index{pipeline.\+h@{pipeline.\+h}!pipeline\+\_\+\+Start@{pipeline\+\_\+\+Start}}
\index{pipeline\+\_\+\+Start@{pipeline\+\_\+\+Start}!pipeline.\+h@{pipeline.\+h}}
\subsubsection[{\texorpdfstring{pipeline\+\_\+\+Start(pipeline\+\_\+\+Ref\+\_\+t pipeline, pipeline\+\_\+\+Termination\+Handler\+\_\+t callback)}{pipeline_Start(pipeline_Ref_t pipeline, pipeline_TerminationHandler_t callback)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} pipeline\+\_\+\+Start (
\begin{DoxyParamCaption}
\item[{{\bf pipeline\+\_\+\+Ref\+\_\+t}}]{pipeline, }
\item[{{\bf pipeline\+\_\+\+Termination\+Handler\+\_\+t}}]{callback}
\end{DoxyParamCaption}
)}\hypertarget{pipeline_8h_aed5a5f3ba88d66bb542744eb56eb7eda}{}\label{pipeline_8h_aed5a5f3ba88d66bb542744eb56eb7eda}
Executes the processes in the pipeline. A completion callback function is provided, which will be called when the pipeline terminates. 