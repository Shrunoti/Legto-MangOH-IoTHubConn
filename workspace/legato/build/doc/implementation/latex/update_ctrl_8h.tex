\hypertarget{update_ctrl_8h}{}\section{framework/daemons/linux/update\+Daemon/update\+Ctrl.h File Reference}
\label{update_ctrl_8h}\index{framework/daemons/linux/update\+Daemon/update\+Ctrl.\+h@{framework/daemons/linux/update\+Daemon/update\+Ctrl.\+h}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_ctrl_8h_ac0a23ae9bd4e79ea88dae26b0d2cfce1}{update\+Ctrl\+\_\+\+Set\+Probation\+Expiry\+Call\+Back} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void}($\ast$f)(\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void}))
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_ctrl_8h_a265c2440707691e6e44c2f094a2e4e40}{update\+Ctrl\+\_\+\+Initialize} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
bool \hyperlink{update_ctrl_8h_a580f6f9e5dfad065ac68bd887a0c412c}{update\+Ctrl\+\_\+\+Is\+Probation\+Locked} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
bool \hyperlink{update_ctrl_8h_a7d0d666acf469d56e7fefb046da8b2e9}{update\+Ctrl\+\_\+\+Has\+Defers} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{update_ctrl_8h_aaaa0ea1beec4d844a1af5247bb1e99bf}{update\+Daemon\+\_\+\+Mark\+Good} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Includes for \hyperlink{update_daemon_8c}{update\+Daemon.\+c} to talk to \hyperlink{update_ctrl_8c}{update\+Ctrl.\+c}

Copyright (C) Sierra Wireless Inc. 

\subsection{Function Documentation}
\index{update\+Ctrl.\+h@{update\+Ctrl.\+h}!update\+Ctrl\+\_\+\+Has\+Defers@{update\+Ctrl\+\_\+\+Has\+Defers}}
\index{update\+Ctrl\+\_\+\+Has\+Defers@{update\+Ctrl\+\_\+\+Has\+Defers}!update\+Ctrl.\+h@{update\+Ctrl.\+h}}
\subsubsection[{\texorpdfstring{update\+Ctrl\+\_\+\+Has\+Defers(void)}{updateCtrl_HasDefers(void)}}]{\setlength{\rightskip}{0pt plus 5cm}bool update\+Ctrl\+\_\+\+Has\+Defers (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_ctrl_8h_a7d0d666acf469d56e7fefb046da8b2e9}{}\label{update_ctrl_8h_a7d0d666acf469d56e7fefb046da8b2e9}
Are there any defers in effect

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item true If probation is locked
\item false Probation is not locked
\end{DoxyItemize}
\end{DoxyReturn}
Check for defer counts for any processes that we have records for. \begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item true At least one process holds at least one defer.
\item false No defers are found. 
\end{DoxyItemize}
\end{DoxyReturn}
\index{update\+Ctrl.\+h@{update\+Ctrl.\+h}!update\+Ctrl\+\_\+\+Initialize@{update\+Ctrl\+\_\+\+Initialize}}
\index{update\+Ctrl\+\_\+\+Initialize@{update\+Ctrl\+\_\+\+Initialize}!update\+Ctrl.\+h@{update\+Ctrl.\+h}}
\subsubsection[{\texorpdfstring{update\+Ctrl\+\_\+\+Initialize(void)}{updateCtrl_Initialize(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} update\+Ctrl\+\_\+\+Initialize (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_ctrl_8h_a265c2440707691e6e44c2f094a2e4e40}{}\label{update_ctrl_8h_a265c2440707691e6e44c2f094a2e4e40}
Set a callback to call to set the status to \char`\"{}good\char`\"{}.

Initialize the mem pool so we can allocate our counter objects and set up the hash we will store them in. This will be done in a lazy way. We will only do the work of initializing if someone actually want to use this. \index{update\+Ctrl.\+h@{update\+Ctrl.\+h}!update\+Ctrl\+\_\+\+Is\+Probation\+Locked@{update\+Ctrl\+\_\+\+Is\+Probation\+Locked}}
\index{update\+Ctrl\+\_\+\+Is\+Probation\+Locked@{update\+Ctrl\+\_\+\+Is\+Probation\+Locked}!update\+Ctrl.\+h@{update\+Ctrl.\+h}}
\subsubsection[{\texorpdfstring{update\+Ctrl\+\_\+\+Is\+Probation\+Locked(void)}{updateCtrl_IsProbationLocked(void)}}]{\setlength{\rightskip}{0pt plus 5cm}bool update\+Ctrl\+\_\+\+Is\+Probation\+Locked (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_ctrl_8h_a580f6f9e5dfad065ac68bd887a0c412c}{}\label{update_ctrl_8h_a580f6f9e5dfad065ac68bd887a0c412c}
Called from the probation timout handler to determine whether it is OK to mark the system \char`\"{}good\char`\"{}.

\begin{DoxyReturn}{Returns}

\begin{DoxyItemize}
\item true If probation is locked
\item false Probation is not locked 
\end{DoxyItemize}
\end{DoxyReturn}
\index{update\+Ctrl.\+h@{update\+Ctrl.\+h}!update\+Ctrl\+\_\+\+Set\+Probation\+Expiry\+Call\+Back@{update\+Ctrl\+\_\+\+Set\+Probation\+Expiry\+Call\+Back}}
\index{update\+Ctrl\+\_\+\+Set\+Probation\+Expiry\+Call\+Back@{update\+Ctrl\+\_\+\+Set\+Probation\+Expiry\+Call\+Back}!update\+Ctrl.\+h@{update\+Ctrl.\+h}}
\subsubsection[{\texorpdfstring{update\+Ctrl\+\_\+\+Set\+Probation\+Expiry\+Call\+Back(void($\ast$f)(void))}{updateCtrl_SetProbationExpiryCallBack(void(*f)(void))}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} update\+Ctrl\+\_\+\+Set\+Probation\+Expiry\+Call\+Back (
\begin{DoxyParamCaption}
\item[{{\bf void}($\ast$)({\bf void})}]{probation\+Expiry\+Callback}
\end{DoxyParamCaption}
)}\hypertarget{update_ctrl_8h_ac0a23ae9bd4e79ea88dae26b0d2cfce1}{}\label{update_ctrl_8h_ac0a23ae9bd4e79ea88dae26b0d2cfce1}
Set a callback to call for when all probation locks are removed. \index{update\+Ctrl.\+h@{update\+Ctrl.\+h}!update\+Daemon\+\_\+\+Mark\+Good@{update\+Daemon\+\_\+\+Mark\+Good}}
\index{update\+Daemon\+\_\+\+Mark\+Good@{update\+Daemon\+\_\+\+Mark\+Good}!update\+Ctrl.\+h@{update\+Ctrl.\+h}}
\subsubsection[{\texorpdfstring{update\+Daemon\+\_\+\+Mark\+Good(void)}{updateDaemon_MarkGood(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} update\+Daemon\+\_\+\+Mark\+Good (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{update_ctrl_8h_aaaa0ea1beec4d844a1af5247bb1e99bf}{}\label{update_ctrl_8h_aaaa0ea1beec4d844a1af5247bb1e99bf}
Set a callback to call to set the status to \char`\"{}good\char`\"{}.

Set the update state to idle, mark the system good and clean up old system files. 