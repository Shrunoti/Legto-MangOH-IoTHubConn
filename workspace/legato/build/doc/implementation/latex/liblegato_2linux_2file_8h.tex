\hypertarget{liblegato_2linux_2file_8h}{}\section{framework/liblegato/linux/file.h File Reference}
\label{liblegato_2linux_2file_8h}\index{framework/liblegato/linux/file.\+h@{framework/liblegato/linux/file.\+h}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{liblegato_2linux_2file_8h_a82afc5bd5c90578bc65c47111ac41a6e}{file\+\_\+\+Exists} (const char $\ast$file\+Path)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{liblegato_2linux_2file_8h_a1288aabdd53b3d32477c5ce1faa3d0bf}{file\+\_\+\+Delete} (const char $\ast$file\+Path)
\item 
ssize\+\_\+t \hyperlink{liblegato_2linux_2file_8h_a9b6a3d460373d55eea541131e1531603}{file\+\_\+\+Read\+Str} (const char $\ast$file\+Path, char $\ast$buffer, size\+\_\+t size)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{liblegato_2linux_2file_8h_a3d37f190421b46ae5fac05ed5462f66e}{file\+\_\+\+Write\+Str} (const char $\ast$file\+Path, const char $\ast$string, mode\+\_\+t mode)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{liblegato_2linux_2file_8h_acc665c3829f9b782c34cd50186b5a5c5}{file\+\_\+\+Write\+Str\+Atomic} (const char $\ast$file\+Path, const char $\ast$string, mode\+\_\+t mode)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{liblegato_2linux_2file_8h_af3a4a38822777e12150785d4bd79af6f}{file\+\_\+\+Copy} (const char $\ast$source\+Path\+Ptr, const char $\ast$dest\+Path\+Ptr, const char $\ast$smack\+Label\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{liblegato_2linux_2file_8h_ad37fc0b425ae75b0af7034a265aa4877}{file\+\_\+\+Copy\+Recursive} (const char $\ast$source\+Path\+Ptr, const char $\ast$dest\+Path\+Ptr, const char $\ast$smack\+Label\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{liblegato_2linux_2file_8h_ad09c80a63dcb01e607fefde4086e3b56}{file\+\_\+\+Rename} (const char $\ast$src\+Path, const char $\ast$dest\+Path)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{liblegato/linux/file.\+h@{liblegato/linux/file.\+h}!file\+\_\+\+Copy@{file\+\_\+\+Copy}}
\index{file\+\_\+\+Copy@{file\+\_\+\+Copy}!liblegato/linux/file.\+h@{liblegato/linux/file.\+h}}
\subsubsection[{\texorpdfstring{file\+\_\+\+Copy(const char $\ast$source\+Path\+Ptr, const char $\ast$dest\+Path\+Ptr, const char $\ast$smack\+Label\+Ptr)}{file_Copy(const char *sourcePathPtr, const char *destPathPtr, const char *smackLabelPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} file\+\_\+\+Copy (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{source\+Path\+Ptr, }
\item[{const char $\ast$}]{dest\+Path\+Ptr, }
\item[{const char $\ast$}]{smack\+Label\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{liblegato_2linux_2file_8h_af3a4a38822777e12150785d4bd79af6f}{}\label{liblegato_2linux_2file_8h_af3a4a38822777e12150785d4bd79af6f}
Copy a file. This function copies the source file\textquotesingle{}s owner, permissions and extended attributes to the destination file as well.

\begin{DoxyReturn}{Returns}
-\/ L\+E\+\_\+\+OK if the copy was successful.
\begin{DoxyItemize}
\item L\+E\+\_\+\+N\+O\+T\+\_\+\+P\+E\+R\+M\+I\+T\+T\+ED if either the source or destination paths are not files or could not be opened.
\item L\+E\+\_\+\+I\+O\+\_\+\+E\+R\+R\+OR if an IO error occurs during the copy operation.
\item L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if source file or the destination directory does not exist. 
\end{DoxyItemize}
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em source\+Path\+Ptr} & Copy from this path... \\
\hline
\mbox{\tt in}  & {\em dest\+Path\+Ptr} & To this path. \\
\hline
\mbox{\tt in}  & {\em smack\+Label\+Ptr} & If not N\+U\+LL, the file will have this smack label set. \\
\hline
\end{DoxyParams}
\index{liblegato/linux/file.\+h@{liblegato/linux/file.\+h}!file\+\_\+\+Copy\+Recursive@{file\+\_\+\+Copy\+Recursive}}
\index{file\+\_\+\+Copy\+Recursive@{file\+\_\+\+Copy\+Recursive}!liblegato/linux/file.\+h@{liblegato/linux/file.\+h}}
\subsubsection[{\texorpdfstring{file\+\_\+\+Copy\+Recursive(const char $\ast$source\+Path\+Ptr, const char $\ast$dest\+Path\+Ptr, const char $\ast$smack\+Label\+Ptr)}{file_CopyRecursive(const char *sourcePathPtr, const char *destPathPtr, const char *smackLabelPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} file\+\_\+\+Copy\+Recursive (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{source\+Path\+Ptr, }
\item[{const char $\ast$}]{dest\+Path\+Ptr, }
\item[{const char $\ast$}]{smack\+Label\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{liblegato_2linux_2file_8h_ad37fc0b425ae75b0af7034a265aa4877}{}\label{liblegato_2linux_2file_8h_ad37fc0b425ae75b0af7034a265aa4877}
Copy a batch of files recursively from one directory into another. This function copies the source files\textquotesingle{} owner, permissions and extended attributes to the destination files as well.

\begin{DoxyNote}{Note}
Does not copy mounted files or any files under mounted directories. Does not copy anything if the source path directory is empty.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
-\/ L\+E\+\_\+\+OK if the copy was successful.
\begin{DoxyItemize}
\item L\+E\+\_\+\+N\+O\+T\+\_\+\+P\+E\+R\+M\+I\+T\+T\+ED if either the source or destination paths are not files or could not be opened.
\item L\+E\+\_\+\+I\+O\+\_\+\+E\+R\+R\+OR if an IO error occurs during the copy operation.
\item L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if source file or the destination directory does not exist. 
\end{DoxyItemize}
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em source\+Path\+Ptr} & Copy recursively from this path... \\
\hline
\mbox{\tt in}  & {\em dest\+Path\+Ptr} & To this path. \\
\hline
\mbox{\tt in}  & {\em smack\+Label\+Ptr} & If not N\+U\+LL, the file will have this smack label set. \\
\hline
\end{DoxyParams}
\index{liblegato/linux/file.\+h@{liblegato/linux/file.\+h}!file\+\_\+\+Delete@{file\+\_\+\+Delete}}
\index{file\+\_\+\+Delete@{file\+\_\+\+Delete}!liblegato/linux/file.\+h@{liblegato/linux/file.\+h}}
\subsubsection[{\texorpdfstring{file\+\_\+\+Delete(const char $\ast$file\+Path)}{file_Delete(const char *filePath)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} file\+\_\+\+Delete (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path}
\end{DoxyParamCaption}
)}\hypertarget{liblegato_2linux_2file_8h_a1288aabdd53b3d32477c5ce1faa3d0bf}{}\label{liblegato_2linux_2file_8h_a1288aabdd53b3d32477c5ce1faa3d0bf}
Deletes a file at a given path. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Path} & Path to the file to delete. \\
\hline
\end{DoxyParams}
\index{liblegato/linux/file.\+h@{liblegato/linux/file.\+h}!file\+\_\+\+Exists@{file\+\_\+\+Exists}}
\index{file\+\_\+\+Exists@{file\+\_\+\+Exists}!liblegato/linux/file.\+h@{liblegato/linux/file.\+h}}
\subsubsection[{\texorpdfstring{file\+\_\+\+Exists(const char $\ast$file\+Path)}{file_Exists(const char *filePath)}}]{\setlength{\rightskip}{0pt plus 5cm}bool file\+\_\+\+Exists (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path}
\end{DoxyParamCaption}
)}\hypertarget{liblegato_2linux_2file_8h_a82afc5bd5c90578bc65c47111ac41a6e}{}\label{liblegato_2linux_2file_8h_a82afc5bd5c90578bc65c47111ac41a6e}
Checks whether or not a file exists at a given file system path.

\begin{DoxyReturn}{Returns}
true if the file exists and is a normal file. false otherwise. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Path} & Path to the file in question. \\
\hline
\end{DoxyParams}
\index{liblegato/linux/file.\+h@{liblegato/linux/file.\+h}!file\+\_\+\+Read\+Str@{file\+\_\+\+Read\+Str}}
\index{file\+\_\+\+Read\+Str@{file\+\_\+\+Read\+Str}!liblegato/linux/file.\+h@{liblegato/linux/file.\+h}}
\subsubsection[{\texorpdfstring{file\+\_\+\+Read\+Str(const char $\ast$file\+Path, char $\ast$buffer, size\+\_\+t size)}{file_ReadStr(const char *filePath, char *buffer, size_t size)}}]{\setlength{\rightskip}{0pt plus 5cm}ssize\+\_\+t file\+\_\+\+Read\+Str (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path, }
\item[{char $\ast$}]{buffer, }
\item[{size\+\_\+t}]{size}
\end{DoxyParamCaption}
)}\hypertarget{liblegato_2linux_2file_8h_a9b6a3d460373d55eea541131e1531603}{}\label{liblegato_2linux_2file_8h_a9b6a3d460373d55eea541131e1531603}
Read a string from a file given by file\+Path into a buffer provided by the caller.

Will read up to size -\/ 1 bytes from the file.

The result will always be null-\/terminated.

\begin{DoxyReturn}{Returns}
Number of bytes read (not including the null terminator) or -\/1 on failure.
\end{DoxyReturn}
Read a string from a file given by file\+Path into a buffer provided by the caller.

Will read up to size -\/ 1 bytes from the file.

On success the output string will always be null-\/terminated.

\begin{DoxyReturn}{Returns}
Number of bytes read (not including the null terminator) or -\/1 on failure. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Path} & Path to the file to read from. \\
\hline
\mbox{\tt out}  & {\em buffer} & The string is written to this buffer. \\
\hline
\mbox{\tt in}  & {\em size} & How big is this buffer (in bytes)? \\
\hline
\end{DoxyParams}
\index{liblegato/linux/file.\+h@{liblegato/linux/file.\+h}!file\+\_\+\+Rename@{file\+\_\+\+Rename}}
\index{file\+\_\+\+Rename@{file\+\_\+\+Rename}!liblegato/linux/file.\+h@{liblegato/linux/file.\+h}}
\subsubsection[{\texorpdfstring{file\+\_\+\+Rename(const char $\ast$src\+Path, const char $\ast$dest\+Path)}{file_Rename(const char *srcPath, const char *destPath)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} file\+\_\+\+Rename (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{src\+Path, }
\item[{const char $\ast$}]{dest\+Path}
\end{DoxyParamCaption}
)}\hypertarget{liblegato_2linux_2file_8h_ad09c80a63dcb01e607fefde4086e3b56}{}\label{liblegato_2linux_2file_8h_ad09c80a63dcb01e607fefde4086e3b56}
Rename a file or directory. \index{liblegato/linux/file.\+h@{liblegato/linux/file.\+h}!file\+\_\+\+Write\+Str@{file\+\_\+\+Write\+Str}}
\index{file\+\_\+\+Write\+Str@{file\+\_\+\+Write\+Str}!liblegato/linux/file.\+h@{liblegato/linux/file.\+h}}
\subsubsection[{\texorpdfstring{file\+\_\+\+Write\+Str(const char $\ast$file\+Path, const char $\ast$string, mode\+\_\+t mode)}{file_WriteStr(const char *filePath, const char *string, mode_t mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} file\+\_\+\+Write\+Str (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path, }
\item[{const char $\ast$}]{string, }
\item[{mode\+\_\+t}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{liblegato_2linux_2file_8h_a3d37f190421b46ae5fac05ed5462f66e}{}\label{liblegato_2linux_2file_8h_a3d37f190421b46ae5fac05ed5462f66e}
Write a null-\/terminated string to a file given by file\+Path. The null terminator will not be written. The file will be opened, the string will be written and the file will be closed. If the file does not exist, it will be created. If the file did previously exist, its previous contents will be discarded, but its previous D\+AC permissions will be kept. To replace the existing file completely, use \hyperlink{liblegato_2linux_2file_8h_acc665c3829f9b782c34cd50186b5a5c5}{file\+\_\+\+Write\+Str\+Atomic()}. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Path} & Path to the file to write. \\
\hline
\mbox{\tt in}  & {\em string} & A string to write to this file. \\
\hline
\mbox{\tt in}  & {\em mode} & D\+AC permission bits (see man 2 open). E.\+g., 0644 = rw-\/r--r-- \\
\hline
\end{DoxyParams}
\index{liblegato/linux/file.\+h@{liblegato/linux/file.\+h}!file\+\_\+\+Write\+Str\+Atomic@{file\+\_\+\+Write\+Str\+Atomic}}
\index{file\+\_\+\+Write\+Str\+Atomic@{file\+\_\+\+Write\+Str\+Atomic}!liblegato/linux/file.\+h@{liblegato/linux/file.\+h}}
\subsubsection[{\texorpdfstring{file\+\_\+\+Write\+Str\+Atomic(const char $\ast$file\+Path, const char $\ast$string, mode\+\_\+t mode)}{file_WriteStrAtomic(const char *filePath, const char *string, mode_t mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} file\+\_\+\+Write\+Str\+Atomic (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Path, }
\item[{const char $\ast$}]{string, }
\item[{mode\+\_\+t}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{liblegato_2linux_2file_8h_acc665c3829f9b782c34cd50186b5a5c5}{}\label{liblegato_2linux_2file_8h_acc665c3829f9b782c34cd50186b5a5c5}
Atomically replace a file with another containing a string.

The string\textquotesingle{}s null terminator will not be written to the file.

file\+Path.\+new will be created with the contents of the string, then renamed to file\+Path. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Path} & Path to the file to write. \\
\hline
\mbox{\tt in}  & {\em string} & A string to write to this file. \\
\hline
\mbox{\tt in}  & {\em mode} & D\+AC permission bits (see man 2 open). E.\+g., 0644 = rw-\/r--r-- \\
\hline
\end{DoxyParams}
