\hypertarget{properties_8c}{}\section{framework/liblegato/linux/properties.c File Reference}
\label{properties_8c}\index{framework/liblegato/linux/properties.\+c@{framework/liblegato/linux/properties.\+c}}
{\ttfamily \#include \char`\"{}legato.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}properties.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}file\+Descriptor.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}limit.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct_properties_iter__t}{Properties\+Iter\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{properties_8c_a1fd3d907b1f5724b0a82bda572946375}{M\+A\+X\+\_\+\+P\+R\+O\+P\+E\+R\+T\+I\+E\+S\+\_\+\+B\+Y\+T\+ES}~\hyperlink{limit_8h_accd19a6264ef965c02f113dc01610e14}{L\+I\+M\+I\+T\+\_\+\+M\+A\+X\+\_\+\+P\+A\+T\+H\+\_\+\+B\+Y\+T\+ES}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static bool \hyperlink{properties_8c_a8534abc543ee0333981bd0cc76c22aaa}{Has\+Valid\+Key\+Value} (\hyperlink{struct_properties_iter__t}{Properties\+Iter\+\_\+t} $\ast$iter\+Ptr)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{properties_8c_a7352004128facf7da95acf0ba643a2c3}{properties\+\_\+\+Init} (\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void})
\item 
\hyperlink{properties_8h_acf0b16e5758f960669abe69a85b3545d}{properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t} \hyperlink{properties_8c_a44623027350a3b47a69ba82118607eeb}{properties\+\_\+\+Create\+Iter} (const char $\ast$file\+Name\+Ptr)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{properties_8c_a9227fde1a3c3c327eaee48becaf659d1}{properties\+\_\+\+Next\+Node} (\hyperlink{properties_8h_acf0b16e5758f960669abe69a85b3545d}{properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t} iterator\+Ref)
\item 
const char $\ast$ \hyperlink{properties_8c_a39a514b51d41dc9af19a56b74b5f7602}{properties\+\_\+\+Get\+Key} (\hyperlink{properties_8h_acf0b16e5758f960669abe69a85b3545d}{properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t} iterator\+Ref)
\item 
const char $\ast$ \hyperlink{properties_8c_af309eca949ab11a6df6150ec43ec9f1f}{properties\+\_\+\+Get\+Value} (\hyperlink{properties_8h_acf0b16e5758f960669abe69a85b3545d}{properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t} iterator\+Ref)
\item 
\hyperlink{_t_e_m_p_l_a_t_e__cdef_8h_ac9c84fa68bbad002983e35ce3663c686}{void} \hyperlink{properties_8c_a752b70271e605222b05a3736e7302662}{properties\+\_\+\+Delete\+Iter} (\hyperlink{properties_8h_acf0b16e5758f960669abe69a85b3545d}{properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t} iterator\+Ref)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{properties_8c_affc5d864e4ef43337760093a5831babd}{properties\+\_\+\+Get\+Value\+For\+Key} (const char $\ast$file\+Name\+Ptr, const char $\ast$key\+Ptr, char $\ast$buf\+Ptr, size\+\_\+t buf\+Size)
\item 
\hyperlink{le__basics_8h_a1cca095ed6ebab24b57a636382a6c86c}{le\+\_\+result\+\_\+t} \hyperlink{properties_8c_aa84a3c4c92350069e548adefa5176972}{properties\+\_\+\+Set\+Value\+For\+Key} (const char $\ast$file\+Name\+Ptr, const char $\ast$key\+Ptr, const char $\ast$value\+Ptr)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{le__mem_8h_a44a896f6a0a1a8c733e8038eb332989e}{le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} \hyperlink{properties_8c_ab114d6f9a79ff1dcffdf6649fc160016}{Properties\+Iter\+Pool} = N\+U\+LL
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This A\+PI is used to obtain the key-\/value pairs from an application configuration file in the Java .properties format.

The .properties file is assumed\+: 1) Contain a single property per line. 2) Only use the \textquotesingle{}key=value\textquotesingle{} format for properties. 3) Comment lines always start with a \textquotesingle{}\#\textquotesingle{} character.

Copyright (C) Sierra Wireless Inc. 

\subsection{Macro Definition Documentation}
\index{properties.\+c@{properties.\+c}!M\+A\+X\+\_\+\+P\+R\+O\+P\+E\+R\+T\+I\+E\+S\+\_\+\+B\+Y\+T\+ES@{M\+A\+X\+\_\+\+P\+R\+O\+P\+E\+R\+T\+I\+E\+S\+\_\+\+B\+Y\+T\+ES}}
\index{M\+A\+X\+\_\+\+P\+R\+O\+P\+E\+R\+T\+I\+E\+S\+\_\+\+B\+Y\+T\+ES@{M\+A\+X\+\_\+\+P\+R\+O\+P\+E\+R\+T\+I\+E\+S\+\_\+\+B\+Y\+T\+ES}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{M\+A\+X\+\_\+\+P\+R\+O\+P\+E\+R\+T\+I\+E\+S\+\_\+\+B\+Y\+T\+ES}{MAX_PROPERTIES_BYTES}}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+\_\+\+P\+R\+O\+P\+E\+R\+T\+I\+E\+S\+\_\+\+B\+Y\+T\+ES~{\bf L\+I\+M\+I\+T\+\_\+\+M\+A\+X\+\_\+\+P\+A\+T\+H\+\_\+\+B\+Y\+T\+ES}}\hypertarget{properties_8c_a1fd3d907b1f5724b0a82bda572946375}{}\label{properties_8c_a1fd3d907b1f5724b0a82bda572946375}
Maximum number of characters that a property line can be. 

\subsection{Function Documentation}
\index{properties.\+c@{properties.\+c}!Has\+Valid\+Key\+Value@{Has\+Valid\+Key\+Value}}
\index{Has\+Valid\+Key\+Value@{Has\+Valid\+Key\+Value}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{Has\+Valid\+Key\+Value(\+Properties\+Iter\+\_\+t $\ast$iter\+Ptr)}{HasValidKeyValue(PropertiesIter_t *iterPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}static bool Has\+Valid\+Key\+Value (
\begin{DoxyParamCaption}
\item[{{\bf Properties\+Iter\+\_\+t} $\ast$}]{iter\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{properties_8c_a8534abc543ee0333981bd0cc76c22aaa}{}\label{properties_8c_a8534abc543ee0333981bd0cc76c22aaa}
Checks if an iterator has a valid key-\/value pair at its currently location.

\begin{DoxyReturn}{Returns}
true if the iterator has a valid key-\/value pair. false if the iterator does not have a valid key-\/value pair. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em iter\+Ptr} & Iterator to check. \\
\hline
\end{DoxyParams}
\index{properties.\+c@{properties.\+c}!properties\+\_\+\+Create\+Iter@{properties\+\_\+\+Create\+Iter}}
\index{properties\+\_\+\+Create\+Iter@{properties\+\_\+\+Create\+Iter}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{properties\+\_\+\+Create\+Iter(const char $\ast$file\+Name\+Ptr)}{properties_CreateIter(const char *fileNamePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t} properties\+\_\+\+Create\+Iter (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Name\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{properties_8c_a44623027350a3b47a69ba82118607eeb}{}\label{properties_8c_a44623027350a3b47a69ba82118607eeb}
Opens the specified .properties file and returns an iterator that can be used to step through the list of name-\/value pairs in the file.

The iterator is not ready for data access until \hyperlink{properties_8c_a9227fde1a3c3c327eaee48becaf659d1}{properties\+\_\+\+Next\+Node()} has been called at least once.

\begin{DoxyNote}{Note}
Reading from a file that is being written to at the same time can result in unexpected behaviour. The caller must ensure that the file is not being written to while an iterator for the file exists.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
A reference to a properties iterator if successful. N\+U\+LL if the the file could not be opened. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Name\+Ptr} & File name of the .properties file. \\
\hline
\end{DoxyParams}
\index{properties.\+c@{properties.\+c}!properties\+\_\+\+Delete\+Iter@{properties\+\_\+\+Delete\+Iter}}
\index{properties\+\_\+\+Delete\+Iter@{properties\+\_\+\+Delete\+Iter}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{properties\+\_\+\+Delete\+Iter(properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t iterator\+Ref)}{properties_DeleteIter(properties_Iter_Ref_t iteratorRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} properties\+\_\+\+Delete\+Iter (
\begin{DoxyParamCaption}
\item[{{\bf properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t}}]{iterator\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{properties_8c_a752b70271e605222b05a3736e7302662}{}\label{properties_8c_a752b70271e605222b05a3736e7302662}
Deletes the iterator and closes the associated .properties file.

\begin{DoxyNote}{Note}
If the iterator is invalid this function will kill the calling process. 
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em iterator\+Ref} & Reference to the iterator. \\
\hline
\end{DoxyParams}
\index{properties.\+c@{properties.\+c}!properties\+\_\+\+Get\+Key@{properties\+\_\+\+Get\+Key}}
\index{properties\+\_\+\+Get\+Key@{properties\+\_\+\+Get\+Key}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{properties\+\_\+\+Get\+Key(properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t iterator\+Ref)}{properties_GetKey(properties_Iter_Ref_t iteratorRef)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ properties\+\_\+\+Get\+Key (
\begin{DoxyParamCaption}
\item[{{\bf properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t}}]{iterator\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{properties_8c_a39a514b51d41dc9af19a56b74b5f7602}{}\label{properties_8c_a39a514b51d41dc9af19a56b74b5f7602}
Retrieves the key where the iterator is currently pointing.

\begin{DoxyNote}{Note}
This function should only be used if a previous call to \hyperlink{properties_8c_a9227fde1a3c3c327eaee48becaf659d1}{properties\+\_\+\+Next\+Node()} returned successfully (returned L\+E\+\_\+\+OK). Otherwise the behaviour of this function is undefined.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
The key string. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em iterator\+Ref} & Reference to the iterator. \\
\hline
\end{DoxyParams}
\index{properties.\+c@{properties.\+c}!properties\+\_\+\+Get\+Value@{properties\+\_\+\+Get\+Value}}
\index{properties\+\_\+\+Get\+Value@{properties\+\_\+\+Get\+Value}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{properties\+\_\+\+Get\+Value(properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t iterator\+Ref)}{properties_GetValue(properties_Iter_Ref_t iteratorRef)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ properties\+\_\+\+Get\+Value (
\begin{DoxyParamCaption}
\item[{{\bf properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t}}]{iterator\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{properties_8c_af309eca949ab11a6df6150ec43ec9f1f}{}\label{properties_8c_af309eca949ab11a6df6150ec43ec9f1f}
Retrieves the value where the iterator is currently pointing.

\begin{DoxyNote}{Note}
This function should only be used if a previous call to \hyperlink{properties_8c_a9227fde1a3c3c327eaee48becaf659d1}{properties\+\_\+\+Next\+Node()} returned successfully (returned L\+E\+\_\+\+OK). Otherwise the behaviour of this function is undefined.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
The value string. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em iterator\+Ref} & Reference to the iterator. \\
\hline
\end{DoxyParams}
\index{properties.\+c@{properties.\+c}!properties\+\_\+\+Get\+Value\+For\+Key@{properties\+\_\+\+Get\+Value\+For\+Key}}
\index{properties\+\_\+\+Get\+Value\+For\+Key@{properties\+\_\+\+Get\+Value\+For\+Key}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{properties\+\_\+\+Get\+Value\+For\+Key(const char $\ast$file\+Name\+Ptr, const char $\ast$key\+Ptr, char $\ast$buf\+Ptr, size\+\_\+t buf\+Size)}{properties_GetValueForKey(const char *fileNamePtr, const char *keyPtr, char *bufPtr, size_t bufSize)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} properties\+\_\+\+Get\+Value\+For\+Key (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Name\+Ptr, }
\item[{const char $\ast$}]{key\+Ptr, }
\item[{char $\ast$}]{buf\+Ptr, }
\item[{size\+\_\+t}]{buf\+Size}
\end{DoxyParamCaption}
)}\hypertarget{properties_8c_affc5d864e4ef43337760093a5831babd}{}\label{properties_8c_affc5d864e4ef43337760093a5831babd}
Retrieves the value for a specified key in the specified .properties file.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+O\+V\+E\+R\+F\+L\+OW if the buffer is too small to hold the entire value string. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if the key does not exist. L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Name\+Ptr} & File name of the .properties file. \\
\hline
\mbox{\tt in}  & {\em key\+Ptr} & Key to get the value for. \\
\hline
\mbox{\tt out}  & {\em buf\+Ptr} & Buffer to hold the value string. \\
\hline
\mbox{\tt in}  & {\em buf\+Size} & Size of the buffer. \\
\hline
\end{DoxyParams}
\index{properties.\+c@{properties.\+c}!properties\+\_\+\+Init@{properties\+\_\+\+Init}}
\index{properties\+\_\+\+Init@{properties\+\_\+\+Init}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{properties\+\_\+\+Init(void)}{properties_Init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} properties\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{properties_8c_a7352004128facf7da95acf0ba643a2c3}{}\label{properties_8c_a7352004128facf7da95acf0ba643a2c3}
Initializes the properties subsystem\textquotesingle{}s internal memory pools. This function is to be called from Legato\textquotesingle{}s internal init. \index{properties.\+c@{properties.\+c}!properties\+\_\+\+Next\+Node@{properties\+\_\+\+Next\+Node}}
\index{properties\+\_\+\+Next\+Node@{properties\+\_\+\+Next\+Node}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{properties\+\_\+\+Next\+Node(properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t iterator\+Ref)}{properties_NextNode(properties_Iter_Ref_t iteratorRef)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} properties\+\_\+\+Next\+Node (
\begin{DoxyParamCaption}
\item[{{\bf properties\+\_\+\+Iter\+\_\+\+Ref\+\_\+t}}]{iterator\+Ref}
\end{DoxyParamCaption}
)}\hypertarget{properties_8c_a9227fde1a3c3c327eaee48becaf659d1}{}\label{properties_8c_a9227fde1a3c3c327eaee48becaf659d1}
Moves the iterator to the next key-\/value pair in the file. This function must be called at least once before any key-\/value pairs can be read. After the first time this function is called successfully on an iterator the first key-\/value pair will be available.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+ND if there are no more key-\/value pairs in the file. L\+E\+\_\+\+F\+A\+U\+LT if there is a format error in the file. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em iterator\+Ref} & Reference to the iterator. \\
\hline
\end{DoxyParams}
\index{properties.\+c@{properties.\+c}!properties\+\_\+\+Set\+Value\+For\+Key@{properties\+\_\+\+Set\+Value\+For\+Key}}
\index{properties\+\_\+\+Set\+Value\+For\+Key@{properties\+\_\+\+Set\+Value\+For\+Key}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{properties\+\_\+\+Set\+Value\+For\+Key(const char $\ast$file\+Name\+Ptr, const char $\ast$key\+Ptr, const char $\ast$value\+Ptr)}{properties_SetValueForKey(const char *fileNamePtr, const char *keyPtr, const char *valuePtr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+result\+\_\+t} properties\+\_\+\+Set\+Value\+For\+Key (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+Name\+Ptr, }
\item[{const char $\ast$}]{key\+Ptr, }
\item[{const char $\ast$}]{value\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{properties_8c_aa84a3c4c92350069e548adefa5176972}{}\label{properties_8c_aa84a3c4c92350069e548adefa5176972}
Sets the value for a specified key in the specified .properties file.

\begin{DoxyReturn}{Returns}
L\+E\+\_\+\+OK if successful. L\+E\+\_\+\+O\+V\+E\+R\+F\+L\+OW if file\+Name\+Ptr was too long. L\+E\+\_\+\+B\+A\+D\+\_\+\+P\+A\+R\+A\+M\+E\+T\+ER if file\+Name\+Ptr was formatted poorly. L\+E\+\_\+\+F\+A\+U\+LT if there was an error. 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em file\+Name\+Ptr} & File name of the .properties file. \\
\hline
\mbox{\tt in}  & {\em key\+Ptr} & Key to get the value for. \\
\hline
\mbox{\tt in}  & {\em value\+Ptr} & New property value string to write. \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\index{properties.\+c@{properties.\+c}!Properties\+Iter\+Pool@{Properties\+Iter\+Pool}}
\index{Properties\+Iter\+Pool@{Properties\+Iter\+Pool}!properties.\+c@{properties.\+c}}
\subsubsection[{\texorpdfstring{Properties\+Iter\+Pool}{PropertiesIterPool}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf le\+\_\+mem\+\_\+\+Pool\+Ref\+\_\+t} Properties\+Iter\+Pool = N\+U\+LL\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{properties_8c_ab114d6f9a79ff1dcffdf6649fc160016}{}\label{properties_8c_ab114d6f9a79ff1dcffdf6649fc160016}
Pool of properties iterators. 