<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: Install the Toolchain</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('basicBuildToolchain.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Install the Toolchain </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Toolchains are a collection of tools, libraries and programs that are needed to build a system for a target. Each module will have a different toolchain as the libraries and tools that are used are often dependent on the kernel/os version. The toolchain also includes all the kernel headers that are needed to build kernel objects and libraries used to enable additional hardware on your target.</p>
<p>While the toolchains are target/module specific we walk through installing toolchains as well as providing best practices to manage the toolchains as they are needed to build kernel modules, applications, and the runtime environment for your target. The Legato Application Framework does not maintain any of the toolchains but does test toolchains to ensure that they work with the Application Framework.</p>
<dl class="section warning"><dt>Warning</dt><dd>When switching between different models of targets or upgrading your firmware/OS verify that you have the matching toolchain installed and it is the right version of toolchain that you need to build for that target.</dd></dl>
<h1><a class="anchor" id="basicBuildToolchain_basicBuildToolchainSWI"></a>
SWI WP Series Device Toolchain</h1>
<p>Make sure that all old toolchain installers have been archived or deleted before you download a new toolchain.</p>
<pre class="fragment">$ cd ~/Downloads
$ mkdir old_toolchains
$ mv poky* old_toolchains
</pre><p>Each target maintains it's own unique toolchain as the toolchain needs to be built as part of the OS distribution. Visit <a href="https://source.sierrawireless.com/">source.sierrawireless.com</a> to download and install the toolchain for your target.</p>
<table class="doxtable">
<tr>
<th>Module </th><th>Download Site  </th></tr>
<tr>
<td>WPX5XX </td><td><a href="https://source.sierrawireless.com/resources/airprime/software/wpx5xx/wpx5xx-firmware-latest-release/">WPX5XX Firmware Download Page</a> </td></tr>
<tr>
<td>WP76XX </td><td><a href="https://source.sierrawireless.com/resources/airprime/software/wp76xx/wp76xx-firmware-latest-release/">WP76XX Firmware Download Page</a> </td></tr>
<tr>
<td>WP77XX </td><td><a href="https://source.sierrawireless.com/resources/airprime/software/wp77xx/wp77xx-firmware-latest-release/">WP77XX Firmware Download Page</a> </td></tr>
<tr>
<td>AR Modules </td><td>See your FAE to download and install the toolchain for your module </td></tr>
</table>
<p>After downloading the toolchain installer copy it into your workspace for safe keeping: </p><pre class="fragment">$mv &lt;toolchain&gt; ~/workspace/firmware/&lt;module&gt;/.
</pre><p>You may also need to grant execute rights before the toolchain installer can be run: </p><pre class="fragment">$ cd ~/workspace/firmware/&lt;module&gt;/
$ chmod +x &lt;toolchain&gt;
</pre><p>Upon running the toolchain installer you will be prompted where you want to install the tools.</p>
<p>Enter:</p><pre class="fragment">/opt/swi/y17-ext-&lt;legato version&gt; </pre><p>When prompted, answer "Y" to proceed with the install.</p>
<pre class="fragment">$ ./poky-swi-ext-glibc-x86_64-meta-toolchain-swi-ext-armv7a-vfp-neon-toolchain-swi-ext-1.7.3.sh
Enter target directory for SDK (default: /opt/swi/y17-ext): /opt/swi/y17-ext-1610
You are about to install the SDK to "/opt/swi/y17-ext-1610". Proceed[Y/n]?Y
Extracting SDK...done
Setting it up...done
SDK has been successfully set up and is ready to be used.
</pre><p>Create a soft link from the versioned folder to /y17-ext (delete the existing soft link if needed)</p>
<pre class="fragment">$ cd /opt/swi
$ rm y-17-ext
$ ln -s y17-ext-1610 y17-ext
</pre><dl class="section note"><dt>Note</dt><dd>Each version of Legato requires its own toolchain. To support multiple versions on one host:<ul>
<li>create a folder for each version</li>
<li>update the softlink "/opt/swi/y17-ext" to point to the legato version that are currently working with. To change versions update the soft link to point to the new Legato version you are working with.</li>
</ul>
</dd></dl>
<h2><a class="anchor" id="basicBuildLegato_ToolchainSWI_KO"></a>
Run Kernel Build Scripts</h2>
<p>If you wish to include kernel objects within your Legato System (e.g.; the sensor you have connected to your target has it's own driver) you must run the kernel build scripts first.</p>
<p>Add the following directory to your PATH: <code>/opt/swi/y17-ext/sysroots/x86_64-pokysdk-linux/usr/bin/arm-poky-linux-gnueabi</code> </p>
<pre class="fragment">$ export PATH=/opt/swi/y17-ext/sysroots/x86_64-pokysdk-linux/usr/bin/arm-poky-linux-gnueabi:$PATH
</pre><p>Change directory to: <code>/opt/swi/y17-ext/sysroots/armv7a-vfp-neon-poky-linux-gnueabi/usr/src/kernel</code> </p>
<pre class="fragment">$ cd /opt/swi/y17-ext/sysroots/armv7a-vfp-neon-poky-linux-gnueabi/usr/src/kernel
</pre><p>Take ownership of the files in the directory and run make scripts, when done return ownership to the root user.</p>
<dl class="section note"><dt>Note</dt><dd>The root user does not know the path to the Legato compiler so file ownership must be temporarily transfered to yourself so that the scripts build properly and then given back when the script is completed.</dd></dl>
<pre class="fragment">$ sudo chown -R $USER .
$ ARCH=arm CROSS_COMPILE=arm-poky-linux-gnueabi- make scripts
$ sudo chown -R root .
</pre><p>You are now ready to <a class="el" href="basicBuildMake.html">build and configure</a> the Legato Runtime Environment for your target device.</p>
<h1><a class="anchor" id="basicBuildToolchain_RaspbToolChain"></a>
Raspberry Pi Toolchain</h1>
<p>If you are building Legato AF directly on a Raspberry Pi then no toolchain is needed and you only need to install <b>native</b> <b></b> <a href="https://gcc.gnu.org/install/">GCC</a>. If you are cross-compiling the Legato AF on a Linux machine for use on a Raspberry Pi Device, then you will need to install Raspberry Pi's toolchain.</p>
<p>Raspberry Pi platforms (clone from the GitHub repo): </p><pre class="fragment">git clone https://github.com/raspberrypi/tools
</pre><p>Copy the <code>/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian</code> directory to a shared location on your Linux Development Host.</p>
<p>Add <code>/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin</code> to your $PATH </p><pre class="fragment">export PATH=$PATH:${PWD}/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin
</pre><dl class="section note"><dt>Note</dt><dd>The 64bit Raspberry Pi toolchain is located: <code>/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64</code> </dd></dl>
<p>You are now ready to <a class="el" href="basicBuildMake.html">build and configure</a> the Legato Runtime Environment for your target device.</p>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
