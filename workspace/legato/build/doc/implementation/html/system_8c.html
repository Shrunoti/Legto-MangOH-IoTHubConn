<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: framework/daemons/linux/updateDaemon/system.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('system_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">system.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="legato_8h_source.html">legato.h</a>&quot;</code><br />
<code>#include &quot;interfaces.h&quot;</code><br />
<code>#include &quot;<a class="el" href="limit_8h_source.html">limit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="file_descriptor_8h_source.html">fileDescriptor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="file_system_8h_source.html">fileSystem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="properties_8h_source.html">properties.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sup_ctrl_8h_source.html">supCtrl.h</a>&quot;</code><br />
<code>#include &quot;file.h&quot;</code><br />
<code>#include &quot;<a class="el" href="daemons_2linux_2update_daemon_2system_8h_source.html">system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="installer_8h_source.html">installer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sys_paths_8h_source.html">sysPaths.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sys_status_8h_source.html">sysStatus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="smack_8h_source.html">smack.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aebd3c502af38749a6f82b22149e49762"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aebd3c502af38749a6f82b22149e49762">UNPACK_BASE_PATH</a>&#160;&#160;&#160;<a class="el" href="sys_paths_8h.html#aeffbbf6e2e2f3e77b575aec24758ecba">SYSTEM_PATH</a> &quot;/unpack&quot;</td></tr>
<tr class="separator:aebd3c502af38749a6f82b22149e49762"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af34f2d5f21e3a37a8869b7aee8986198"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#af34f2d5f21e3a37a8869b7aee8986198">system_PrepUnpackDir</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:af34f2d5f21e3a37a8869b7aee8986198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac94e85d94402550e84461177752c2d8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ac94e85d94402550e84461177752c2d8a">system_KillUnpackDir</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ac94e85d94402550e84461177752c2d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af63dffa68d9fd49016fbb8b3bd5b93cc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#af63dffa68d9fd49016fbb8b3bd5b93cc">SetIndex</a> (const char *systemNamePtr, int newIndex)</td></tr>
<tr class="separator:af63dffa68d9fd49016fbb8b3bd5b93cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae969601d8dd3f8fd0dca416e68ec9d29"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ae969601d8dd3f8fd0dca416e68ec9d29">IsDir</a> (struct dirent *dirEntryPtr)</td></tr>
<tr class="separator:ae969601d8dd3f8fd0dca416e68ec9d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d04d45e665475b2011e08a6b46c3707"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a9d04d45e665475b2011e08a6b46c3707">SetVersion</a> (const char *newVersion)</td></tr>
<tr class="separator:a9d04d45e665475b2011e08a6b46c3707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa156a4293c070adad4c4eaf01eaa6acd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aa156a4293c070adad4c4eaf01eaa6acd">SetSystemFilesPermissions</a> (const char *newSystemPath)</td></tr>
<tr class="separator:aa156a4293c070adad4c4eaf01eaa6acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ca79779cfb094d40458d837f882f65a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a0ca79779cfb094d40458d837f882f65a">GetIndex</a> (const char *systemNamePtr)</td></tr>
<tr class="separator:a0ca79779cfb094d40458d837f882f65a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d0d438bb8eaa3698aa0b9d02b82410"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ad6d0d438bb8eaa3698aa0b9d02b82410">system_Index</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ad6d0d438bb8eaa3698aa0b9d02b82410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2806eaa30cb37907014680750f31f5de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a2806eaa30cb37907014680750f31f5de">system_GetPreviousSystemIndex</a> (int systemIndex)</td></tr>
<tr class="separator:a2806eaa30cb37907014680750f31f5de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a667252b4e84069ec7a61bfb9328ec8fa"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a667252b4e84069ec7a61bfb9328ec8fa">system_Version</a> (char *versionPtr, size_t versionSize)</td></tr>
<tr class="separator:a667252b4e84069ec7a61bfb9328ec8fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad844d3816d0846e21b88925d99d99eab"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ad844d3816d0846e21b88925d99d99eab">system_Exists</a> (int systemIndex)</td></tr>
<tr class="separator:ad844d3816d0846e21b88925d99d99eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab198c4acd07848e0559c2e24ee161a9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ab198c4acd07848e0559c2e24ee161a9a">system_GetSystemHash</a> (int systemIndex, char hashBuffer[<a class="el" href="limit_8h.html#a54afff2397b4c963793b121a90abc1dc">LIMIT_MD5_STR_BYTES</a>])</td></tr>
<tr class="separator:ab198c4acd07848e0559c2e24ee161a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90f4c4eb35e3893e96e295987185e623"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a90f4c4eb35e3893e96e295987185e623">system_SymlinkApp</a> (const char *systemNamePtr, const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:a90f4c4eb35e3893e96e295987185e623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab96628c3a43d33b3be5ba342529f3958"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ab96628c3a43d33b3be5ba342529f3958">system_UnlinkApp</a> (const char *systemNamePtr, const char *appNamePtr)</td></tr>
<tr class="separator:ab96628c3a43d33b3be5ba342529f3958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ac45384977e75e61647d2b2527e6bfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a2ac45384977e75e61647d2b2527e6bfb">system_UpdateCurrentAppWriteableFiles</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:a2ac45384977e75e61647d2b2527e6bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab210d742a4c37b65fdc6818b709b4c28"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ab210d742a4c37b65fdc6818b709b4c28">system_RemoveApp</a> (const char *appNamePtr)</td></tr>
<tr class="separator:ab210d742a4c37b65fdc6818b709b4c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad38a96081a4f763465370a321c8c4d83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ad38a96081a4f763465370a321c8c4d83">system_CopyAppConfig</a> (const char *appNamePtr)</td></tr>
<tr class="separator:ad38a96081a4f763465370a321c8c4d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0d6a7737d01e5216a303445b31720e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aa0d6a7737d01e5216a303445b31720e1">system_FinishUpdate</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aa0d6a7737d01e5216a303445b31720e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a153c224f5a2ef11c850901697386bb03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a153c224f5a2ef11c850901697386bb03">system_Snapshot</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a153c224f5a2ef11c850901697386bb03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9372ed45bba69ee465ea771387e4419f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a9372ed45bba69ee465ea771387e4419f">system_MarkModified</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a9372ed45bba69ee465ea771387e4419f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb4f3fd1139573c363b7542eb31cfbe7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aeb4f3fd1139573c363b7542eb31cfbe7">system_IsModified</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aeb4f3fd1139573c363b7542eb31cfbe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4dea8a5905b9d8df09d71b17cee528"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a6e4dea8a5905b9d8df09d71b17cee528">system_HasApp</a> (const char *appNamePtr)</td></tr>
<tr class="separator:a6e4dea8a5905b9d8df09d71b17cee528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff45119772f13bcf0d59a4e747867a47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aff45119772f13bcf0d59a4e747867a47">system_RemoveUnusedApps</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aff45119772f13bcf0d59a4e747867a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8afb5c98f0f3c14cab1668606c49ba94"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a8afb5c98f0f3c14cab1668606c49ba94">system_AppUsedInAnySystem</a> (const char *appHashPtr)</td></tr>
<tr class="separator:a8afb5c98f0f3c14cab1668606c49ba94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee5ebfd37a55328d6144e9e0e75fda69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aee5ebfd37a55328d6144e9e0e75fda69">system_RemoveUnneeded</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aee5ebfd37a55328d6144e9e0e75fda69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5efac20157ac7dc014f7ddb3f0808337"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a5efac20157ac7dc014f7ddb3f0808337">system_GetAppWriteableFilesDirPath</a> (char *pathBuffPtr, size_t buffSize, const char *systemNamePtr, const char *appNamePtr)</td></tr>
<tr class="separator:a5efac20157ac7dc014f7ddb3f0808337"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4b2f2103263a857b6f3ee6df60987a10"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a4b2f2103263a857b6f3ee6df60987a10">SystemPath</a> = <a class="el" href="sys_paths_8h.html#aeffbbf6e2e2f3e77b575aec24758ecba">SYSTEM_PATH</a></td></tr>
<tr class="separator:a4b2f2103263a857b6f3ee6df60987a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedd6cf5821540ca7a041c8b4c5c50a65"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#aedd6cf5821540ca7a041c8b4c5c50a65">NumberedSystemPath</a> = <a class="el" href="sys_paths_8h.html#aeffbbf6e2e2f3e77b575aec24758ecba">SYSTEM_PATH</a> &quot;/%d&quot;</td></tr>
<tr class="separator:aedd6cf5821540ca7a041c8b4c5c50a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14d92e187b24a5d93cbf74d93ec4917c"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a14d92e187b24a5d93cbf74d93ec4917c">CurrentModifiedFilePath</a> = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/modified&quot;</td></tr>
<tr class="separator:a14d92e187b24a5d93cbf74d93ec4917c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84ac8d5528a81513ff48d0eac7ba2a5e"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a84ac8d5528a81513ff48d0eac7ba2a5e">CurrentPropertiesFilePath</a> = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/info.properties&quot;</td></tr>
<tr class="separator:a84ac8d5528a81513ff48d0eac7ba2a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a445d72953d8a3c49db6510cb47ee55a4"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a445d72953d8a3c49db6510cb47ee55a4">NumberedSystemPropertiesPath</a> = <a class="el" href="sys_paths_8h.html#aeffbbf6e2e2f3e77b575aec24758ecba">SYSTEM_PATH</a> &quot;/%d/info.properties&quot;</td></tr>
<tr class="separator:a445d72953d8a3c49db6510cb47ee55a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8585068e6bfd9a79984a2fb8732eae3e"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a8585068e6bfd9a79984a2fb8732eae3e">CurrentVersionFilePath</a> = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/version&quot;</td></tr>
<tr class="separator:a8585068e6bfd9a79984a2fb8732eae3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8370d6f39e3e7f458376a6078aced375"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a8370d6f39e3e7f458376a6078aced375">UnpackConfigDirPath</a> = <a class="el" href="system_8c.html#aebd3c502af38749a6f82b22149e49762">UNPACK_BASE_PATH</a> &quot;/config&quot;</td></tr>
<tr class="separator:a8370d6f39e3e7f458376a6078aced375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a183aabda6f0dc9e057c9f0e53654e503"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a183aabda6f0dc9e057c9f0e53654e503">system_UnpackPath</a> = <a class="el" href="system_8c.html#aebd3c502af38749a6f82b22149e49762">UNPACK_BASE_PATH</a></td></tr>
<tr class="separator:a183aabda6f0dc9e057c9f0e53654e503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13eef0955beafede871bf2a64286641c"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a13eef0955beafede871bf2a64286641c">system_CurrentAppsDir</a> = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/apps&quot;</td></tr>
<tr class="separator:a13eef0955beafede871bf2a64286641c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d56af5827ea1c61feb0bd8954214b62"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a3d56af5827ea1c61feb0bd8954214b62">CurrentAppsWriteableDir</a> = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/appsWriteable&quot;</td></tr>
<tr class="separator:a3d56af5827ea1c61feb0bd8954214b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>/legato/systems/ current/ &lt;index&gt;</p>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aebd3c502af38749a6f82b22149e49762"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNPACK_BASE_PATH&#160;&#160;&#160;<a class="el" href="sys_paths_8h.html#aeffbbf6e2e2f3e77b575aec24758ecba">SYSTEM_PATH</a> &quot;/unpack&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Absolute file system path to where new systems are unpacked. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0ca79779cfb094d40458d837f882f65a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int GetIndex </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>systemNamePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get a given system's index.</p>
<dl class="section return"><dt>Returns</dt><dd>System index or -1 on error. </dd></dl>

</div>
</div>
<a class="anchor" id="ae969601d8dd3f8fd0dca416e68ec9d29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool IsDir </td>
          <td>(</td>
          <td class="paramtype">struct dirent *&#160;</td>
          <td class="paramname"><em>dirEntryPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check whether a directory entry is a directory or not.</p>
<dl class="section return"><dt>Returns</dt><dd>True if specified entry is a directory False otherwise. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dirEntryPtr</td><td>Directory entry in question. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af63dffa68d9fd49016fbb8b3bd5b93cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> SetIndex </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>systemNamePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the index of the current system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">systemNamePtr</td><td>Which system are we setting the index on? </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">newIndex</td><td>The new index to set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa156a4293c070adad4c4eaf01eaa6acd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> SetSystemFilesPermissions </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>newSystemPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Recursively sets the permissions for all files in new installed system 'lib' directory. All files are set to SMACK label '_'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">newSystemPath</td><td>Path to new system. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9d04d45e665475b2011e08a6b46c3707"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> SetVersion </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>newVersion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the version string for the current system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">newVersion</td><td>Set the current systems version to this string. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8afb5c98f0f3c14cab1668606c49ba94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool system_AppUsedInAnySystem </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appHashPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check all installed systems and see if the given application is installed in any of them. The search is done by application <a class="el" href="class_m_d5.html">MD5</a> hash.</p>
<dl class="section return"><dt>Returns</dt><dd>true if there is any system with the given application installed, false otherwise. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appHashPtr</td><td>Look for this app hash. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad38a96081a4f763465370a321c8c4d83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> system_CopyAppConfig </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy a given app's (app-specific) config file from the current running system to the system unpack area.</p>
<dl class="section return"><dt>Returns</dt><dd>LE_OK if successful. </dd></dl>

</div>
</div>
<a class="anchor" id="ad844d3816d0846e21b88925d99d99eab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool system_Exists </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>systemIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check to see if the given system exists.</p>
<dl class="section return"><dt>Returns</dt><dd>True if the system in question exists, false if not. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">systemIndex</td><td>The system index to check. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa0d6a7737d01e5216a303445b31720e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> system_FinishUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Complete a system update and move the system from unpack into current.</p>
<dl class="section return"><dt>Returns</dt><dd>LE_OK if successful. </dd></dl>

</div>
</div>
<a class="anchor" id="a5efac20157ac7dc014f7ddb3f0808337"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_GetAppWriteableFilesDirPath </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pathBuffPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>systemNamePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the file system path to the directory into which a given app's writeable files are found inside a given system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pathBuffPtr</td><td>Ptr to where the path will be put. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">buffSize</td><td>Size of the buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2806eaa30cb37907014680750f31f5de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int system_GetPreviousSystemIndex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>systemIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the index for the previous system in the chain, using the current system as a starting point.</p>
<dl class="section return"><dt>Returns</dt><dd>The index to the system that's previous to the given system. -1 is returned if the previous system was not found. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">systemIndex</td><td>Get the system that's earlier to this system. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab198c4acd07848e0559c2e24ee161a9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> system_GetSystemHash </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>systemIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>hashBuffer</em>[LIMIT_MD5_STR_BYTES]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the hash ID from a given system.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>LE_OK if no problems are encountered.</li>
<li>LE_NOT_FOUND if the given index does not correspond to an available system.</li>
<li>LE_FORMAT_ERROR if there are problems reading the hash from the system. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">systemIndex</td><td>The system to read the hash for. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hashBuffer</td><td>Buffer to hold the system's hash ID. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6e4dea8a5905b9d8df09d71b17cee528"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool system_HasApp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks to see if an application with a given name is used in the current running system.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the app is in the system. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appNamePtr</td><td>Look for this app name. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad6d0d438bb8eaa3698aa0b9d02b82410"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int system_Index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current system's index.</p>
<dl class="section return"><dt>Returns</dt><dd>System index. </dd></dl>

</div>
</div>
<a class="anchor" id="aeb4f3fd1139573c363b7542eb31cfbe7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool system_IsModified </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check to see if the current system has been marked as modified.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the system has been modified, false if not. </dd></dl>

</div>
</div>
<a class="anchor" id="ac94e85d94402550e84461177752c2d8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_KillUnpackDir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove the systems unpack directory. </p>

</div>
</div>
<a class="anchor" id="a9372ed45bba69ee465ea771387e4419f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_MarkModified </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark the system as being modified. </p>

</div>
</div>
<a class="anchor" id="af34f2d5f21e3a37a8869b7aee8986198"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_PrepUnpackDir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare the unpack directory for use (delete any old one and create a fresh empty one). </p>

</div>
</div>
<a class="anchor" id="ab210d742a4c37b65fdc6818b709b4c28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_RemoveApp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove a given app's files from the current running system. </p>

</div>
</div>
<a class="anchor" id="aee5ebfd37a55328d6144e9e0e75fda69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_RemoveUnneeded </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete any systems that are "bad" or older than the newest "good". </p>

</div>
</div>
<a class="anchor" id="aff45119772f13bcf0d59a4e747867a47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_RemoveUnusedApps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete any apps that are not used by any systems (including the "unpack" system, if there is one). </p>

</div>
</div>
<a class="anchor" id="a153c224f5a2ef11c850901697386bb03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> system_Snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Take a snapshot of the current system.</p>
<dl class="section return"><dt>Returns</dt><dd>LE_OK if successful. </dd></dl>

</div>
</div>
<a class="anchor" id="a90f4c4eb35e3893e96e295987185e623"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_SymlinkApp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>systemNamePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a symlink to a given app's non-writeable files in a given system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">systemNamePtr</td><td>E.g., "current" or "unpack". </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab96628c3a43d33b3be5ba342529f3958"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_UnlinkApp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>systemNamePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove a symlink to a given app's non-writeable files in a given system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">systemNamePtr</td><td>E.g., "current" or "unpack". </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2ac45384977e75e61647d2b2527e6bfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> system_UpdateCurrentAppWriteableFiles </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update a given app's writeable files in the "current" system to match what's in the app's install directory (/legato/apps/&lt;hash&gt;). Deletes from the current system files that are not in the app's install directory. Adds to the current system files from the apps' install directory that are not in the current system. Leaves alone files that are in both the current system and the app's install directory.</p>
<dl class="section warning"><dt>Warning</dt><dd>Assumes the app identified by the hash is installed in /legato/apps/&lt;hash&gt;. </dd></dl>

</div>
</div>
<a class="anchor" id="a667252b4e84069ec7a61bfb9328ec8fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t system_Version </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>versionPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>versionSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the current system's version string (null-terminated).</p>
<dl class="section return"><dt>Returns</dt><dd>Length of the version string, in bytes, excluding the null terminator. 0 if version string could not be read. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">versionPtr</td><td>Buffer to write the version string too. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">versionSize</td><td>Size of the buffer passed in. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a3d56af5827ea1c61feb0bd8954214b62"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* CurrentAppsWriteableDir = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/appsWriteable&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to directory containing writeable app files in the current system. </p>

</div>
</div>
<a class="anchor" id="a14d92e187b24a5d93cbf74d93ec4917c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* CurrentModifiedFilePath = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/modified&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to where the current running system's "modified" file is. </p>

</div>
</div>
<a class="anchor" id="a84ac8d5528a81513ff48d0eac7ba2a5e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* CurrentPropertiesFilePath = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/info.properties&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to where the current running system's "info.properties" file is. </p>

</div>
</div>
<a class="anchor" id="a8585068e6bfd9a79984a2fb8732eae3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* CurrentVersionFilePath = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/version&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to where the current running system's "version" file is. </p>

</div>
</div>
<a class="anchor" id="aedd6cf5821540ca7a041c8b4c5c50a65"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* NumberedSystemPath = <a class="el" href="sys_paths_8h.html#aeffbbf6e2e2f3e77b575aec24758ecba">SYSTEM_PATH</a> &quot;/%d&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to a installed system directory. The system index must be specified by a snpritnf. </p>

</div>
</div>
<a class="anchor" id="a445d72953d8a3c49db6510cb47ee55a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* NumberedSystemPropertiesPath = <a class="el" href="sys_paths_8h.html#aeffbbf6e2e2f3e77b575aec24758ecba">SYSTEM_PATH</a> &quot;/%d/info.properties&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to where the a numbered system's "info.properties" file. The system index must be specified by a snpritnf. </p>

</div>
</div>
<a class="anchor" id="a13eef0955beafede871bf2a64286641c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* system_CurrentAppsDir = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/apps&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Absolute file system path to directory containing apps in current running system. </p>

</div>
</div>
<a class="anchor" id="a183aabda6f0dc9e057c9f0e53654e503"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* system_UnpackPath = <a class="el" href="system_8c.html#aebd3c502af38749a6f82b22149e49762">UNPACK_BASE_PATH</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Absolute file system path to the directory that systems get unpacked into. </p>

</div>
</div>
<a class="anchor" id="a4b2f2103263a857b6f3ee6df60987a10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* SystemPath = <a class="el" href="sys_paths_8h.html#aeffbbf6e2e2f3e77b575aec24758ecba">SYSTEM_PATH</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to where systems are installed. </p>

</div>
</div>
<a class="anchor" id="a8370d6f39e3e7f458376a6078aced375"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* UnpackConfigDirPath = <a class="el" href="system_8c.html#aebd3c502af38749a6f82b22149e49762">UNPACK_BASE_PATH</a> &quot;/config&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to directory containing the current running system's config tree files. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
