<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: framework/liblegato/linux/sysStatus.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sys_status_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sysStatus.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="legato_8h_source.html">legato.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="limit_8h_source.html">limit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sys_status_8h_source.html">sysStatus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="liblegato_2linux_2file_8h_source.html">file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="file_descriptor_8h_source.html">fileDescriptor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sys_paths_8h_source.html">sysPaths.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="properties_8h_source.html">properties.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae64b5d453d487eb1af75e1a401da989e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sys_status_8h.html#ae25825ce432b365f8a57356b813abf6b">sysStatus_Status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#ae64b5d453d487eb1af75e1a401da989e">sysStatus_GetStatus</a> (const char *systemNamePtr)</td></tr>
<tr class="separator:ae64b5d453d487eb1af75e1a401da989e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0529c9aefccbe735d1b6f3e246eedbb6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sys_status_8h.html#ae25825ce432b365f8a57356b813abf6b">sysStatus_Status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#a0529c9aefccbe735d1b6f3e246eedbb6">sysStatus_Status</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a0529c9aefccbe735d1b6f3e246eedbb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb9774588e8a290f5e4897bcea544e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#a4eb9774588e8a290f5e4897bcea544e5">sysStatus_SetUntried</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a4eb9774588e8a290f5e4897bcea544e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab70a2e15aa63cf0c66ffaff1863e8567"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#ab70a2e15aa63cf0c66ffaff1863e8567">sysStatus_TryCount</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ab70a2e15aa63cf0c66ffaff1863e8567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bf638b904f525463eb0bd54c3988371"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#a5bf638b904f525463eb0bd54c3988371">sysStatus_IncrementTryCount</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a5bf638b904f525463eb0bd54c3988371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41388abc303a50c0b644b9cc74cb6636"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#a41388abc303a50c0b644b9cc74cb6636">sysStatus_DecrementTryCount</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a41388abc303a50c0b644b9cc74cb6636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae545cc3e6156054d299823f69b488fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#aae545cc3e6156054d299823f69b488fb">sysStatus_MarkBad</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aae545cc3e6156054d299823f69b488fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c5b23f8a0ab29710eca3c252dbc4a65"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#a8c5b23f8a0ab29710eca3c252dbc4a65">sysStatus_MarkTried</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a8c5b23f8a0ab29710eca3c252dbc4a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4c9ca1016e23c710d736c70d892d075"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#aa4c9ca1016e23c710d736c70d892d075">sysStatus_MarkGood</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aa4c9ca1016e23c710d736c70d892d075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb7d2ac8a7d364a4b46c6e189bf55443"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#abb7d2ac8a7d364a4b46c6e189bf55443">sysStatus_IsGood</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:abb7d2ac8a7d364a4b46c6e189bf55443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5824e6461d9cf76a4568fdf3aca4ac"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#a6f5824e6461d9cf76a4568fdf3aca4ac">sysStatus_IsReadOnly</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a6f5824e6461d9cf76a4568fdf3aca4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac6ffc38d2dcb61353bb238c7b4f25e9e"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_status_8c.html#ac6ffc38d2dcb61353bb238c7b4f25e9e">CurrentStatusPath</a> = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/status&quot;</td></tr>
<tr class="separator:ac6ffc38d2dcb61353bb238c7b4f25e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions to do with manipulating the status of a system (and typically the current system) used by updateDaemon and supervisor</p>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a41388abc303a50c0b644b9cc74cb6636"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> sysStatus_DecrementTryCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decrement the try count. If the system is still under probation the try count will be decremented, else there is no effect. Will FATAL if the system has already been marked bad. </p>

</div>
</div>
<a class="anchor" id="ae64b5d453d487eb1af75e1a401da989e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sys_status_8h.html#ae25825ce432b365f8a57356b813abf6b">sysStatus_Status_t</a> sysStatus_GetStatus </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>systemNamePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the status of the current system.</p>
<dl class="section return"><dt>Returns</dt><dd>The system status (SYS_BAD on error). </dd></dl>

</div>
</div>
<a class="anchor" id="a5bf638b904f525463eb0bd54c3988371"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> sysStatus_IncrementTryCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Increment the try count. </p>

</div>
</div>
<a class="anchor" id="abb7d2ac8a7d364a4b46c6e189bf55443"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysStatus_IsGood </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the status of the current system.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the system is marked "good", false otherwise (e.g., if "tried 2"). </dd></dl>

</div>
</div>
<a class="anchor" id="a6f5824e6461d9cf76a4568fdf3aca4ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sysStatus_IsReadOnly </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks whether legato system is Read-Only or not.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the system is Read-Only false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="aae545cc3e6156054d299823f69b488fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> sysStatus_MarkBad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark the system "bad". </p>

</div>
</div>
<a class="anchor" id="aa4c9ca1016e23c710d736c70d892d075"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> sysStatus_MarkGood </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark the system "good". </p>

</div>
</div>
<a class="anchor" id="a8c5b23f8a0ab29710eca3c252dbc4a65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> sysStatus_MarkTried </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark the system "tried 1". </p>

</div>
</div>
<a class="anchor" id="a4eb9774588e8a290f5e4897bcea544e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> sysStatus_SetUntried </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove the status file thus setting the try status to untried </p>

</div>
</div>
<a class="anchor" id="a0529c9aefccbe735d1b6f3e246eedbb6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sys_status_8h.html#ae25825ce432b365f8a57356b813abf6b">sysStatus_Status_t</a> sysStatus_Status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the status of the current system.</p>
<dl class="section return"><dt>Returns</dt><dd>the system status. </dd></dl>

</div>
</div>
<a class="anchor" id="ab70a2e15aa63cf0c66ffaff1863e8567"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sysStatus_TryCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If the current system status is in Probation, then this returns the number of times the system has been tried while in probation.</p>
<p>Do not call this if you are not in probation!</p>
<dl class="section return"><dt>Returns</dt><dd>A count of the number of times the system has been "tried." </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ac6ffc38d2dcb61353bb238c7b4f25e9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* CurrentStatusPath = <a class="el" href="sys_paths_8h.html#a9285d2ec5322a9e23d72df98aa34a845">CURRENT_SYSTEM_PATH</a> &quot;/status&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Absolute file system path to where the current running system's "status" file is. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
