<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: Stream Media</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sampleApps_streamMedia.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Stream Media </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section warning"><dt>Warning</dt><dd>This sample includes GPLv2 code (PJSIP library). Use of a GPLv2 library results in this sample app being GPLv2 also.</dd>
<dd>
This sample app and its interface are experimental and unsupported.</dd></dl>
<h1><a class="anchor" id="streamMedia_App"></a>
The streamMedia sample</h1>
<p>This sample demonstrates an audio streaming over IP app. It uses:</p><ul>
<li>a 3rd-party library that implements RTP protocol (PJSIP);</li>
<li>the audio services with <code></code>.adef bindings and related <code></code>.cdef requires provides, and sources sections.</li>
</ul>
<p>The streamMedia sample implements an experimental service app exposing the <a class="el" href="c_streamMedia.html">Stream Media API</a>. Moreover, it also implements one additional test app beside the service app: the <b>streamMediaTest app</b> that contains two executables that show how to use the <a class="el" href="c_streamMedia.html">Stream Media API</a>. As this sample provides two apps, one for the service and another one for the test, you can find two .adef files:</p><ul>
<li>streamMedia.adef for the service;</li>
<li>streamMediaTest.adef for the test app.</li>
</ul>
<p>The <a class="el" href="c_streamMedia.html">Stream Media API</a> allows the user to connect the audio streaming over IP interface to other audio interfaces via audio connectors. Its usage follows the same rules as the other audio interfaces (like Mic, Speaker, MdmTx, ...), please refer to <a class="el" href="c_audio.html">Audio</a> API and <a class="el" href="c_streamMedia.html">Stream Media API</a> documentation.</p>
<p>Go to the <a href="https://github.com/legatoproject/legato-af/tree/master/apps/sample/streamMedia">sample code</a>.</p>
<p>Run this to install the sample app:</p>
<pre class="fragment">$ cd apps/sample/streamMedia
$ make wp85
$ update streamMedia.wp85.update &lt;ip address&gt;
</pre><p>where <em>ip address</em> is the address of your target device.</p>
<p>If you're not using a Sierra Wireless WP85xx module, replace <code>wp85</code> with the appropriate identifier for your target.</p>
<dl class="section note"><dt>Note</dt><dd>The streamMedia application has only been tested on WP85 and AR8652.</dd></dl>
<h1><a class="anchor" id="streamMedia_testApp"></a>
The streamMediaTest app</h1>
<p>The streamMediaTest app contains two executables that show how to use the <a class="el" href="c_streamMedia.html">Stream Media API</a>.</p>
<p>Note that these applications must be terminated using : </p><div class="fragment"><div class="line">app stop streamMediaTest</div></div><!-- fragment --><p> Otherwise the audio interface will not be disconnected and closed properly.</p>
<h2><a class="anchor" id="rtpLoopback"></a>
rtpLoopback</h2>
<p>rtpLoopback is a quick demonstration on how to use the <a class="el" href="c_streamMedia.html">Stream Media API</a>. It creates a local RTP session by getting audio from the microphone and sending it through RTP to the speaker.</p>
<p>To run the application, use the following command : </p><div class="fragment"><div class="line">app runProc streamMediaTest --exe=rtpLoopback</div></div><!-- fragment --><h2><a class="anchor" id="rtpTest"></a>
rtpTest</h2>
<p>rtpTest implements the use case pictured in <a class="el" href="c_streamMedia.html">Stream Media API</a> documentation. There are two test cases : one for the modem side (MODEM_PEER) and the other for the microphone and speaker side (AUDIO_PEER).</p>
<p>To run the application, use the following command : </p><div class="fragment"><div class="line">app runProc streamMediaTest --exe=rtpTest -- &lt;test <span class="keywordflow">case</span>&gt; &lt;remote ipv4 addr&gt; &lt;tel number&gt;</div></div><!-- fragment --><p>For instance, to run an audio peer that will send audio from the microphone to the remote address and play the received RTP packets on the speaker : </p><div class="fragment"><div class="line">app runProc streamMediaTest --exe=rtpTest -- AUDIO_PEER 192.168.10.2</div></div><!-- fragment --><p> To run the modem peer that sends audio from RTP to a modem call and from this modem call to RTP : </p><div class="fragment"><div class="line">app runProc streamMediaTest --exe=rtpTest -- MODEM_PEER 192.168.2.5 0123456789</div></div><!-- fragment --><p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
