<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: framework/daemons/linux/updateDaemon/updateUnpack.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('update_unpack_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">updateUnpack.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="legato_8h_source.html">legato.h</a>&quot;</code><br />
<code>#include &quot;interfaces.h&quot;</code><br />
<code>#include &quot;<a class="el" href="limit_8h_source.html">limit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="update_unpack_8h_source.html">updateUnpack.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pipeline_8h_source.html">pipeline.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="file_descriptor_8h_source.html">fileDescriptor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="daemons_2linux_2update_daemon_2system_8h_source.html">system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="daemons_2linux_2update_daemon_2app_8h_source.html">app.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aac69c9136e03c0b2c45ce8805907ed0a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#aac69c9136e03c0b2c45ce8805907ed0a">MD5_STRING_BYTES</a>&#160;&#160;&#160;33</td></tr>
<tr class="memdesc:aac69c9136e03c0b2c45ce8805907ed0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">An <a class="el" href="class_m_d5.html">MD5</a> hash string is 32 characters long, plus a null terminator.  <a href="#aac69c9136e03c0b2c45ce8805907ed0a">More...</a><br /></td></tr>
<tr class="separator:aac69c9136e03c0b2c45ce8805907ed0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aba01db17f4a2bfbc3db60dc172972a25"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="update_unpack_8c.html#aba01db17f4a2bfbc3db60dc172972a25aaade5e53e88cf231292cd1142cce2afe">STATE_IDLE</a>, 
<a class="el" href="update_unpack_8c.html#aba01db17f4a2bfbc3db60dc172972a25a1b23406e8e424c86a5b591a42d554392">STATE_PARSING_JSON</a>, 
<a class="el" href="update_unpack_8c.html#aba01db17f4a2bfbc3db60dc172972a25ae8e84efeda74ecadb4b8efceb6637c70">STATE_UNPACKING_PAYLOAD</a>, 
<a class="el" href="update_unpack_8c.html#aba01db17f4a2bfbc3db60dc172972a25ab0ddb806b1210eca2e5550b01d0aa216">STATE_SKIPPING_PAYLOAD</a>
 }</td></tr>
<tr class="separator:aba01db17f4a2bfbc3db60dc172972a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac30bbccf87ac6407805396cebbb073ad"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#ac30bbccf87ac6407805396cebbb073ad">DeleteFdMonitor</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ac30bbccf87ac6407805396cebbb073ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a792cc9978ec207ea1e8dc62663480b35"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a792cc9978ec207ea1e8dc62663480b35">Reset</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a792cc9978ec207ea1e8dc62663480b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53606e254b0b90afbf2d499463906303"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a53606e254b0b90afbf2d499463906303">ReportProgress</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a53606e254b0b90afbf2d499463906303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f77b31f2db0641fc50dcdff450dc4f9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a0f77b31f2db0641fc50dcdff450dc4f9">HandleFormatError</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a0f77b31f2db0641fc50dcdff450dc4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dca0898fc9c00c994c5d5d4dddb2e45"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a9dca0898fc9c00c994c5d5d4dddb2e45">HandleInternalError</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a9dca0898fc9c00c994c5d5d4dddb2e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb945b0c33c310c61924d6520b9e01b7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#aeb945b0c33c310c61924d6520b9e01b7">AppUnpackDone</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aeb945b0c33c310c61924d6520b9e01b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5359da444a6f8e6beb226f88989e69a8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a5359da444a6f8e6beb226f88989e69a8">JsonErrorHandler</a> (<a class="el" href="le__json_8h.html#ae16b8d9006b37bd7efb69869d8b8bc21">le_json_Error_t</a> error, const char *msg)</td></tr>
<tr class="separator:a5359da444a6f8e6beb226f88989e69a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0c2b62f36129558ab8639fdba4c014"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#ace0c2b62f36129558ab8639fdba4c014">JsonEventHandler</a> (<a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a> event)</td></tr>
<tr class="separator:ace0c2b62f36129558ab8639fdba4c014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28cee08301915d7891ef20eed13c1381"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a28cee08301915d7891ef20eed13c1381">StartParsing</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a28cee08301915d7891ef20eed13c1381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9b5d92c868a6e6274490f84a7211b0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a2f9b5d92c868a6e6274490f84a7211b0">UntarDone</a> (<a class="el" href="pipeline_8h.html#adfb885380a9b0f550fafe4de0a2d2564">pipeline_Ref_t</a> pipeline, int status)</td></tr>
<tr class="separator:a2f9b5d92c868a6e6274490f84a7211b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46e77edc00ef3478a704fdab40087199"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a46e77edc00ef3478a704fdab40087199">SkipForwardDone</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a46e77edc00ef3478a704fdab40087199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa263db162496d9e052cc5f827dcaafc5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#aa263db162496d9e052cc5f827dcaafc5">CopyBytesToPipeline</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aa263db162496d9e052cc5f827dcaafc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98fd3a53e9feca18bee3040845235737"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a98fd3a53e9feca18bee3040845235737">DiscardPayloadBytes</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a98fd3a53e9feca18bee3040845235737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d98e2a7e2e36802b4af7092a9e62b7e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a7d98e2a7e2e36802b4af7092a9e62b7e">InputFdEventHandler</a> (int <a class="el" href="app_stop_client_8c.html#a44f21d5190b5a6df8089f54799628d7e">fd</a>, short events)</td></tr>
<tr class="separator:a7d98e2a7e2e36802b4af7092a9e62b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a400ff729370cbc9d034a1317beb52665"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a400ff729370cbc9d034a1317beb52665">Untar</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *param)</td></tr>
<tr class="separator:a400ff729370cbc9d034a1317beb52665"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e2c78f4b8ede4f26ad2d7306bf3065"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a01e2c78f4b8ede4f26ad2d7306bf3065">StartUntar</a> (const char *dirPath)</td></tr>
<tr class="separator:a01e2c78f4b8ede4f26ad2d7306bf3065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef1a7a8ee915436d0b0d4342ff6bed9e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#aef1a7a8ee915436d0b0d4342ff6bed9e">StartSkipForward</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:aef1a7a8ee915436d0b0d4342ff6bed9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8034359063106564cbed772ea8afa56"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#ae8034359063106564cbed772ea8afa56">StartFirmwareUpdate</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ae8034359063106564cbed772ea8afa56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1836ac9b98efb7230642b41bda3a8969"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a1836ac9b98efb7230642b41bda3a8969">JsonDone</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a1836ac9b98efb7230642b41bda3a8969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e149a372dac8b1129e29bc6fee498f1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a4e149a372dac8b1129e29bc6fee498f1">StringMemberEventHandler</a> (<a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a> event, char *dest, size_t size, const char *memberName)</td></tr>
<tr class="separator:a4e149a372dac8b1129e29bc6fee498f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86756ec55ac466b7060ebf73a4ca84a4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a86756ec55ac466b7060ebf73a4ca84a4">CommandEventHandler</a> (<a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a> event)</td></tr>
<tr class="separator:a86756ec55ac466b7060ebf73a4ca84a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11add1a810b1c4b5bd7159352cdb3778"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a11add1a810b1c4b5bd7159352cdb3778">NameEventHandler</a> (<a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a> event)</td></tr>
<tr class="separator:a11add1a810b1c4b5bd7159352cdb3778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e6c69e09eac27f22ddfb41bf6820b85"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a8e6c69e09eac27f22ddfb41bf6820b85">Md5EventHandler</a> (<a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a> event)</td></tr>
<tr class="separator:a8e6c69e09eac27f22ddfb41bf6820b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179883e12441d593347e670b6da1e38e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a179883e12441d593347e670b6da1e38e">VersionEventHandler</a> (<a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a> event)</td></tr>
<tr class="separator:a179883e12441d593347e670b6da1e38e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab56d7a6f6f7179e1743eb06a4893438c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#ab56d7a6f6f7179e1743eb06a4893438c">SizeEventHandler</a> (<a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a> event)</td></tr>
<tr class="separator:ab56d7a6f6f7179e1743eb06a4893438c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab62bf4c310db0b843bfa23b4cb6c14dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#ab62bf4c310db0b843bfa23b4cb6c14dd">updateUnpack_Start</a> (int <a class="el" href="app_stop_client_8c.html#a44f21d5190b5a6df8089f54799628d7e">fd</a>, <a class="el" href="update_unpack_8h.html#aa86bc2a063363b47f31119e5980fa0be">updateUnpack_ProgressHandler_t</a> progressFunc)</td></tr>
<tr class="separator:ab62bf4c310db0b843bfa23b4cb6c14dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae07976be62595e8c87e1e215fabf6816"><td class="memItemLeft" align="right" valign="top"><a class="el" href="update_unpack_8h.html#a0082ad8447d01c9dcb875120e4b0f149">updateUnpack_Type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#ae07976be62595e8c87e1e215fabf6816">updateUnpack_GetType</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ae07976be62595e8c87e1e215fabf6816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a619fd5b01999112669a40b84a014d305"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a619fd5b01999112669a40b84a014d305">updateUnpack_GetAppName</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a619fd5b01999112669a40b84a014d305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ff00ad6d73e786e32ef0cb61a82214"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a53ff00ad6d73e786e32ef0cb61a82214">updateUnpack_GetAppMd5</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a53ff00ad6d73e786e32ef0cb61a82214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97de39b13eae20b2c6ac20a563675f46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a97de39b13eae20b2c6ac20a563675f46">updateUnpack_Stop</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a97de39b13eae20b2c6ac20a563675f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acb3225fa2c7b5d4838ff3bcf155a65e2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#acb3225fa2c7b5d4838ff3bcf155a65e2">InputFd</a> = -1</td></tr>
<tr class="memdesc:acb3225fa2c7b5d4838ff3bcf155a65e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">File descriptor to read the update pack from.  <a href="#acb3225fa2c7b5d4838ff3bcf155a65e2">More...</a><br /></td></tr>
<tr class="separator:acb3225fa2c7b5d4838ff3bcf155a65e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a6b03259ebec9f756d3111d625d0c0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#ac3a6b03259ebec9f756d3111d625d0c0">InputFdClosed</a> = false</td></tr>
<tr class="separator:ac3a6b03259ebec9f756d3111d625d0c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1cc3f3e12f9ea50d4d48c5b715a5f8a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#ae1cc3f3e12f9ea50d4d48c5b715a5f8a">InputFdMonitor</a> = NULL</td></tr>
<tr class="memdesc:ae1cc3f3e12f9ea50d4d48c5b715a5f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to the FD Monitor for the input stream (NULL if not unpacking).  <a href="#ae1cc3f3e12f9ea50d4d48c5b715a5f8a">More...</a><br /></td></tr>
<tr class="separator:ae1cc3f3e12f9ea50d4d48c5b715a5f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1eeacd276c4e4e82e4e73b1ae036136"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="pipeline_8h.html#adfb885380a9b0f550fafe4de0a2d2564">pipeline_Ref_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#aa1eeacd276c4e4e82e4e73b1ae036136">Pipeline</a> = NULL</td></tr>
<tr class="memdesc:aa1eeacd276c4e4e82e4e73b1ae036136"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to an unpack pipeline (NULL if not unpacking).  <a href="#aa1eeacd276c4e4e82e4e73b1ae036136">More...</a><br /></td></tr>
<tr class="separator:aa1eeacd276c4e4e82e4e73b1ae036136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a788202ae36b0e21a447aeccd2b164778"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a788202ae36b0e21a447aeccd2b164778">PipelineFd</a> = -1</td></tr>
<tr class="memdesc:a788202ae36b0e21a447aeccd2b164778"><td class="mdescLeft">&#160;</td><td class="mdescRight">File descriptor connected to the input of a pipeline (-1 if not unpacking)  <a href="#a788202ae36b0e21a447aeccd2b164778">More...</a><br /></td></tr>
<tr class="separator:a788202ae36b0e21a447aeccd2b164778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05538ca08a8058d84af418cc132979ee"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="update_unpack_8h.html#aa86bc2a063363b47f31119e5980fa0be">updateUnpack_ProgressHandler_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a05538ca08a8058d84af418cc132979ee">ProgressFunc</a> = NULL</td></tr>
<tr class="memdesc:a05538ca08a8058d84af418cc132979ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to be called to report progress.  <a href="#a05538ca08a8058d84af418cc132979ee">More...</a><br /></td></tr>
<tr class="separator:a05538ca08a8058d84af418cc132979ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a868511981ee7cc06621c0279c59eef4f"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a868511981ee7cc06621c0279c59eef4f">Command</a> [32]</td></tr>
<tr class="memdesc:a868511981ee7cc06621c0279c59eef4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The command name found in the JSON update pack section header.  <a href="#a868511981ee7cc06621c0279c59eef4f">More...</a><br /></td></tr>
<tr class="separator:a868511981ee7cc06621c0279c59eef4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a0eb280d526ff327d548c4ceb7219cb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="update_unpack_8h.html#a0082ad8447d01c9dcb875120e4b0f149">updateUnpack_Type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a6a0eb280d526ff327d548c4ceb7219cb">Type</a> = <a class="el" href="update_unpack_8h.html#a0082ad8447d01c9dcb875120e4b0f149a64599dea7071bc28732936e0bfddff3e">TYPE_UNKNOWN</a></td></tr>
<tr class="memdesc:a6a0eb280d526ff327d548c4ceb7219cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">What type of update pack is it?  <a href="#a6a0eb280d526ff327d548c4ceb7219cb">More...</a><br /></td></tr>
<tr class="separator:a6a0eb280d526ff327d548c4ceb7219cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d9ada1781e9dc7819673a6eef60a45d"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a0d9ada1781e9dc7819673a6eef60a45d">AppName</a> [<a class="el" href="limit_8h.html#a3be1f83793d35365d5f9e765e0ffc619">LIMIT_MAX_APP_NAME_BYTES</a>]</td></tr>
<tr class="memdesc:a0d9ada1781e9dc7819673a6eef60a45d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the app being updated/removed.  <a href="#a0d9ada1781e9dc7819673a6eef60a45d">More...</a><br /></td></tr>
<tr class="separator:a0d9ada1781e9dc7819673a6eef60a45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5a99a23f5ea1f4ac499a6efef993202"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#aa5a99a23f5ea1f4ac499a6efef993202">Md5</a> [<a class="el" href="update_unpack_8c.html#aac69c9136e03c0b2c45ce8805907ed0a">MD5_STRING_BYTES</a>]</td></tr>
<tr class="memdesc:aa5a99a23f5ea1f4ac499a6efef993202"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_m_d5.html">MD5</a> hash obtained from a JSON header.  <a href="#aa5a99a23f5ea1f4ac499a6efef993202">More...</a><br /></td></tr>
<tr class="separator:aa5a99a23f5ea1f4ac499a6efef993202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc7a6fe10546ef3d34d1b428914b0cf1"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#acc7a6fe10546ef3d34d1b428914b0cf1">PayloadSize</a></td></tr>
<tr class="memdesc:acc7a6fe10546ef3d34d1b428914b0cf1"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h1>of bytes of payload following the JSON.</h1>
 <a href="#acc7a6fe10546ef3d34d1b428914b0cf1">More...</a><br /></td></tr>
<tr class="separator:acc7a6fe10546ef3d34d1b428914b0cf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6246d1ec2be4de7692b85d7c0538e544"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a6246d1ec2be4de7692b85d7c0538e544">PayloadBytesCopied</a></td></tr>
<tr class="memdesc:a6246d1ec2be4de7692b85d7c0538e544"><td class="mdescLeft">&#160;</td><td class="mdescRight"><h1>of bytes of payload that have been copied to the unpack pipeline.</h1>
 <a href="#a6246d1ec2be4de7692b85d7c0538e544">More...</a><br /></td></tr>
<tr class="separator:a6246d1ec2be4de7692b85d7c0538e544"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249b2310a15273d39627794fa818b230"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#a249b2310a15273d39627794fa818b230">PercentDone</a></td></tr>
<tr class="memdesc:a249b2310a15273d39627794fa818b230"><td class="mdescLeft">&#160;</td><td class="mdescRight">Percentage complete on current task.  <a href="#a249b2310a15273d39627794fa818b230">More...</a><br /></td></tr>
<tr class="separator:a249b2310a15273d39627794fa818b230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc81307c85544e3ad1076e3f7428dbf7"><td class="memItemLeft" align="right" valign="top">static enum  { ... } &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#abc81307c85544e3ad1076e3f7428dbf7">State</a> = <a class="el" href="update_unpack_8c.html#aba01db17f4a2bfbc3db60dc172972a25aaade5e53e88cf231292cd1142cce2afe">STATE_IDLE</a></td></tr>
<tr class="separator:abc81307c85544e3ad1076e3f7428dbf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef55f516e5c0b11b6d384920a488f21"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__json_8h.html#ac245fec94486c2d3a01a270c1188d023">le_json_ParsingSessionRef_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_unpack_8c.html#aaef55f516e5c0b11b6d384920a488f21">ParsingSession</a> = NULL</td></tr>
<tr class="separator:aaef55f516e5c0b11b6d384920a488f21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the Update Pack parser. This file parses an update pack, and drives the rest of the update based on the contents of the update pack.</p>
<p>This is single-threaded, event-driven code that shares the main thread's event loop.</p>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aac69c9136e03c0b2c45ce8805907ed0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MD5_STRING_BYTES&#160;&#160;&#160;33</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An <a class="el" href="class_m_d5.html">MD5</a> hash string is 32 characters long, plus a null terminator. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="aba01db17f4a2bfbc3db60dc172972a25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The state machine looks like this:</p>
<pre class="fragment">  +---------------&lt;--------------+
  |                              |
  +------&lt;------+                |
  |             |                |
  v             |                |
IDLE --&gt; PARSING_JSON --&gt; UNPACKING/SKIPPING_PAYLOAD
                ^                |
                |                |
                +-------&lt;--------+
</pre><p>The transition from PARSING_JSON to UNPACKING_PAYLOAD happens when the JSON header for a section of the update pack has been successfully parsed and all required fields have been extracted from it.</p>
<p>The transition from UNPACKING_PAYLOAD to IDLE happens when the payload has been extracted to the file system.</p>
<p>If there is no payload for a section, then the state machine skips UNPACKING_PAYLOAD and goes back to IDLE from PARSING_JSON.</p>
<p>The transition back from UNPACKING_PAYLOAD to PARSING_JSON happens whenever more JSON data is found after the end of the section that was being applied.</p>
<p>The state machine starts in the IDLE state and returns to the IDLE state whenever an update pack is successfully installed or an error occurs.</p>
<p>If a system update pack contains an app that is already installed on the target, then the payload bytes are read from the input stream and discarded. In this case, the SKIPPING_PAYLOAD state replaces the UNPACKING_PAYLOAD state. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="aba01db17f4a2bfbc3db60dc172972a25aaade5e53e88cf231292cd1142cce2afe"></a>STATE_IDLE&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aba01db17f4a2bfbc3db60dc172972a25a1b23406e8e424c86a5b591a42d554392"></a>STATE_PARSING_JSON&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aba01db17f4a2bfbc3db60dc172972a25ae8e84efeda74ecadb4b8efceb6637c70"></a>STATE_UNPACKING_PAYLOAD&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aba01db17f4a2bfbc3db60dc172972a25ab0ddb806b1210eca2e5550b01d0aa216"></a>STATE_SKIPPING_PAYLOAD&#160;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aeb945b0c33c310c61924d6520b9e01b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> AppUnpackDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when app unpack finishes successfully. </p>

</div>
</div>
<a class="anchor" id="a86756ec55ac466b7060ebf73a4ca84a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> CommandEventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>"command" member parsing event function. </p>

</div>
</div>
<a class="anchor" id="aa263db162496d9e052cc5f827dcaafc5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> CopyBytesToPipeline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copy bytes from the input fd to the pipeline's input fd until the input fd's read buffer is empty or we have copied all the payload bytes. </p>

</div>
</div>
<a class="anchor" id="ac30bbccf87ac6407805396cebbb073ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> DeleteFdMonitor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Delete the FD Monitor object. </p>

</div>
</div>
<a class="anchor" id="a98fd3a53e9feca18bee3040845235737"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> DiscardPayloadBytes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read and discard payload bytes from the input stream until we have discarded all the payload bytes or the input stream doesn't have any more bytes for us right now. </p>

</div>
</div>
<a class="anchor" id="a0f77b31f2db0641fc50dcdff450dc4f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> HandleFormatError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Error handler for problems with the update pack format. </p>

</div>
</div>
<a class="anchor" id="a9dca0898fc9c00c994c5d5d4dddb2e45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> HandleInternalError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Error handler for problems with reading or processing the update pack. </p>

</div>
</div>
<a class="anchor" id="a7d98e2a7e2e36802b4af7092a9e62b7e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> InputFdEventHandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Event handler for the input fd when copying bytes to a pipeline. </p>

</div>
</div>
<a class="anchor" id="a1836ac9b98efb7230642b41bda3a8969"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> JsonDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Handle the end of a JSON header. </p>

</div>
</div>
<a class="anchor" id="a5359da444a6f8e6beb226f88989e69a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> JsonErrorHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__json_8h.html#ae16b8d9006b37bd7efb69869d8b8bc21">le_json_Error_t</a>&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Error handling function called by the JSON parser when an error occurs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Human-readable error message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ace0c2b62f36129558ab8639fdba4c014"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> JsonEventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Event handler function called by the JSON parser when it encounters things during parsing. </p>

</div>
</div>
<a class="anchor" id="a8e6c69e09eac27f22ddfb41bf6820b85"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> Md5EventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>"md5" member parsing event function. </p>

</div>
</div>
<a class="anchor" id="a11add1a810b1c4b5bd7159352cdb3778"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> NameEventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>"name" member parsing event function. </p>

</div>
</div>
<a class="anchor" id="a53606e254b0b90afbf2d499463906303"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> ReportProgress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Report progress. </p>

</div>
</div>
<a class="anchor" id="a792cc9978ec207ea1e8dc62663480b35"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> Reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reset the update unpacker. </p>

</div>
</div>
<a class="anchor" id="ab56d7a6f6f7179e1743eb06a4893438c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> SizeEventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>"size" member parsing event function. </p>

</div>
</div>
<a class="anchor" id="a46e77edc00ef3478a704fdab40087199"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> SkipForwardDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Completion callback for skip forward operation that is done instead of an app unpack + install in the case that an app is already installed. </p>

</div>
</div>
<a class="anchor" id="ae8034359063106564cbed772ea8afa56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> StartFirmwareUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Do a firmware update. </p>

</div>
</div>
<a class="anchor" id="a28cee08301915d7891ef20eed13c1381"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> StartParsing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Start parsing a JSON header. </p>

</div>
</div>
<a class="anchor" id="aef1a7a8ee915436d0b0d4342ff6bed9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> StartSkipForward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Start reading and throwing away payload bytes from the input stream. </p>

</div>
</div>
<a class="anchor" id="a01e2c78f4b8ede4f26ad2d7306bf3065"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> StartUntar </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dirPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Start unpacking a tarball. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dirPath</td><td>Path to the directory to unpack the tarball into. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4e149a372dac8b1129e29bc6fee498f1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> StringMemberEventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>memberName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>String member parsing event function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>Pointer to the buffer where the string should be stored. </td></tr>
    <tr><td class="paramname">size</td><td>Size of the buffer pointed to by dest (bytes). </td></tr>
    <tr><td class="paramname">memberName</td><td>Human-readable string naming the member for error messages. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a400ff729370cbc9d034a1317beb52665"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int Untar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Function that runs in the unpack pipeline's "tar" process. </p>

</div>
</div>
<a class="anchor" id="a2f9b5d92c868a6e6274490f84a7211b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> UntarDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pipeline_8h.html#adfb885380a9b0f550fafe4de0a2d2564">pipeline_Ref_t</a>&#160;</td>
          <td class="paramname"><em>pipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Completion callback for "tar xj" operation. </p>

</div>
</div>
<a class="anchor" id="a53ff00ad6d73e786e32ef0cb61a82214"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* updateUnpack_GetAppMd5 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the <a class="el" href="class_m_d5.html">MD5</a> sum of the app being updated (valid for app update only).</p>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="class_m_d5.html">MD5</a> sum of the app, as a string (valid until next unpack is started). </dd></dl>

</div>
</div>
<a class="anchor" id="a619fd5b01999112669a40b84a014d305"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* updateUnpack_GetAppName </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the name of the app being changed (valid for app update or remove).</p>
<dl class="section return"><dt>Returns</dt><dd>The name of the app (valid until next unpack is started). </dd></dl>

</div>
</div>
<a class="anchor" id="ae07976be62595e8c87e1e215fabf6816"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="update_unpack_8h.html#a0082ad8447d01c9dcb875120e4b0f149">updateUnpack_Type_t</a> updateUnpack_GetType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the type of the update pack (available when 100% done).</p>
<dl class="section return"><dt>Returns</dt><dd>The type of update (firmware, app, or system). </dd></dl>

</div>
</div>
<a class="anchor" id="ab62bf4c310db0b843bfa23b4cb6c14dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> updateUnpack_Start </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="update_unpack_8h.html#aa86bc2a063363b47f31119e5980fa0be">updateUnpack_ProgressHandler_t</a>&#160;</td>
          <td class="paramname"><em>progressFunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts processing an update pack.</p>
<p>Reads the update pack from a given file descriptor.</p>
<p>Calls a callback function to report progress. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File descriptor to read the update pack from. </td></tr>
    <tr><td class="paramname">progressFunc</td><td>Progress reporting callback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a97de39b13eae20b2c6ac20a563675f46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> updateUnpack_Stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop unpacking an update pack. </p>

</div>
</div>
<a class="anchor" id="a179883e12441d593347e670b6da1e38e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> VersionEventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__json_8h.html#afc256534945eddc76d57b21d0938b7a9">le_json_Event_t</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>"version" member parsing event function. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a0d9ada1781e9dc7819673a6eef60a45d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char AppName[<a class="el" href="limit_8h.html#a3be1f83793d35365d5f9e765e0ffc619">LIMIT_MAX_APP_NAME_BYTES</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The name of the app being updated/removed. </p>

</div>
</div>
<a class="anchor" id="a868511981ee7cc06621c0279c59eef4f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char Command[32]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The command name found in the JSON update pack section header. </p>

</div>
</div>
<a class="anchor" id="acb3225fa2c7b5d4838ff3bcf155a65e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int InputFd = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>File descriptor to read the update pack from. </p>

</div>
</div>
<a class="anchor" id="ac3a6b03259ebec9f756d3111d625d0c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool InputFdClosed = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>InputFd could have been closed by the legato messaging infrastructure; and in that case it shouldn't be closed again. </p>

</div>
</div>
<a class="anchor" id="ae1cc3f3e12f9ea50d4d48c5b715a5f8a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> InputFdMonitor = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to the FD Monitor for the input stream (NULL if not unpacking). </p>

</div>
</div>
<a class="anchor" id="aa5a99a23f5ea1f4ac499a6efef993202"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char Md5[<a class="el" href="update_unpack_8c.html#aac69c9136e03c0b2c45ce8805907ed0a">MD5_STRING_BYTES</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="class_m_d5.html">MD5</a> hash obtained from a JSON header. </p>
<p>The system's <a class="el" href="class_m_d5.html">MD5</a> hash. </p>

</div>
</div>
<a class="anchor" id="aaef55f516e5c0b11b6d384920a488f21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__json_8h.html#ac245fec94486c2d3a01a270c1188d023">le_json_ParsingSessionRef_t</a> ParsingSession = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>JSON parsing session. Used to stop parsing early, if necessary.</p>
<p>Only valid in the PARSING_JSON state. </p>

</div>
</div>
<a class="anchor" id="a6246d1ec2be4de7692b85d7c0538e544"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t PayloadBytesCopied</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><h1>of bytes of payload that have been copied to the unpack pipeline.</h1>
</p>

</div>
</div>
<a class="anchor" id="acc7a6fe10546ef3d34d1b428914b0cf1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t PayloadSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><h1>of bytes of payload following the JSON.</h1>
</p>

</div>
</div>
<a class="anchor" id="a249b2310a15273d39627794fa818b230"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int PercentDone</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Percentage complete on current task. </p>

</div>
</div>
<a class="anchor" id="aa1eeacd276c4e4e82e4e73b1ae036136"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pipeline_8h.html#adfb885380a9b0f550fafe4de0a2d2564">pipeline_Ref_t</a> Pipeline = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to an unpack pipeline (NULL if not unpacking). </p>

</div>
</div>
<a class="anchor" id="a788202ae36b0e21a447aeccd2b164778"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PipelineFd = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>File descriptor connected to the input of a pipeline (-1 if not unpacking) </p>

</div>
</div>
<a class="anchor" id="a05538ca08a8058d84af418cc132979ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="update_unpack_8h.html#aa86bc2a063363b47f31119e5980fa0be">updateUnpack_ProgressHandler_t</a> ProgressFunc = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to be called to report progress. </p>

</div>
</div>
<a class="anchor" id="abc81307c85544e3ad1076e3f7428dbf7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum { ... } 
 State</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The state machine looks like this:</p>
<pre class="fragment">  +---------------&lt;--------------+
  |                              |
  +------&lt;------+                |
  |             |                |
  v             |                |
IDLE --&gt; PARSING_JSON --&gt; UNPACKING/SKIPPING_PAYLOAD
                ^                |
                |                |
                +-------&lt;--------+
</pre><p>The transition from PARSING_JSON to UNPACKING_PAYLOAD happens when the JSON header for a section of the update pack has been successfully parsed and all required fields have been extracted from it.</p>
<p>The transition from UNPACKING_PAYLOAD to IDLE happens when the payload has been extracted to the file system.</p>
<p>If there is no payload for a section, then the state machine skips UNPACKING_PAYLOAD and goes back to IDLE from PARSING_JSON.</p>
<p>The transition back from UNPACKING_PAYLOAD to PARSING_JSON happens whenever more JSON data is found after the end of the section that was being applied.</p>
<p>The state machine starts in the IDLE state and returns to the IDLE state whenever an update pack is successfully installed or an error occurs.</p>
<p>If a system update pack contains an app that is already installed on the target, then the payload bytes are read from the input stream and discarded. In this case, the SKIPPING_PAYLOAD state replaces the UNPACKING_PAYLOAD state. </p>

</div>
</div>
<a class="anchor" id="a6a0eb280d526ff327d548c4ceb7219cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="update_unpack_8h.html#a0082ad8447d01c9dcb875120e4b0f149">updateUnpack_Type_t</a> Type = <a class="el" href="update_unpack_8h.html#a0082ad8447d01c9dcb875120e4b0f149a64599dea7071bc28732936e0bfddff3e">TYPE_UNKNOWN</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>What type of update pack is it? </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
