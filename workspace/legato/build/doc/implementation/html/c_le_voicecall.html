<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: Voice Call Service</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('c_le_voicecall.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Voice Call Service </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__voicecall__interface_8h.html">API Reference</a></p>
<hr/>
<p>A voice call is needed for applications that want to establish a voice communication with a remote party. The voice call can be over a mobile network, or over VoIP.</p>
<h1><a class="anchor" id="le_voicecall_binding"></a>
IPC interfaces binding</h1>
<p>All the functions of this API are provided by the <b>voiceCallService</b> application service.</p>
<p>Here's a code sample binding to Voice Call services: </p><pre class="fragment">bindings:
{
   clientExe.clientComponent.le_voicecall -&gt; voiceCallService.le_voicecall
}
</pre><h1><a class="anchor" id="c_le_voicecall_outgoing"></a>
Starting a Voice call</h1>
<p>A voice call can be started using <a class="el" href="le__voicecall__interface_8h.html#a7b4030c0ac2b5d2d5743325d801ca560">le_voicecall_Start()</a> with the destination identifier passed as a parameter.</p>
<dl class="section note"><dt>Note</dt><dd>Available interfaces depend on used platform.</dd></dl>
<p>Before the voice call is started, an application registers a state handler using <a class="el" href="le__voicecall__interface_8h.html#a54875833715ef1f81d78d74cb86d0562">le_voicecall_AddStateHandler()</a>. Once the voice call is established, the handler will be called indicating it's now connected. If the state of the voice call changes, then the handler will be called with the new state. To release a voice call, an application can use <a class="el" href="le__voicecall__interface_8h.html#aa4758e37f80ef9fd410ef0a9731d3797">le_voicecall_End()</a>. Application must use <a class="el" href="le__voicecall__interface_8h.html#adb9eeb5c2e344f72b934dc8b72d3db62">le_voicecall_Delete()</a> to release <a class="el" href="le__voicecall__interface_8h.html#a74c8b6a9f13f7a8ef47b6b1d57d8ab56">le_voicecall_CallRef_t</a> voice call reference object when it is no more used.</p>
<p>If <a class="el" href="le__voicecall__interface_8h.html#aa4758e37f80ef9fd410ef0a9731d3797">le_voicecall_End()</a> failed a LE_VOICECALL_EVENT_END_FAILED event will be sent.</p>
<p>If a voice call is already started when <a class="el" href="le__voicecall__interface_8h.html#a7b4030c0ac2b5d2d5743325d801ca560">le_voicecall_Start()</a> is called(), a new voice call will not be established. Instead, <a class="el" href="le__voicecall__interface_8h.html#a51066eb84677e4d4c5447aaf8dd18ff1ad3c8824924d684995308a9e45af95422">LE_VOICECALL_EVENT_RESOURCE_BUSY</a> event will be sent. This event means call was not processed, while a <a class="el" href="le__voicecall__interface_8h.html#a51066eb84677e4d4c5447aaf8dd18ff1a55cdfb321f8b09d5037edeb1ec6b04e6">LE_VOICECALL_EVENT_TERMINATED</a> event means that the call was not processed and then terminated or failed.</p>
<p>Once an application makes a voice call request, it should monitor the establishment state reported to the registered state handler.</p>
<p>Once the <a class="el" href="le__voicecall__interface_8h.html#a51066eb84677e4d4c5447aaf8dd18ff1ad3cd30048fd3957b80293e876712e79b">LE_VOICECALL_EVENT_CONNECTED</a> voice call event is received by the application, it must get the Rx and Tx audio streams with <a class="el" href="le__voicecall__interface_8h.html#afd7256c9caa5a1cb8ccca588c7913797">le_voicecall_GetRxAudioStream()</a> and <a class="el" href="le__voicecall__interface_8h.html#ab2dc17c9f027ed291576a1b6f6b6fed1">le_voicecall_GetTxAudioStream()</a> functions in order to set up the audio path. The audio path can be set up thanks to the audio API (cf. <a class="el" href="c_audio.html">Audio</a>).</p>
<p>If a <a class="el" href="le__voicecall__interface_8h.html#a51066eb84677e4d4c5447aaf8dd18ff1a55cdfb321f8b09d5037edeb1ec6b04e6">LE_VOICECALL_EVENT_TERMINATED</a> event is received, application can get the termination reason by using <a class="el" href="le__voicecall__interface_8h.html#a1e04e5a857e17e67eb75cd1c6136f163">le_voicecall_GetTerminationReason()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The voice call use the mobile network. VoIP is not yet supported.</dd></dl>
<h1><a class="anchor" id="c_le_voicecall_incoming"></a>
Answering a Voice call</h1>
<p>An Incoming voice call will be notified by an <a class="el" href="le__voicecall__interface_8h.html#a51066eb84677e4d4c5447aaf8dd18ff1abeff6317fd3fa13e2ad42e20da589dc6">LE_VOICECALL_EVENT_INCOMING</a> event on state handler with a Call reference <a class="el" href="le__voicecall__interface_8h.html#a74c8b6a9f13f7a8ef47b6b1d57d8ab56">le_voicecall_CallRef_t()</a>.</p>
<p>Application can answer the call by using <a class="el" href="le__voicecall__interface_8h.html#a9dc899a059b3881edb7da244b8c9fbef">le_voicecall_Answer()</a> or reject the call by using <a class="el" href="le__voicecall__interface_8h.html#aa4758e37f80ef9fd410ef0a9731d3797">le_voicecall_End()</a> passing the call reference <a class="el" href="le__voicecall__interface_8h.html#a74c8b6a9f13f7a8ef47b6b1d57d8ab56">le_voicecall_CallRef_t</a>.</p>
<p>If <a class="el" href="le__voicecall__interface_8h.html#aa4758e37f80ef9fd410ef0a9731d3797">le_voicecall_End()</a> failed a LE_VOICECALL_EVENT_END_FAILED event will be sent. If <a class="el" href="le__voicecall__interface_8h.html#a9dc899a059b3881edb7da244b8c9fbef">le_voicecall_Answer()</a> failed a LE_VOICECALL_EVENT_ANSWER_FAILED event will be sent.</p>
<p>Application have to use <a class="el" href="le__voicecall__interface_8h.html#adb9eeb5c2e344f72b934dc8b72d3db62">le_voicecall_Delete()</a> to release <a class="el" href="le__voicecall__interface_8h.html#a74c8b6a9f13f7a8ef47b6b1d57d8ab56">le_voicecall_CallRef_t</a> voice call reference object when it is no more used.</p>
<hr/>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
