<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: framework/daemons/linux/updateDaemon/app.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('update_daemon_2app_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">app.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &quot;<a class="el" href="legato_8h_source.html">legato.h</a>&quot;</code><br />
<code>#include &quot;interfaces.h&quot;</code><br />
<code>#include &quot;<a class="el" href="limit_8h_source.html">limit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="app_user_8h_source.html">appUser.h</a>&quot;</code><br />
<code>#include &quot;file.h&quot;</code><br />
<code>#include &quot;<a class="el" href="dir_8h_source.html">dir.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="daemons_2linux_2update_daemon_2app_8h_source.html">app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sys_status_8h_source.html">sysStatus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="daemons_2linux_2update_daemon_2system_8h_source.html">system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sup_ctrl_8h_source.html">supCtrl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="inst_stat_8h_source.html">instStat.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="installer_8h_source.html">installer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="smack_8h_source.html">smack.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sys_paths_8h_source.html">sysPaths.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="file_system_8h_source.html">fileSystem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ima_8h_source.html">ima.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad28cbea5b2f409d38ee8373b6ed3f6a2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#ad28cbea5b2f409d38ee8373b6ed3f6a2">ImportConfig</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:ad28cbea5b2f409d38ee8373b6ed3f6a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab51e66da860f8fa9403e8191e8d7aa36"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#ab51e66da860f8fa9403e8191e8d7aa36">ExecInstallHook</a> (const char *userScriptPath)</td></tr>
<tr class="separator:ab51e66da860f8fa9403e8191e8d7aa36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b0994ea4b19e3eecb731a7429c195d0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a1b0994ea4b19e3eecb731a7429c195d0">ExecPreinstallHook</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:a1b0994ea4b19e3eecb731a7429c195d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e7131dacc0a6357f4f68050c44d7539"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a6e7131dacc0a6357f4f68050c44d7539">ExecPostinstallHook</a> (const char *appMd5Ptr)</td></tr>
<tr class="separator:a6e7131dacc0a6357f4f68050c44d7539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f0bb921a0022bcaa42e798064160e76"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a6f0bb921a0022bcaa42e798064160e76">SetSmackPermReadOnlyDir</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:a6f0bb921a0022bcaa42e798064160e76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f17d1fd2e19fbc8f28870bd5fa810d4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a4f17d1fd2e19fbc8f28870bd5fa810d4">SetPermAppWritableDir</a> (const char *appWritableDir, const char *appLabel)</td></tr>
<tr class="separator:a4f17d1fd2e19fbc8f28870bd5fa810d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40306e4cca70c382463e68656d04fc0b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a40306e4cca70c382463e68656d04fc0b">PerformAppUpgrade</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:a40306e4cca70c382463e68656d04fc0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ea8743d86dae157c2238d66101b8e2c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a0ea8743d86dae157c2238d66101b8e2c">PerformAppInstall</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:a0ea8743d86dae157c2238d66101b8e2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a478cd27cba1ee57737d388fd3aa6d935"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a478cd27cba1ee57737d388fd3aa6d935">PerformAppDelete</a> (const char *appMd5Ptr, const char *appNamePtr, <a class="el" href="le__cfg__interface_8h.html#a646829934bb23a878e19ade2c3e01eba">le_cfg_IteratorRef_t</a> i)</td></tr>
<tr class="separator:a478cd27cba1ee57737d388fd3aa6d935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd33cfa945c3ac142ba70db27aff490f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#abd33cfa945c3ac142ba70db27aff490f">app_SetSmackPermReadOnly</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:abd33cfa945c3ac142ba70db27aff490f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75bddf3534b68cb34b45ebc85cfb5664"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a75bddf3534b68cb34b45ebc85cfb5664">app_Exists</a> (const char *md5StrPtr)</td></tr>
<tr class="separator:a75bddf3534b68cb34b45ebc85cfb5664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0305dd523f10ef7195c0396a139c38e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#ab0305dd523f10ef7195c0396a139c38e">app_Hash</a> (const char *appNamePtr, char hashBuffer[<a class="el" href="limit_8h.html#a54afff2397b4c963793b121a90abc1dc">LIMIT_MD5_STR_BYTES</a>])</td></tr>
<tr class="separator:ab0305dd523f10ef7195c0396a139c38e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1191a9b48c2badc6ef1dbcfccaba0fac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a1191a9b48c2badc6ef1dbcfccaba0fac">app_PrepUnpackDir</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a1191a9b48c2badc6ef1dbcfccaba0fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb3d48b159b703d931635ef7b026f7f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#aeb3d48b159b703d931635ef7b026f7f8">app_SetUpAppWriteables</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:aeb3d48b159b703d931635ef7b026f7f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289ac74e5203fd85044eb7d749a5009a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a289ac74e5203fd85044eb7d749a5009a">app_InstallIndividual</a> (const char *appMd5Ptr, const char *appNamePtr)</td></tr>
<tr class="separator:a289ac74e5203fd85044eb7d749a5009a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ff3f06b5329bfe0be75c08ca58eba66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a1ff3f06b5329bfe0be75c08ca58eba66">app_RemoveIndividual</a> (const char *appNamePtr)</td></tr>
<tr class="separator:a1ff3f06b5329bfe0be75c08ca58eba66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6715dece7d0aac8dd2e7247d30ebee00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a6715dece7d0aac8dd2e7247d30ebee00">app_FinishUpdates</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a6715dece7d0aac8dd2e7247d30ebee00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4609f54012aab62e348646736146d073"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a4609f54012aab62e348646736146d073">InstallHookScriptPath</a> = &quot;/legato/systems/current/bin/install-hook&quot;</td></tr>
<tr class="separator:a4609f54012aab62e348646736146d073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2076594302990a4c6ace287bbb4453"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a0d2076594302990a4c6ace287bbb4453">app_UnpackPath</a> = &quot;/legato/apps/unpack&quot;</td></tr>
<tr class="separator:a0d2076594302990a4c6ace287bbb4453"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c3d9f804ba2dcb123232c16f054df7"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#ab9c3d9f804ba2dcb123232c16f054df7">PreInstallPath</a> = &quot;/legato/apps/%s/read-only/script/pre-install&quot;</td></tr>
<tr class="separator:ab9c3d9f804ba2dcb123232c16f054df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bcdd12ac0ba8bce81c4a2b76a84ba3d"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_daemon_2app_8c.html#a3bcdd12ac0ba8bce81c4a2b76a84ba3d">PostInstallPath</a> = &quot;/legato/apps/%s/read-only/script/post-install&quot;</td></tr>
<tr class="separator:a3bcdd12ac0ba8bce81c4a2b76a84ba3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a75bddf3534b68cb34b45ebc85cfb5664"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool app_Exists </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>md5StrPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check to see if the given application exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">md5StrPtr</td><td>The hash of the app to find. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6715dece7d0aac8dd2e7247d30ebee00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> app_FinishUpdates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine if an app update was interrupted, and if so finish it. </p>

</div>
</div>
<a class="anchor" id="ab0305dd523f10ef7195c0396a139c38e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> app_Hash </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>hashBuffer</em>[LIMIT_MD5_STR_BYTES]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the hash ID for the named application.</p>
<p>On return the application's hash is copied into the supplied hashBuffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appNamePtr</td><td>The name of the application to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hashBuffer</td><td>Buffer to hold the application hash ID. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a289ac74e5203fd85044eb7d749a5009a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> app_InstallIndividual </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Install a new individual application update in the current running system.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>LE_OK if successful.</li>
<li>LE_DUPLICATE if requested to install same app.</li>
<li>LE_FAULT for any other failure. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appMd5Ptr</td><td>Hash ID of the application to install. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">appNamePtr</td><td>Name of the application to install. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1191a9b48c2badc6ef1dbcfccaba0fac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> app_PrepUnpackDir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare the app unpack directory for use (delete any old one and create a fresh empty one). </p>

</div>
</div>
<a class="anchor" id="a1ff3f06b5329bfe0be75c08ca58eba66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> app_RemoveIndividual </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove the named app from the current running system.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>LE_OK if successful.</li>
<li>LE_NOT_FOUND if requested to remove non-existent app.</li>
<li>LE_FAULT for any other failure. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appNamePtr</td><td>Name of the app to remove. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abd33cfa945c3ac142ba70db27aff490f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> app_SetSmackPermReadOnly </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setup SMACK permission for contents in app's read-only directory.</p>
<dl class="section return"><dt>Returns</dt><dd>LE_OK if successful, LE_FAULT if fails. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appMd5Ptr</td><td>Hash ID of the application to install. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">appNamePtr</td><td>Name of the application to install. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aeb3d48b159b703d931635ef7b026f7f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> app_SetUpAppWriteables </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set up a given app's writeable files in the "unpack" system.</p>
<p>Files will be copied to the system unpack area based on whether an app with the same name exists in the current system.</p>
<dl class="section warning"><dt>Warning</dt><dd>Assumes the app identified by the hash is installed in /legato/apps/&lt;hash&gt;.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>LE_OK if successful. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appMd5Ptr</td><td>Hash ID of the application to install. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">appNamePtr</td><td>Name of the application to install. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab51e66da860f8fa9403e8191e8d7aa36"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> ExecInstallHook </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>userScriptPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Run the specified install script through the system's hook script.</p>
<dl class="section return"><dt>Returns</dt><dd>LE_OK if the script ran successfully, LE_FAULT otherwise. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">userScriptPath</td><td>Which install hook to execute? </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6e7131dacc0a6357f4f68050c44d7539"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> ExecPostinstallHook </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Execute the application's postinstall hook. Like the preinstall hook, it is the install-hook script that handles the actual execution. </p>

</div>
</div>
<a class="anchor" id="a1b0994ea4b19e3eecb731a7429c195d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> ExecPreinstallHook </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Execute the application's preinstall hook, but only if one is supplied. But even then, there's no guarantee that anything will run as the user has to modify their system file script 'install-hook' so that it will run the executable file passed in. </p>

</div>
</div>
<a class="anchor" id="ad28cbea5b2f409d38ee8373b6ed3f6a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> ImportConfig </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Import an applications configuration into the system config tree, allowing the supervisor to be able to launch this application. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appMd5Ptr</td><td>The <a class="el" href="class_m_d5.html">MD5</a> hash ID for this application. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">appNamePtr</td><td>The user visible name for this application. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a478cd27cba1ee57737d388fd3aa6d935"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> PerformAppDelete </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="le__cfg__interface_8h.html#a646829934bb23a878e19ade2c3e01eba">le_cfg_IteratorRef_t</a>&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform application removal. </p>

</div>
</div>
<a class="anchor" id="a0ea8743d86dae157c2238d66101b8e2c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> PerformAppInstall </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform an application install.</p>
<p>Assumes the app has not been previously installed. </p>

</div>
</div>
<a class="anchor" id="a40306e4cca70c382463e68656d04fc0b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> PerformAppUpgrade </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform an application upgrade. </p>

</div>
</div>
<a class="anchor" id="a4f17d1fd2e19fbc8f28870bd5fa810d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> SetPermAppWritableDir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appWritableDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appLabel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Recursively sets the SMACK permissions for directories under apps writeable directory.</p>
<p>returns LE_OK if successful, LE_FAULT if fails. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appWritableDir</td><td>Path to apps writable directory. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">appLabel</td><td>App SMACK label. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6f0bb921a0022bcaa42e798064160e76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> SetSmackPermReadOnlyDir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appMd5Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appNamePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Recursively sets the permissions for all files and directories in application read-only directory.</p>
<p>returns LE_OK if successful, LE_FAULT if fails. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appMd5Ptr</td><td>Hash ID of the application to install. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">appNamePtr</td><td>Name of the application to install. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a0d2076594302990a4c6ace287bbb4453"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* app_UnpackPath = &quot;/legato/apps/unpack&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>File system path to where apps are unpacked. </p>

</div>
</div>
<a class="anchor" id="a4609f54012aab62e348646736146d073"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* InstallHookScriptPath = &quot;/legato/systems/current/bin/install-hook&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3bcdd12ac0ba8bce81c4a2b76a84ba3d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* PostInstallPath = &quot;/legato/apps/%s/read-only/script/post-install&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab9c3d9f804ba2dcb123232c16f054df7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* PreInstallPath = &quot;/legato/apps/%s/read-only/script/pre-install&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
