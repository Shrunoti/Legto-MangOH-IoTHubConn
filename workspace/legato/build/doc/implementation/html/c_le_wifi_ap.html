<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: WiFi Access Point Service</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('c_le_wifi_ap.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WiFi Access Point Service </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__wifi_ap__interface_8h.html">API Reference</a></p>
<hr/>
<p>This WiFi Service API provides Wifi Access Point setup. Please note that if there is only one wifi hardware the WiFi Access Point cannot be used at the same time as the WiFi Client service.</p>
<h1><a class="anchor" id="le_wifi_binding"></a>
IPC interfaces binding</h1>
<p>Here's a code sample binding to WiFi service: </p><pre class="fragment">bindings:
{
   clientExe.clientComponent.le_wifiAp -&gt; wifiService.le_wifiAp
}
</pre><h1><a class="anchor" id="le_wifiAp_connect_to_ap"></a>
Setting parameters for the Access Point</h1>
<p>Note that these parameters must be set before the access point is started. See each function for its default value.</p>
<p>To set the SSID for the Access Point use the following function:</p><ul>
<li><a class="el" href="le__wifi_ap__interface_8h.html#a0f29690f2a2d01157cc2d9e58d1d5536">le_wifiAp_SetSsid()</a></li>
</ul>
<p>To set the pass phrase prior for the Access Point use the function: Also see <a class="el" href="le__wifi_ap__interface_8h.html#a9d126d5511dae79d2229c48bbcc4dddc">le_wifiAp_SetPreSharedKey()</a>.</p><ul>
<li><a class="el" href="le__wifi_ap__interface_8h.html#a8be6c0c7aad3e14f492898df6f131c5b">le_wifiAp_SetPassPhrase()</a></li>
</ul>
<p>Instead of setting the pass phrase, the Pre Shared Key (PSK), can be set explicitly. To set the Pre Shared Key prior for the Access Point start use the function:</p><ul>
<li><a class="el" href="le__wifi_ap__interface_8h.html#a9d126d5511dae79d2229c48bbcc4dddc">le_wifiAp_SetPreSharedKey()</a></li>
</ul>
<p>Sets the security protocol to use.</p><ul>
<li><a class="el" href="le__wifi_ap__interface_8h.html#a0985bb7661b81c6882a170855c7c8298">le_wifiAp_SetSecurityProtocol()</a></li>
</ul>
<p>Sets is the Access Point should show up in network scans or not.</p><ul>
<li><a class="el" href="le__wifi_ap__interface_8h.html#a53d220d33f1c7d7560605b5bffc13c80">le_wifiAp_SetDiscoverable()</a></li>
</ul>
<p>Sets which channel to use.</p><ul>
<li><a class="el" href="le__wifi_ap__interface_8h.html#a686036419f15a4253c28a41c6d2dc759">le_wifiAp_SetChannel()</a></li>
</ul>
<div class="fragment"><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------------</span><span class="comment"></span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Sets the credentials</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------------</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wifi_ap_test_8c.html#a9931b1b22f7842b4e5e857c037d3b80a">Testle_setCredentials</a></div><div class="line">(</div><div class="line">    <span class="keywordtype">void</span></div><div class="line">)</div><div class="line">{</div><div class="line">    <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(LE_OK == <a class="code" href="le__wifi_ap__interface_8h.html#a8be6c0c7aad3e14f492898df6f131c5b">le_wifiAp_SetPassPhrase</a>(<a class="code" href="wifi_ap_test_8c.html#a6dae61215af0bc9a5f4507b389439073">TEST_PASSPHRASE</a>));</div><div class="line"></div><div class="line">    <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(LE_OK == <a class="code" href="le__wifi_ap__interface_8h.html#a0985bb7661b81c6882a170855c7c8298">le_wifiAp_SetSecurityProtocol</a>(<a class="code" href="wifi_ap_test_8c.html#a807da4648e89f5ecce53c1700120b7b3">TEST_SECU_PROTO</a>));</div><div class="line"></div><div class="line">    <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(LE_OK == <a class="code" href="le__wifi_ap__interface_8h.html#a53d220d33f1c7d7560605b5bffc13c80">le_wifiAp_SetDiscoverable</a>(<span class="keyword">true</span>));</div><div class="line">}</div></div><!-- fragment --> <h1><a class="anchor" id="le_wifiAp_Start"></a>
Starting the WiFi Access Point</h1>
<p>The WiFi Access Point is started with the function <a class="el" href="le__wifi_ap__interface_8h.html#ad21bdeabf6a8c923d246ef3c28ac42a0">le_wifiAp_Start()</a>. Unless values have been changed, default values will be used:</p><ul>
<li><a class="el" href="le__wifi_ap__interface_8h.html#ad21bdeabf6a8c923d246ef3c28ac42a0">le_wifiAp_Start()</a>:</li>
</ul>
<p>To subscribe to wifi events <a class="el" href="le__wifi_ap__interface_8h.html#a1ab6c2c710b61aa9b1abd30535702e38">le_wifiAp_AddNewEventHandler()</a> is to be called.</p><ul>
<li><a class="el" href="le__wifi_ap__interface_8h.html#a1ab6c2c710b61aa9b1abd30535702e38">le_wifiAp_AddNewEventHandler()</a></li>
</ul>
<div class="fragment"><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------------</span><span class="comment"></span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Handler for WiFi client changes</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------------</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wifi_ap_test_8c.html#a7954929c29b59e7288ead4cdbc1cceea">myMsgHandler</a></div><div class="line">(</div><div class="line">    <a class="code" href="le__wifi_ap__interface_8h.html#aeac8ad63bcfc5ee984cdd86ec9f116d5">le_wifiAp_Event_t</a> event,<span class="comment"></span></div><div class="line"><span class="comment">        ///&lt; [IN]</span></div><div class="line"><span class="comment">        ///&lt; WiFi event to process</span></div><div class="line"><span class="comment"></span>    <span class="keywordtype">void</span> *contextPtr<span class="comment"></span></div><div class="line"><span class="comment">        ///&lt; [IN]</span></div><div class="line"><span class="comment">        ///&lt; Associated event context</span></div><div class="line"><span class="comment"></span>)</div><div class="line">{</div><div class="line">    <a class="code" href="le__log_8h.html#a23e6d206faa64f612045d688cdde5808">LE_INFO</a>(<span class="stringliteral">&quot;WiFi access point event received&quot;</span>);</div><div class="line">    <span class="keywordflow">switch</span>(event)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="le__wifi_ap__interface_8h.html#aeac8ad63bcfc5ee984cdd86ec9f116d5a77e1636cb334d7bdde04761d333ff284">LE_WIFIAP_EVENT_CLIENT_CONNECTED</a>:</div><div class="line">        {</div><div class="line">            <span class="comment">// Client connected to AP</span></div><div class="line">            <a class="code" href="le__log_8h.html#a23e6d206faa64f612045d688cdde5808">LE_INFO</a>(<span class="stringliteral">&quot;LE_WIFIAP_EVENT_CLIENT_CONNECTED&quot;</span>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="le__wifi_ap__interface_8h.html#aeac8ad63bcfc5ee984cdd86ec9f116d5a6d0e05c5fb1ec89d873b96dae320ca6e">LE_WIFIAP_EVENT_CLIENT_DISCONNECTED</a>:</div><div class="line">        {</div><div class="line">            <span class="comment">// Client disconnected from AP</span></div><div class="line">            <a class="code" href="le__log_8h.html#a23e6d206faa64f612045d688cdde5808">LE_INFO</a>(<span class="stringliteral">&quot;LE_WIFICLIENT_EVENT_DISCONNECTED&quot;</span>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <a class="code" href="le__log_8h.html#a353590f91b3143a7ba3a416ae5a50c3d">LE_ERROR</a>(<span class="stringliteral">&quot;ERROR Unknown event %d&quot;</span>, event);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------------</span><span class="comment"></span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Tests the WiFi access point.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="wifi_ap_test_8c.html#af54714520578f74d1cf0ef5e94b69580">Testle_wifiApStart</a></div><div class="line">(</div><div class="line">    <span class="keywordtype">void</span></div><div class="line">)</div><div class="line">{</div><div class="line">    <a class="code" href="le__log_8h.html#a23e6d206faa64f612045d688cdde5808">LE_INFO</a>(<span class="stringliteral">&quot;Start Test WiFi access point&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Add an handler function to handle message reception</span></div><div class="line">    <a class="code" href="wifi_ap_test_8c.html#a4feef0350bb13f381aeb3c7da44d3cff">HdlrRef</a>=<a class="code" href="le__wifi_ap__interface_8h.html#a1ab6c2c710b61aa9b1abd30535702e38">le_wifiAp_AddNewEventHandler</a>(<a class="code" href="wifi_ap_test_8c.html#a7954929c29b59e7288ead4cdbc1cceea">myMsgHandler</a>, NULL);</div><div class="line"></div><div class="line">    <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(<a class="code" href="wifi_ap_test_8c.html#a4feef0350bb13f381aeb3c7da44d3cff">HdlrRef</a> != NULL);</div><div class="line"></div><div class="line">    <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(LE_OK == <a class="code" href="le__wifi_ap__interface_8h.html#a0f29690f2a2d01157cc2d9e58d1d5536">le_wifiAp_SetSsid</a>(<a class="code" href="wifi_ap_test_8c.html#a335b2cd4530be7a317d87309d45547d3">TEST_SSID</a>, <a class="code" href="wifi_ap_test_8c.html#a2b5996c63554462967e792e3d2af1d43">TEST_SSID_NBR_BYTES</a>));</div><div class="line"></div><div class="line">    <a class="code" href="wifi_ap_test_8c.html#a9931b1b22f7842b4e5e857c037d3b80a">Testle_setCredentials</a>();</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (LE_OK == <a class="code" href="le__wifi_ap__interface_8h.html#ad21bdeabf6a8c923d246ef3c28ac42a0">le_wifiAp_Start</a>())</div><div class="line">    {</div><div class="line">        <a class="code" href="le__log_8h.html#a23e6d206faa64f612045d688cdde5808">LE_INFO</a>(<span class="stringliteral">&quot;Start OK&quot;</span>);</div><div class="line"></div><div class="line">        <a class="code" href="wifi_ap_test_8c.html#a8db54809e253aac845145cd6e99a1dc9">Testle_startDhcpServerAndbridgeConnection</a>();</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <a class="code" href="le__log_8h.html#a353590f91b3143a7ba3a416ae5a50c3d">LE_ERROR</a>(<span class="stringliteral">&quot;Start ERROR&quot;</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="le__log_8h.html#ac0dbbef91dc0fed449d0092ff0557b39">LE_ASSERT</a>(LE_OK == <a class="code" href="le__wifi_ap__interface_8h.html#ae2d9ae8853b403f7778dcf74fb2002e6">le_wifiAp_SetIpRange</a>(<a class="code" href="wifi_ap_test_8c.html#a71a61eebd498fbee1f4f6f0d2fb26c5f">HOST_IP</a>, <a class="code" href="wifi_ap_test_8c.html#a50af0bc284adccb9359530fc68e63794">IP_RANGE_START</a>, <a class="code" href="wifi_ap_test_8c.html#af6cdee9f0369ee747f9dfbc4e99a1f27">IP_RANGE_END</a>));</div><div class="line">}</div></div><!-- fragment --> <hr/>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
