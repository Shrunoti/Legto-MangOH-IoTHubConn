<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: Firmware Update API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('c_fwupdate.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Firmware Update API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__fwupdate__interface_8h.html">API Reference</a></p>
<hr/>
<p>Firmware update allows the various firmware images to be updated from the application processor. This may include the modem bootloader, modem firmware, and linux image, where the linux image consists of the linux bootloader, linux kernel, and linux rootfs.</p>
<p>Firmware update is useful when the image comes from an alternative source, rather than as an over-the-air update through the AirVantage service.</p>
<h1><a class="anchor" id="le_fwupdate_binding"></a>
IPC interfaces binding</h1>
<p>All the functions of this API are provided by the <b>le_fwupdate</b> service.</p>
<p>Here's a code sample binding to the le_fwupdate service: </p><pre class="fragment">bindings:
{
   clientExe.clientComponent.le_fwupdate -&gt; fwupdateService.le_fwupdate
}
</pre><dl class="section warning"><dt>Warning</dt><dd>All of these APIs are not available for all platforms. Please refer to the Product Technical specification document of your platform for further details. Please refer to <a class="el" href="platformConstraintsDualSys.html">Dual System mechanism</a> for details on Dual System.</dd></dl>
<h1><a class="anchor" id="le_fwupdate_image"></a>
Update Firmware Image</h1>
<p>The firmware update process is started by calling <a class="el" href="le__fwupdate__interface_8h.html#ab68f3a7c5d4284306468e888bf6a8796">le_fwupdate_Download()</a>. This function takes a file descriptor, rather than a file, to provide flexibility in the source of the image. In particular, this can be used to stream the image, rather than having to save it on the file system before doing the update.</p>
<p>On platform which does not support dual system, when the image is successfully downloaded, a reset will occur in order to apply the update. This will reset all processors. After the application processor has restarted, the <a class="el" href="c_info.html#le_info_version">Query Firmware Version</a> APIs can be used to determine whether the firmware has been updated to the new version.</p>
<p>On platform which supports dual system, if the image is successfully downloaded, the user needs to swap the systems in order to use the updated system. This will reset all processors. After the application processor has restarted, the <a class="el" href="c_info.html#le_info_version">Query Firmware Version</a> APIs can be used to determine whether the firmware has been updated to the new version.</p>
<h1><a class="anchor" id="le_fwupdate_resume"></a>
Update Firmware Image Download Resume</h1>
<p>During the download, the flash programming position is saved. Thanks to this position, fwupdate service is able to resume the download without downloading the update package at the beginning.</p>
<p>By default, the fwupdate service download API is resuming the previous download: new data received through this API will be programmed at the resume position.</p>
<dl class="section note"><dt>Note</dt><dd>A download can be resumed when:<ul>
<li><a class="el" href="le__fwupdate__interface_8h.html#ab68f3a7c5d4284306468e888bf6a8796">le_fwupdate_Download()</a> API has previously returned LE_CLOSED or LE_TIMEOUT</li>
<li>A reset occured during last <a class="el" href="le__fwupdate__interface_8h.html#ab68f3a7c5d4284306468e888bf6a8796">le_fwupdate_Download()</a> processing (Legato/full system reset)</li>
<li>No resume can be performed in other cases.</li>
</ul>
</dd></dl>
<p>A complete download can be forced by calling <a class="el" href="le__fwupdate__interface_8h.html#a481234992a0fbc18f97c88f68dc00837">le_fwupdate_InitDownload()</a>. Resume position is set to 0.</p>
<p>The current resume position can be retrieved by calling <a class="el" href="le__fwupdate__interface_8h.html#a6629d3f730bfcea4843a3cfe3d457bcd">le_fwupdate_GetResumePosition()</a>.</p>
<hr/>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
