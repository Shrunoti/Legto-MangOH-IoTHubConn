<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: framework/daemons/linux/updateDaemon/updateCtrl.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('update_ctrl_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">updateCtrl.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="legato_8h_source.html">legato.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="limit_8h_source.html">limit.h</a>&quot;</code><br />
<code>#include &quot;interfaces.h&quot;</code><br />
<code>#include &quot;<a class="el" href="sys_status_8h_source.html">sysStatus.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="daemons_2linux_2update_daemon_2system_8h_source.html">system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="update_ctrl_8h_source.html">updateCtrl.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_client_lock_count_obj__t.html">ClientLockCountObj_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acc33b4816e0349898651174a9d931b16"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#acc33b4816e0349898651174a9d931b16">UPDATECTRL_HASTABLE_WIDTH</a>&#160;&#160;&#160;31</td></tr>
<tr class="memdesc:acc33b4816e0349898651174a9d931b16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Width of the hash table (s/b prime)  <a href="#acc33b4816e0349898651174a9d931b16">More...</a><br /></td></tr>
<tr class="separator:acc33b4816e0349898651174a9d931b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aede1713464b3aae88fb03212b8b02037"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#aede1713464b3aae88fb03212b8b02037">updateCtrl_SetProbationExpiryCallBack</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>(*probationExpiryCallback)(<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>))</td></tr>
<tr class="separator:aede1713464b3aae88fb03212b8b02037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a8723a809719621248a6205cf400b9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#ac3a8723a809719621248a6205cf400b9">FreeDeadClientLockObjs</a> (<a class="el" href="le__messaging_8h.html#aebfc01e15b430a5b4f3038a5bd518904">le_msg_SessionRef_t</a> <a class="el" href="log_tool_8c.html#a0ba04d68f0faec00ca0db1c014f248be">sessionRef</a>, <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *contextPtr)</td></tr>
<tr class="separator:ac3a8723a809719621248a6205cf400b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a265c2440707691e6e44c2f094a2e4e40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a265c2440707691e6e44c2f094a2e4e40">updateCtrl_Initialize</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a265c2440707691e6e44c2f094a2e4e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b8617d60b759e8cdf3dfef53e0d205"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="struct_client_lock_count_obj__t.html">ClientLockCountObj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a48b8617d60b759e8cdf3dfef53e0d205">CreateClientLockCountObj</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a48b8617d60b759e8cdf3dfef53e0d205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c48ca77671099062b6a932e420c27af"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a4c48ca77671099062b6a932e420c27af">IncrementProbationLocks</a> (pid_t clientPid)</td></tr>
<tr class="separator:a4c48ca77671099062b6a932e420c27af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a004d5db51a1858b54efab5542ff0b17c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a004d5db51a1858b54efab5542ff0b17c">DecrementProbationLocks</a> (pid_t clientPid)</td></tr>
<tr class="separator:a004d5db51a1858b54efab5542ff0b17c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d816d1fa1545e94a2f401047c37d46"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a89d816d1fa1545e94a2f401047c37d46">IsClientProbationLocked</a> (pid_t clientPid)</td></tr>
<tr class="separator:a89d816d1fa1545e94a2f401047c37d46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bf36729960d76d7fc453189f0716f06"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a6bf36729960d76d7fc453189f0716f06">IncrementDefers</a> (pid_t clientPid)</td></tr>
<tr class="separator:a6bf36729960d76d7fc453189f0716f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64aeca37362a138a31e307d0368d8048"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a64aeca37362a138a31e307d0368d8048">DecrementDefers</a> (pid_t clientPid)</td></tr>
<tr class="separator:a64aeca37362a138a31e307d0368d8048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a070d4a3b264b10ea6c7b4d9509f8cb41"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a070d4a3b264b10ea6c7b4d9509f8cb41">IsClientDeferring</a> (pid_t clientPid)</td></tr>
<tr class="separator:a070d4a3b264b10ea6c7b4d9509f8cb41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0d666acf469d56e7fefb046da8b2e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a7d0d666acf469d56e7fefb046da8b2e9">updateCtrl_HasDefers</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a7d0d666acf469d56e7fefb046da8b2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab041bfacd3b38c7678ced585d3dee652"><td class="memItemLeft" align="right" valign="top">static pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#ab041bfacd3b38c7678ced585d3dee652">GetClientPid</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ab041bfacd3b38c7678ced585d3dee652"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a580f6f9e5dfad065ac68bd887a0c412c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a580f6f9e5dfad065ac68bd887a0c412c">updateCtrl_IsProbationLocked</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a580f6f9e5dfad065ac68bd887a0c412c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdbc9dcc05455f0dd1020b875909c3ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#acdbc9dcc05455f0dd1020b875909c3ed">le_updateCtrl_Defer</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:acdbc9dcc05455f0dd1020b875909c3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3955f0e34df43a5fbe3e9eae16040d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#ab3955f0e34df43a5fbe3e9eae16040d4">le_updateCtrl_Allow</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ab3955f0e34df43a5fbe3e9eae16040d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e55c6e0ee5c2cf52e6fcb75a9db87e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a88e55c6e0ee5c2cf52e6fcb75a9db87e">le_updateCtrl_LockProbation</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a88e55c6e0ee5c2cf52e6fcb75a9db87e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ba5ace59bfe352c518c3f1eae6d0448"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a4ba5ace59bfe352c518c3f1eae6d0448">le_updateCtrl_UnlockProbation</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a4ba5ace59bfe352c518c3f1eae6d0448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78adc7ec4e0dbcc2ee05d3fe5b83185"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#aa78adc7ec4e0dbcc2ee05d3fe5b83185">LogLock</a> (const <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *keyPtr, const <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *valuePtr, <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *contextPtr)</td></tr>
<tr class="separator:aa78adc7ec4e0dbcc2ee05d3fe5b83185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eaa5f533d5d677397642c7b44ce7bb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a8eaa5f533d5d677397642c7b44ce7bb3">le_updateCtrl_MarkGood</a> (bool force)</td></tr>
<tr class="separator:a8eaa5f533d5d677397642c7b44ce7bb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270db6f26ee8cdb53c78ef73da4593f8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a270db6f26ee8cdb53c78ef73da4593f8">BeginRollBack</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a270db6f26ee8cdb53c78ef73da4593f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f6a3bf7a830eb04823ea6188c12109c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a9f6a3bf7a830eb04823ea6188c12109c">le_updateCtrl_FailProbation</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a9f6a3bf7a830eb04823ea6188c12109c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab68e770c5caa42a6cd463a2827fe371e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__update_ctrl__interface_8h.html#a0e65bfd2d86ab1ad2ee2e5fafae461ee">le_updateCtrl_SystemState_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#ab68e770c5caa42a6cd463a2827fe371e">le_updateCtrl_GetSystemState</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:ab68e770c5caa42a6cd463a2827fe371e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af0793e3619759c1142ca378687589d59"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#af0793e3619759c1142ca378687589d59">AggregateProbationLockCount</a> = 0</td></tr>
<tr class="memdesc:af0793e3619759c1142ca378687589d59"><td class="mdescLeft">&#160;</td><td class="mdescRight">current count of locks held by all clients  <a href="#af0793e3619759c1142ca378687589d59">More...</a><br /></td></tr>
<tr class="separator:af0793e3619759c1142ca378687589d59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a788d345a92c63187f7eccd21945d66f6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a788d345a92c63187f7eccd21945d66f6">AggregateDeferCount</a> = 0</td></tr>
<tr class="memdesc:a788d345a92c63187f7eccd21945d66f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">count of all client update defers  <a href="#a788d345a92c63187f7eccd21945d66f6">More...</a><br /></td></tr>
<tr class="separator:a788d345a92c63187f7eccd21945d66f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f6f95efddba30fdc06a43632bdd1882"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a6f6f95efddba30fdc06a43632bdd1882">ProbationExpiryCallback</a> )(<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>) = NULL</td></tr>
<tr class="separator:a6f6f95efddba30fdc06a43632bdd1882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0d55f4746ff77baeb44c91328c918b4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#ac0d55f4746ff77baeb44c91328c918b4">DeferredFailCallback</a> )(<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>) = NULL</td></tr>
<tr class="separator:ac0d55f4746ff77baeb44c91328c918b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345f086c57039cac17fffb6b3b134f37"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__mem_8h.html#a44a896f6a0a1a8c733e8038eb332989e">le_mem_PoolRef_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a345f086c57039cac17fffb6b3b134f37">UpdateCtrlPool</a></td></tr>
<tr class="memdesc:a345f086c57039cac17fffb6b3b134f37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mem pool to alloc lock count objects from.  <a href="#a345f086c57039cac17fffb6b3b134f37">More...</a><br /></td></tr>
<tr class="separator:a345f086c57039cac17fffb6b3b134f37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1852f0534559b53bfb5ec46630af1cb2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__hashmap_8h.html#ae81c60860dbdb8c59beaf25985e5605a">le_hashmap_Ref_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_ctrl_8c.html#a1852f0534559b53bfb5ec46630af1cb2">ClientLockCountsContainer</a></td></tr>
<tr class="memdesc:a1852f0534559b53bfb5ec46630af1cb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Container used to store lock count objects.  <a href="#a1852f0534559b53bfb5ec46630af1cb2">More...</a><br /></td></tr>
<tr class="separator:a1852f0534559b53bfb5ec46630af1cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>For useage and information on updateCtrl see .api</p>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="acc33b4816e0349898651174a9d931b16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UPDATECTRL_HASTABLE_WIDTH&#160;&#160;&#160;31</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Width of the hash table (s/b prime) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a270db6f26ee8cdb53c78ef73da4593f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> BeginRollBack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>We have marked the current system bad. To begin the roll back all we do is restart the framework. </p>

</div>
</div>
<a class="anchor" id="a48b8617d60b759e8cdf3dfef53e0d205"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="struct_client_lock_count_obj__t.html">ClientLockCountObj_t</a>* CreateClientLockCountObj </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Construct a clean client lock count object </p>

</div>
</div>
<a class="anchor" id="a64aeca37362a138a31e307d0368d8048"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> DecrementDefers </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>clientPid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If the pid has a probation defer count, decrement it. If the lock object for the process now has no counts for either probation or defers, delete it and free its storage. </p>

</div>
</div>
<a class="anchor" id="a004d5db51a1858b54efab5542ff0b17c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> DecrementProbationLocks </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>clientPid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If the pid has a probation lock count, decrement it. If the lock object for the process now has no counts for either probation or defers, delete it and free its storage. </p>

</div>
</div>
<a class="anchor" id="ac3a8723a809719621248a6205cf400b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> FreeDeadClientLockObjs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__messaging_8h.html#aebfc01e15b430a5b4f3038a5bd518904">le_msg_SessionRef_t</a>&#160;</td>
          <td class="paramname"><em>sessionRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>contextPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>When a client dies deallocate any storage we allocated to store its counts.</p>
<dl class="section note"><dt>Note</dt><dd>If a client dies while holding probation-locks, it is better to let the framework reboot (to avoid marking system good despite of failure) at its earliest convenience. However, if a client dies while holding defer-locks, it is probably OK to release the defer-locks (held by dead client) without reboot. </dd></dl>

</div>
</div>
<a class="anchor" id="ab041bfacd3b38c7678ced585d3dee652"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pid_t GetClientPid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the PID of the calling client </p>

</div>
</div>
<a class="anchor" id="a6bf36729960d76d7fc453189f0716f06"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> IncrementDefers </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>clientPid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If the pid has a lock object, increment the defer count, else create a lock object for the process and set the defer coutn to 1. </p>

</div>
</div>
<a class="anchor" id="a4c48ca77671099062b6a932e420c27af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> IncrementProbationLocks </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>clientPid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If the pid has a lock object, increment the probation locks, else create a lock object for the process and set the probation lock to 1. </p>

</div>
</div>
<a class="anchor" id="a070d4a3b264b10ea6c7b4d9509f8cb41"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool IsClientDeferring </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>clientPid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Does the client have a defer count?</p>
<dl class="section return"><dt>Returns</dt><dd>true if the client is deferring updates </dd></dl>

</div>
</div>
<a class="anchor" id="a89d816d1fa1545e94a2f401047c37d46"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool IsClientProbationLocked </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>clientPid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Does the client hold a probation lock?</p>
<dl class="section return"><dt>Returns</dt><dd>true if the client holds a probation lock </dd></dl>

</div>
</div>
<a class="anchor" id="ab3955f0e34df43a5fbe3e9eae16040d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_updateCtrl_Allow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allow updates to go ahead. </p>

</div>
</div>
<a class="anchor" id="acdbc9dcc05455f0dd1020b875909c3ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_updateCtrl_Defer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prevent all updates (and roll-backs) until further notice. </p>

</div>
</div>
<a class="anchor" id="a9f6a3bf7a830eb04823ea6188c12109c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_updateCtrl_FailProbation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Marks the system "bad" and triggers a roll-back to a "good" system.</p>
<dl class="section note"><dt>Note</dt><dd>Ignored if the probation period has already ended. Also, the roll-back may be delayed if someone is deferring updates using <a class="el" href="update_ctrl_8c.html#acdbc9dcc05455f0dd1020b875909c3ed">le_updateCtrl_Defer()</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ab68e770c5caa42a6cd463a2827fe371e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__update_ctrl__interface_8h.html#a0e65bfd2d86ab1ad2ee2e5fafae461ee">le_updateCtrl_SystemState_t</a> le_updateCtrl_GetSystemState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current system state.</p>
<dl class="section note"><dt>Note</dt><dd>Can only be called if updates have been deferred or if a probation lock is held. Otherwise the system state could change between the time this function is called and when the return value is checked. </dd></dl>

</div>
</div>
<a class="anchor" id="a88e55c6e0ee5c2cf52e6fcb75a9db87e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool le_updateCtrl_LockProbation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prevent the probation period from ending.</p>
<dl class="section note"><dt>Note</dt><dd>Ignored if the probation period has already ended. </dd></dl>

</div>
</div>
<a class="anchor" id="a8eaa5f533d5d677397642c7b44ce7bb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> le_updateCtrl_MarkGood </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Marks the system "good", ending the probation period.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>LE_OK The system was marked Good</li>
<li>LE_BUSY Someone holds a probation lock</li>
<li>LE_DUPLICATE Probation has expired - the system has already been marked </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">force</td><td>True to set system Good even if someone holds a probation lock </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4ba5ace59bfe352c518c3f1eae6d0448"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_updateCtrl_UnlockProbation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancels a call to LockProbation(), allow the probation period to end.</p>
<dl class="section note"><dt>Note</dt><dd>Ignored if the probation period has already ended. </dd></dl>

</div>
</div>
<a class="anchor" id="aa78adc7ec4e0dbcc2ee05d3fe5b83185"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool LogLock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>keyPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>valuePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>contextPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Log any processes holding probation locks </p>

</div>
</div>
<a class="anchor" id="a7d0d666acf469d56e7fefb046da8b2e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool updateCtrl_HasDefers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check for defer counts for any processes that we have records for. </p><dl class="section return"><dt>Returns</dt><dd><ul>
<li>true At least one process holds at least one defer.</li>
<li>false No defers are found. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a265c2440707691e6e44c2f094a2e4e40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> updateCtrl_Initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the mem pool so we can allocate our counter objects and set up the hash we will store them in. This will be done in a lazy way. We will only do the work of initializing if someone actually want to use this. </p>

</div>
</div>
<a class="anchor" id="a580f6f9e5dfad065ac68bd887a0c412c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool updateCtrl_IsProbationLocked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called from the probation timout handler to determine whether it is OK to mark the system "good".</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>true If probation is locked</li>
<li>false Probation is not locked </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="aede1713464b3aae88fb03212b8b02037"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> updateCtrl_SetProbationExpiryCallBack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>(*)(<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)&#160;</td>
          <td class="paramname"><em>probationExpiryCallback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a callback to call for when all probation locks are removed. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a788d345a92c63187f7eccd21945d66f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int AggregateDeferCount = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>count of all client update defers </p>

</div>
</div>
<a class="anchor" id="af0793e3619759c1142ca378687589d59"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int AggregateProbationLockCount = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>current count of locks held by all clients </p>

</div>
</div>
<a class="anchor" id="a1852f0534559b53bfb5ec46630af1cb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__hashmap_8h.html#ae81c60860dbdb8c59beaf25985e5605a">le_hashmap_Ref_t</a> ClientLockCountsContainer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Container used to store lock count objects. </p>

</div>
</div>
<a class="anchor" id="ac0d55f4746ff77baeb44c91328c918b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>(* DeferredFailCallback) (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>) = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If the updateDaemon tries to fail/rollback the system while a defer is in effect, it will set this callback. When the defer is lifted we will call back to let the fail proceed. </p>

</div>
</div>
<a class="anchor" id="a6f6f95efddba30fdc06a43632bdd1882"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>(* ProbationExpiryCallback) (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>) = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update Dameon will set this callback if it tries to expire probation while it is locked. We callback if/when all prbation locks are revoked. </p>

</div>
</div>
<a class="anchor" id="a345f086c57039cac17fffb6b3b134f37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__mem_8h.html#a44a896f6a0a1a8c733e8038eb332989e">le_mem_PoolRef_t</a> UpdateCtrlPool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mem pool to alloc lock count objects from. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
