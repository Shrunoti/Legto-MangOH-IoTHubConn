<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: Remote SIM service</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('c_rsim.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Remote SIM service </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__rsim__interface_8h.html">API Reference</a></p>
<hr/>
<p>The remote SIM (RSIM) service allows using a remote SIM instead of the internal SIM cards.</p>
<p>This service allows a user application to convey APDU requests to the remote SIM and APDU responses to the modem through the RSIM service. The link between the application and the RSIM service is based on the SIM Access Profile (SAP) specification: the user application must therefore implement a remote SIM server supporting this specification to handle the remote SIM card.</p>
<div align="center">
<img src="le_rsim_Overview.png" />
</div>
<dl class="section note"><dt>Note</dt><dd>The remote SIM Server application is not part of the Legato implementation and should be developed by the user.</dd></dl>
<h1><a class="anchor" id="le_rsim_binding"></a>
IPC interfaces binding</h1>
<p>All the functions of this API are provided by the <b>modemService</b> application service.</p>
<p>Here's a code sample binding to Data Connection services: </p><pre class="fragment">bindings:
{
   clientExe.clientComponent.le_rsim -&gt; modemService.le_rsim
}
</pre><h1><a class="anchor" id="le_rsim_Communication"></a>
Communication</h1>
<p>The communication between the application and the remote SIM service uses the SIM Access Profile (SAP) protocol.</p>
<p>The latest <a href="https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=158740">V11r00 SAP specification</a> is supported by the remote SIM service. All client-mandatory features and some optional features are supported. The table below summarizes all SAP messages supported by the remote SIM service. </p><table class="doxtable">
<tr>
<th>Feature </th><th>Associated SAP messages </th><th>Support in SAP client </th><th>RSIM support </th></tr>
<tr>
<td rowspan="5">Connection management </td><td>CONNECT_REQ </td><td rowspan="5">Mandatory </td><td>Supported </td></tr>
<tr>
<td>CONNECT_RESP </td><td>Supported </td></tr>
<tr>
<td>DISCONNECT_REQ </td><td>Supported </td></tr>
<tr>
<td>DISCONNECT_RESP </td><td>Supported </td></tr>
<tr>
<td>DISCONNECT_IND </td><td>Supported </td></tr>
<tr>
<td rowspan="2">Transfer APDU </td><td>TRANSFER_APDU_REQ </td><td rowspan="2">Mandatory </td><td>Supported </td></tr>
<tr>
<td>TRANSFER_APDU_RESP </td><td>Supported </td></tr>
<tr>
<td rowspan="2">Transfer ATR </td><td>TRANSFER_ATR_REQ </td><td rowspan="2">Mandatory </td><td>Supported </td></tr>
<tr>
<td>TRANSFER_ATR_RESP </td><td>Supported </td></tr>
<tr>
<td rowspan="2">Power SIM off </td><td>POWER_SIM_OFF_REQ </td><td rowspan="2">Optional </td><td>Supported </td></tr>
<tr>
<td>POWER_SIM_OFF_RESP </td><td>Supported </td></tr>
<tr>
<td rowspan="2">Power SIM on </td><td>POWER_SIM_ON_REQ </td><td rowspan="2">Mandatory </td><td>Supported </td></tr>
<tr>
<td>POWER_SIM_ON_RESP </td><td>Supported </td></tr>
<tr>
<td rowspan="2">Reset SIM </td><td>RESET_SIM_REQ </td><td rowspan="2">Optional </td><td>Supported </td></tr>
<tr>
<td>RESET_SIM_RESP </td><td>Supported </td></tr>
<tr>
<td>Report Status </td><td>STATUS_IND </td><td>Mandatory </td><td>Supported </td></tr>
<tr>
<td rowspan="2">Transfer Card Reader Status </td><td>TRANSFER_CARD_READER_STATUS_REQ </td><td rowspan="2">Optional </td><td>Not supported </td></tr>
<tr>
<td>TRANSFER_CARD_READER_STATUS_RESP </td><td>Not supported </td></tr>
<tr>
<td>Error handling </td><td>ERROR_RESP </td><td>Mandatory </td><td>Supported </td></tr>
<tr>
<td rowspan="2">Set Transport Protocol </td><td>SET_TRANSPORT_PROTOCOL_REQ </td><td rowspan="2">Optional </td><td>Not supported </td></tr>
<tr>
<td>SET_TRANSPORT_PROTOCOL_RESP </td><td>Not supported </td></tr>
</table>
<p>The application must register a handler function with <a class="el" href="le__rsim__interface_8h.html#a7c525d3f8a02a4ca14e4fb723b6cc673">le_rsim_AddMessageHandler()</a> in order to receive the SAP messages sent by the remote SIM service. Registering the handler indicates that the remote SIM server is ready to receive messages and that a remote SIM card is available. The handler can be deregistered through the <a class="el" href="le__rsim__interface_8h.html#ad488fe9d57c161a8c17ac60bda891817">le_rsim_RemoveMessageHandler()</a> function when it is not needed anymore.</p>
<p>The application can send SAP messages to the remote SIM service with the <a class="el" href="le__rsim__interface_8h.html#ace5e9e861ab59d4ec8e6198b827a5c28">le_rsim_SendMessage()</a> function. Message sending is an asynchronous process: a callback can therefore be passed to <a class="el" href="le__rsim__interface_8h.html#ace5e9e861ab59d4ec8e6198b827a5c28">le_rsim_SendMessage()</a> in order to receive the sending result for this message.</p>
<dl class="section warning"><dt>Warning</dt><dd>The remote SIM service supports only one remote SIM card and can therefore be connected with only one application.</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The remote SIM service has to be supported by the modem to be used: check your platform documentation.</li>
<li>The remote SIM card should be selected in order to use the remote SIM service.</li>
<li>As runtime switch is not currently supported, the switch between local and remote SIM card requires a platform reset to take effect.</li>
</ul>
</dd></dl>
<p>A sample code of a basic remote SIM server is available in the following page:</p><ul>
<li><a class="el" href="c_rsimTest.html">Sample code</a></li>
</ul>
<hr/>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
