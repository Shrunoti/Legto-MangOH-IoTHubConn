<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: framework/liblegato/linux/fdMonitor.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fd_monitor_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fdMonitor.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="legato_8h_source.html">legato.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="event_loop_8h_source.html">eventLoop.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thread_8h_source.html">thread.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fd_monitor_8h_source.html">fdMonitor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="limit_8h_source.html">limit.h</a>&quot;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_fd_monitor__t.html">FdMonitor_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afade2d1c034a300007e1435974a6a0c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#afade2d1c034a300007e1435974a6a0c6">MAX_FD_MONITOR_NAME_BYTES</a>&#160;&#160;&#160;<a class="el" href="limit_8h.html#a089f06d273b054f909c21c092d4b3918">LIMIT_MAX_MEM_POOL_NAME_BYTES</a></td></tr>
<tr class="memdesc:afade2d1c034a300007e1435974a6a0c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of bytes in a File Descriptor Monitor's name, including the null terminator.  <a href="#afade2d1c034a300007e1435974a6a0c6">More...</a><br /></td></tr>
<tr class="separator:afade2d1c034a300007e1435974a6a0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19d988964dd22cd571d09dde4a2b5ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#ac19d988964dd22cd571d09dde4a2b5ae">DEFAULT_FD_MONITOR_POOL_SIZE</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:ac19d988964dd22cd571d09dde4a2b5ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0376b2ead2de10bb7ab6a4d21ec304e9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a0376b2ead2de10bb7ab6a4d21ec304e9">LOCK</a>&#160;&#160;&#160;<a class="el" href="sbtrace_8c.html#a7c6c2e5e914cf8eca19d150e90f3b106">LE_ASSERT</a>(pthread_mutex_lock(&amp;<a class="el" href="thread_8c.html#abc03085ccf7c38e092cdf06bf6b98ea6">Mutex</a>) == 0);</td></tr>
<tr class="memdesc:a0376b2ead2de10bb7ab6a4d21ec304e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the mutex.  <a href="#a0376b2ead2de10bb7ab6a4d21ec304e9">More...</a><br /></td></tr>
<tr class="separator:a0376b2ead2de10bb7ab6a4d21ec304e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac82effb31e82e32254efc8b57251d59e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#ac82effb31e82e32254efc8b57251d59e">UNLOCK</a>&#160;&#160;&#160;<a class="el" href="sbtrace_8c.html#a7c6c2e5e914cf8eca19d150e90f3b106">LE_ASSERT</a>(pthread_mutex_unlock(&amp;<a class="el" href="thread_8c.html#abc03085ccf7c38e092cdf06bf6b98ea6">Mutex</a>) == 0);</td></tr>
<tr class="memdesc:ac82effb31e82e32254efc8b57251d59e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the mutex.  <a href="#ac82effb31e82e32254efc8b57251d59e">More...</a><br /></td></tr>
<tr class="separator:ac82effb31e82e32254efc8b57251d59e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6aa8edcd99914757600b5d3b259bb7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a5f6aa8edcd99914757600b5d3b259bb7">TRACE</a>(...)&#160;&#160;&#160;<a class="el" href="le__log_8h.html#a331fb6c78ccddeafc455ad9c64e42008">LE_TRACE</a>(<a class="el" href="timer_8c.html#a84d541f37420ace8bdf697deca689deb">TraceRef</a>, ##__VA_ARGS__)</td></tr>
<tr class="separator:a5f6aa8edcd99914757600b5d3b259bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad0e6bd30e8a4e8d565bd386765dc3f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#aad0e6bd30e8a4e8d565bd386765dc3f9">IS_TRACE_ENABLED</a>()&#160;&#160;&#160;<a class="el" href="le__log_8h.html#a0746e2e37585f61ccdf7ce4976909936">LE_IS_TRACE_ENABLED</a>(<a class="el" href="timer_8c.html#a84d541f37420ace8bdf697deca689deb">TraceRef</a>)</td></tr>
<tr class="memdesc:aad0e6bd30e8a4e8d565bd386765dc3f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro used to check if trace output is enabled in this module.  <a href="#aad0e6bd30e8a4e8d565bd386765dc3f9">More...</a><br /></td></tr>
<tr class="separator:aad0e6bd30e8a4e8d565bd386765dc3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a930b52156f5e1e9dfd200361345aed8a"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a930b52156f5e1e9dfd200361345aed8a">PollToEPoll</a> (short pollFlags)</td></tr>
<tr class="separator:a930b52156f5e1e9dfd200361345aed8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a163677cf8db3df59bc16bae1fec8f7e6"><td class="memItemLeft" align="right" valign="top">static short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a163677cf8db3df59bc16bae1fec8f7e6">EPollToPoll</a> (uint32_t epollFlags)</td></tr>
<tr class="separator:a163677cf8db3df59bc16bae1fec8f7e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa5e62d8230d8057ac787326bb95c76"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a4fa5e62d8230d8057ac787326bb95c76">GetPollEventsText</a> (char *buffPtr, size_t buffSize, short events)</td></tr>
<tr class="separator:a4fa5e62d8230d8057ac787326bb95c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a946ffcbdfd7745f541f2a4f0fc993d69"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a946ffcbdfd7745f541f2a4f0fc993d69">StopMonitoringFd</a> (<a class="el" href="struct_fd_monitor__t.html">FdMonitor_t</a> *fdMonitorPtr)</td></tr>
<tr class="separator:a946ffcbdfd7745f541f2a4f0fc993d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6398cb1fd8ca24dc425a8d59915aa4d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#ad6398cb1fd8ca24dc425a8d59915aa4d">DeleteFdMonitor</a> (<a class="el" href="struct_fd_monitor__t.html">FdMonitor_t</a> *fdMonitorPtr)</td></tr>
<tr class="separator:ad6398cb1fd8ca24dc425a8d59915aa4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522c958875902abca37d843cb879024f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a522c958875902abca37d843cb879024f">DispatchToHandler</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *param1Ptr, <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *param2Ptr)</td></tr>
<tr class="separator:a522c958875902abca37d843cb879024f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb8ed5e90ccebc7cdb7f7743bd13fb7d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#acb8ed5e90ccebc7cdb7f7743bd13fb7d">UpdateEpollFd</a> (<a class="el" href="struct_fd_monitor__t.html">FdMonitor_t</a> *monitorPtr)</td></tr>
<tr class="separator:acb8ed5e90ccebc7cdb7f7743bd13fb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19c8a1005007350074559f38fa0b7fe7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a19c8a1005007350074559f38fa0b7fe7">fdMon_Init</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a19c8a1005007350074559f38fa0b7fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94f432783c87e2dab5843f40329a04d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#ad94f432783c87e2dab5843f40329a04d">fdMon_InitThread</a> (<a class="el" href="structevent___per_thread_rec__t.html">event_PerThreadRec_t</a> *perThreadRecPtr)</td></tr>
<tr class="separator:ad94f432783c87e2dab5843f40329a04d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2dd26ce5f3b6ef107675c3f04254418"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#ae2dd26ce5f3b6ef107675c3f04254418">fdMon_Report</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *safeRef, uint32_t eventFlags)</td></tr>
<tr class="separator:ae2dd26ce5f3b6ef107675c3f04254418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f0026661923bebf05ade496d574cc93"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a4f0026661923bebf05ade496d574cc93">fdMon_DestructThread</a> (<a class="el" href="structevent___per_thread_rec__t.html">event_PerThreadRec_t</a> *perThreadRecPtr)</td></tr>
<tr class="separator:a4f0026661923bebf05ade496d574cc93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52902d634d810f9b7a23c53c9c5164f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a52902d634d810f9b7a23c53c9c5164f0">le_fdMonitor_Create</a> (const char *name, int <a class="el" href="app_stop_client_8c.html#a44f21d5190b5a6df8089f54799628d7e">fd</a>, <a class="el" href="le__fd_monitor_8h.html#ac2d5531f6fae37076c9a79682091a161">le_fdMonitor_HandlerFunc_t</a> handlerFunc, short events)</td></tr>
<tr class="separator:a52902d634d810f9b7a23c53c9c5164f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a497aee19dbedadf884f404958713b414"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a497aee19dbedadf884f404958713b414">le_fdMonitor_Enable</a> (<a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> monitorRef, short events)</td></tr>
<tr class="separator:a497aee19dbedadf884f404958713b414"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada2b1023507b99e9247175dd3ffe5d48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#ada2b1023507b99e9247175dd3ffe5d48">le_fdMonitor_Disable</a> (<a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> monitorRef, short events)</td></tr>
<tr class="separator:ada2b1023507b99e9247175dd3ffe5d48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a93ae01f1e6faf1d0c7645752d4442"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a66a93ae01f1e6faf1d0c7645752d4442">le_fdMonitor_SetDeferrable</a> (<a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> monitorRef, bool isDeferrable)</td></tr>
<tr class="separator:a66a93ae01f1e6faf1d0c7645752d4442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88e40be018bcd6cd47a64bde49a9f98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#af88e40be018bcd6cd47a64bde49a9f98">le_fdMonitor_SetContextPtr</a> (<a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> monitorRef, <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *contextPtr)</td></tr>
<tr class="separator:af88e40be018bcd6cd47a64bde49a9f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3073205dc7ee7a054857119bc11c9dfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a3073205dc7ee7a054857119bc11c9dfc">le_fdMonitor_GetContextPtr</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a3073205dc7ee7a054857119bc11c9dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a688da8b3627d20b01795dfa1ae46bb78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a688da8b3627d20b01795dfa1ae46bb78">le_fdMonitor_GetMonitor</a> (<a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>)</td></tr>
<tr class="separator:a688da8b3627d20b01795dfa1ae46bb78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8761888bcd44c4826d02b5e5931168f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#af8761888bcd44c4826d02b5e5931168f">le_fdMonitor_GetFd</a> (<a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> monitorRef)</td></tr>
<tr class="separator:af8761888bcd44c4826d02b5e5931168f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7f0f1a0cd2f99b081403784f048aef0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#ad7f0f1a0cd2f99b081403784f048aef0">le_fdMonitor_Delete</a> (<a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> monitorRef)</td></tr>
<tr class="separator:ad7f0f1a0cd2f99b081403784f048aef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5807b63ae135315be08e840a5316972d"><td class="memItemLeft" align="right" valign="top">static pthread_key_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a5807b63ae135315be08e840a5316972d">FDMonitorPtrKey</a></td></tr>
<tr class="separator:a5807b63ae135315be08e840a5316972d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac173ffec077860ae16b85412b4709870"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__mem_8h.html#a44a896f6a0a1a8c733e8038eb332989e">le_mem_PoolRef_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#ac173ffec077860ae16b85412b4709870">FdMonitorPool</a></td></tr>
<tr class="separator:ac173ffec077860ae16b85412b4709870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa849aa7d1207f8487242ee2d5ccc9314"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__safe_ref_8h.html#aaf8fb3412fb840cb50366856affaf69b">le_ref_MapRef_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#aa849aa7d1207f8487242ee2d5ccc9314">FdMonitorRefMap</a></td></tr>
<tr class="separator:aa849aa7d1207f8487242ee2d5ccc9314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc03085ccf7c38e092cdf06bf6b98ea6"><td class="memItemLeft" align="right" valign="top">static pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#abc03085ccf7c38e092cdf06bf6b98ea6">Mutex</a> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr class="separator:abc03085ccf7c38e092cdf06bf6b98ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d541f37420ace8bdf697deca689deb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="le__log_8h.html#a055e29785e8d1c5bf1b3a230df8d65b7">le_log_TraceRef_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fd_monitor_8c.html#a84d541f37420ace8bdf697deca689deb">TraceRef</a></td></tr>
<tr class="separator:a84d541f37420ace8bdf697deca689deb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="fdMonitor_DataStructures"></a>
Data Structures</h1>
<ul>
<li><b> FD Monitors </b> - One per monitored file descriptor. Keeps track of the file descriptor, what fd events are being monitored, and what thread is doing the monitoring.</li>
</ul>
<p>FD Monitor objects are allocated from the FD Monitor Pool and are kept on the FD Monitor List.</p>
<h1><a class="anchor" id="fdMonitor_Algorithm"></a>
Algorithm</h1>
<p>When a file descriptor event is detected by the Event Loop, <a class="el" href="fd_monitor_8c.html#ae2dd26ce5f3b6ef107675c3f04254418">fdMon_Report()</a> is called with the FD Monitor Reference (a safe reference) and a bit map containing the events that were detected. <a class="el" href="fd_monitor_8c.html#ae2dd26ce5f3b6ef107675c3f04254418">fdMon_Report()</a> queues a function call (<a class="el" href="fd_monitor_8c.html#a522c958875902abca37d843cb879024f">DispatchToHandler()</a>) to the calling thread. When that function gets called, it does a look-up of the safe reference. If it finds an FD Monitor object matching that reference (it could have been deleted in the meantime), then it calls its registered handler function for that event.</p>
<p>The reason it was decided not to use Publish-Subscribe Events for this feature is that Event IDs can't be deleted, and yet FD Monitors can.</p>
<p>In some cases (e.g., with regular files), the fd doesn't support epoll(). In those cases, we treat the fd as if it is always ready to be read from and written to. If either EPOLLIN or EPOLLOUT are enabled in the epoll events set for such an fd, <a class="el" href="fd_monitor_8c.html#a522c958875902abca37d843cb879024f">DispatchToHandler()</a> is immediately queued to the thread's Event Queue</p><ul>
<li>When the FD Monitor is created,</li>
<li>When <a class="el" href="fd_monitor_8c.html#a522c958875902abca37d843cb879024f">DispatchToHandler()</a> finishes running the handler function and the FD Monitor has not been deleted and still has at least one of EPOLLIN or EPOLLOUT enabled.</li>
<li>When <a class="el" href="fd_monitor_8c.html#a497aee19dbedadf884f404958713b414">le_fdMonitor_Enable()</a> is called for an FD Monitor from outside that FD Monitor's handler.</li>
</ul>
<h1><a class="anchor" id="fdMonitor_Threads"></a>
Threads</h1>
<p>Only the thread that creates an FD Monitor is allowed to perform operations on that FD Monitor, including deleting the FD Monitor.</p>
<p>The Safe Reference Map is shared between threads, though, so any access to it must be protected from races.</p>
<p>Copyright (C) Sierra Wireless Inc. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ac19d988964dd22cd571d09dde4a2b5ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_FD_MONITOR_POOL_SIZE&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of objects in the process-wide FD Monitor Pool, from which all FD Monitor objects are allocated. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000039">Todo:</a></b></dt><dd>Make this configurable. </dd></dl>

</div>
</div>
<a class="anchor" id="aad0e6bd30e8a4e8d565bd386765dc3f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_TRACE_ENABLED</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="le__log_8h.html#a0746e2e37585f61ccdf7ce4976909936">LE_IS_TRACE_ENABLED</a>(<a class="el" href="timer_8c.html#a84d541f37420ace8bdf697deca689deb">TraceRef</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro used to check if trace output is enabled in this module. </p>

</div>
</div>
<a class="anchor" id="a0376b2ead2de10bb7ab6a4d21ec304e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOCK&#160;&#160;&#160;<a class="el" href="sbtrace_8c.html#a7c6c2e5e914cf8eca19d150e90f3b106">LE_ASSERT</a>(pthread_mutex_lock(&amp;<a class="el" href="thread_8c.html#abc03085ccf7c38e092cdf06bf6b98ea6">Mutex</a>) == 0);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locks the mutex. </p>

</div>
</div>
<a class="anchor" id="afade2d1c034a300007e1435974a6a0c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_FD_MONITOR_NAME_BYTES&#160;&#160;&#160;<a class="el" href="limit_8h.html#a089f06d273b054f909c21c092d4b3918">LIMIT_MAX_MEM_POOL_NAME_BYTES</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of bytes in a File Descriptor Monitor's name, including the null terminator. </p>

</div>
</div>
<a class="anchor" id="a5f6aa8edcd99914757600b5d3b259bb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRACE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="le__log_8h.html#a331fb6c78ccddeafc455ad9c64e42008">LE_TRACE</a>(<a class="el" href="timer_8c.html#a84d541f37420ace8bdf697deca689deb">TraceRef</a>, ##__VA_ARGS__)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Macro used to generate trace output in this module. Takes the same parameters as <a class="el" href="le__log_8h.html#a2a91ea8857cf190fde71d85ba930a498" title="Debug message. ">LE_DEBUG()</a> et. al. </p>

</div>
</div>
<a class="anchor" id="ac82effb31e82e32254efc8b57251d59e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNLOCK&#160;&#160;&#160;<a class="el" href="sbtrace_8c.html#a7c6c2e5e914cf8eca19d150e90f3b106">LE_ASSERT</a>(pthread_mutex_unlock(&amp;<a class="el" href="thread_8c.html#abc03085ccf7c38e092cdf06bf6b98ea6">Mutex</a>) == 0);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlocks the mutex. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ad6398cb1fd8ca24dc425a8d59915aa4d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> DeleteFdMonitor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fd_monitor__t.html">FdMonitor_t</a> *&#160;</td>
          <td class="paramname"><em>fdMonitorPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deletes a FD Monitor object for a given thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fdMonitorPtr</td><td>Pointer to the FD Monitor to be deleted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a522c958875902abca37d843cb879024f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> DispatchToHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>param1Ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>param2Ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Dispatch an FD Event to the appropriate registered handler function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param1Ptr</td><td>FD Monitor safe reference. </td></tr>
    <tr><td class="paramname">param2Ptr</td><td>epoll() event flags. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a163677cf8db3df59bc16bae1fec8f7e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static short EPollToPoll </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>epollFlags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts a set of epoll(7) event flags into a set of poll(2) event flags.</p>
<dl class="section return"><dt>Returns</dt><dd>Bit map containing poll(2) events flags. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">epollFlags</td><td>Bit map containing epoll(7) event flags. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4f0026661923bebf05ade496d574cc93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> fdMon_DestructThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structevent___per_thread_rec__t.html">event_PerThreadRec_t</a> *&#160;</td>
          <td class="paramname"><em>perThreadRecPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete all FD Monitor objects for the calling thread.</p>
<dl class="section note"><dt>Note</dt><dd>This is only called by the thread that is being destructed. </dd></dl>

</div>
</div>
<a class="anchor" id="a19c8a1005007350074559f38fa0b7fe7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> fdMon_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the FD Monitor module.</p>
<p>This function must be called exactly once at process start-up, before any other FD Monitor functions are called. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000040">Todo:</a></b></dt><dd>Make this configurable. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000041">Todo:</a></b></dt><dd>Make this configurable. </dd></dl>

</div>
</div>
<a class="anchor" id="ad94f432783c87e2dab5843f40329a04d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> fdMon_InitThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structevent___per_thread_rec__t.html">event_PerThreadRec_t</a> *&#160;</td>
          <td class="paramname"><em>perThreadRecPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the FD Monitor part of the Event Loop API's per-thread record.</p>
<p>This function must be called exactly once at thread start-up, before any other FD Monitor functions are called by that thread. </p>

</div>
</div>
<a class="anchor" id="ae2dd26ce5f3b6ef107675c3f04254418"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> fdMon_Report </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>safeRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>eventFlags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Report FD Events.</p>
<p>This is called by the Event Loop when it detects events on a file descriptor that is being monitored. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">safeRef</td><td>Safe Reference for the FD Monitor object for the fd. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">eventFlags</td><td>OR'd together event flags from epoll_wait(). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4fa5e62d8230d8057ac787326bb95c76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* GetPollEventsText </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get a human readable string describing the fd events in a given bit map.</p>
<dl class="section return"><dt>Returns</dt><dd>buffPtr. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffPtr</td><td>Pointer to buffer to put the string in. </td></tr>
    <tr><td class="paramname">buffSize</td><td>Size of the buffer, in bytes. </td></tr>
    <tr><td class="paramname">events</td><td>Bit map of events (see 'man 2 poll'). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a52902d634d810f9b7a23c53c9c5164f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> le_fdMonitor_Create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="le__fd_monitor_8h.html#ac2d5531f6fae37076c9a79682091a161">le_fdMonitor_HandlerFunc_t</a>&#160;</td>
          <td class="paramname"><em>handlerFunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a File Descriptor Monitor.</p>
<p>Creates an object that will monitor a given file descriptor for events.</p>
<p>The monitoring will be performed by the event loop of the thread that created the Monitor object. If that thread is blocked, no events will be detected for that file descriptor until that thread is unblocked and returns to its event loop.</p>
<p>Events that can be enabled for monitoring:</p>
<ul>
<li><code>POLLIN</code> = Data available to read.</li>
<li><code>POLLPRI</code> = Urgent data available to read (e.g., out-of-band data on a socket).</li>
<li><code>POLLOUT</code> = Writing to the fd should accept some data now.</li>
</ul>
<p>These are bitmask values and can be combined using the bit-wise OR operator ('|').</p>
<p>The following events are always monitored, even if not requested:</p>
<ul>
<li><code>POLLRDHUP</code> = Other end of stream socket closed or shutdown.</li>
<li><code>POLLERR</code> = Error occurred.</li>
<li><code>POLLHUP</code> = Hang up.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Reference to the object, which is needed for later deletion.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Doesn't return on failure, there's no need to check the return value for errors. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Name of the object (for diagnostics). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>File descriptor to be monitored for events. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handlerFunc</td><td>Handler function. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">events</td><td>Initial set of events to be monitored. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad7f0f1a0cd2f99b081403784f048aef0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_fdMonitor_Delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td>
          <td class="paramname"><em>monitorRef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes a file descriptor monitor object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">monitorRef</td><td>Reference to the File Descriptor Monitor object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ada2b1023507b99e9247175dd3ffe5d48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_fdMonitor_Disable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td>
          <td class="paramname"><em>monitorRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disables monitoring for events on a file descriptor.</p>
<p>Events that can be disabled for monitoring:</p>
<ul>
<li><code>POLLIN</code> = Data available to read.</li>
<li><code>POLLPRI</code> = Urgent data available to read (e.g., out-of-band data on a socket).</li>
<li><code>POLLOUT</code> = Writing to the fd should accept some data now.</li>
</ul>
<p>These are bitmask values and can be combined using the bit-wise OR operator ('|'). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">monitorRef</td><td>Reference to the File Descriptor Monitor object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">events</td><td>Bit map of events. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a497aee19dbedadf884f404958713b414"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_fdMonitor_Enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td>
          <td class="paramname"><em>monitorRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables monitoring for events on a file descriptor.</p>
<p>Events that can be enabled for monitoring:</p>
<ul>
<li><code>POLLIN</code> = Data available to read.</li>
<li><code>POLLPRI</code> = Urgent data available to read (e.g., out-of-band data on a socket).</li>
<li><code>POLLOUT</code> = Writing to the fd should accept some data now.</li>
</ul>
<p>These are bitmask values and can be combined using the bit-wise OR operator ('|'). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">monitorRef</td><td>Reference to the File Descriptor Monitor object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">events</td><td>Bit map of events. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3073205dc7ee7a054857119bc11c9dfc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>* le_fdMonitor_GetContextPtr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the Context Pointer for File Descriptor Monitor's handler function.</p>
<dl class="section return"><dt>Returns</dt><dd>The context pointer set using <a class="el" href="fd_monitor_8c.html#af88e40be018bcd6cd47a64bde49a9f98">le_fdMonitor_SetContextPtr()</a>, or NULL if it hasn't been set.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This only works inside the handler function. </dd></dl>

</div>
</div>
<a class="anchor" id="af8761888bcd44c4826d02b5e5931168f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int le_fdMonitor_GetFd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td>
          <td class="paramname"><em>monitorRef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the file descriptor that an FD Monitor object is monitoring.</p>
<dl class="section return"><dt>Returns</dt><dd>The fd. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">monitorRef</td><td>Reference to the File Descriptor Monitor. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a688da8b3627d20b01795dfa1ae46bb78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a> le_fdMonitor_GetMonitor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets a reference to the File Descriptor Monitor whose handler function is currently running.</p>
<dl class="section return"><dt>Returns</dt><dd>File Descriptor Monitor reference.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This only works inside the handler function. </dd></dl>

</div>
</div>
<a class="anchor" id="af88e40be018bcd6cd47a64bde49a9f98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_fdMonitor_SetContextPtr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td>
          <td class="paramname"><em>monitorRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> *&#160;</td>
          <td class="paramname"><em>contextPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the Context Pointer for File Descriptor Monitor's handler function. This can be retrieved by the handler by calling <a class="el" href="fd_monitor_8c.html#a3073205dc7ee7a054857119bc11c9dfc">le_fdMonitor_GetContextPtr()</a> when the handler function is running. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">monitorRef</td><td>Reference to the File Descriptor Monitor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">contextPtr</td><td>Opaque context pointer value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a66a93ae01f1e6faf1d0c7645752d4442"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> le_fdMonitor_SetDeferrable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="le__fd_monitor_8h.html#a85048556f0b95147af81e76907895d42">le_fdMonitor_Ref_t</a>&#160;</td>
          <td class="paramname"><em>monitorRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isDeferrable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets if processing of events on a given fd is deferrable (the system is allowed to go to sleep while there are monitored events pending for this fd) or urgent (the system will be kept awake until there are no monitored events waiting to be handled for this fd).</p>
<p>If the process has <code>CAP_EPOLLWAKEUP</code> (or <code>CAP_BLOCK_SUSPEND</code>) capability, then fd events are considered urgent by default.</p>
<p>If the process does not have <code>CAP_EPOLLWAKEUP</code> (or <code>CAP_BLOCK_SUSPEND</code>) capability, then fd events are always deferrable, and calls to this function have no effect. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">monitorRef</td><td>Reference to the File Descriptor Monitor object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isDeferrable</td><td>true (deferrable) or false (urgent). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a930b52156f5e1e9dfd200361345aed8a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t PollToEPoll </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>pollFlags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts a set of poll(2) event flags into a set of epoll(7) event flags.</p>
<dl class="section return"><dt>Returns</dt><dd>Bit map containing epoll(7) events flags. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pollFlags</td><td>Bit map containing poll(2) event flags. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a946ffcbdfd7745f541f2a4f0fc993d69"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> StopMonitoringFd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fd_monitor__t.html">FdMonitor_t</a> *&#160;</td>
          <td class="paramname"><em>fdMonitorPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tell epoll(7) to stop monitoring an FD Monitor object's fd. </p>

</div>
</div>
<a class="anchor" id="acb8ed5e90ccebc7cdb7f7743bd13fb7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> UpdateEpollFd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_fd_monitor__t.html">FdMonitor_t</a> *&#160;</td>
          <td class="paramname"><em>monitorPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update the epoll(7) FD for a given FD Monitor object. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ac173ffec077860ae16b85412b4709870"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__mem_8h.html#a44a896f6a0a1a8c733e8038eb332989e">le_mem_PoolRef_t</a> FdMonitorPool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FD Monitor Pool</p>
<p>This is the main pool of FD Monitor objects from which FD Monitor objects are allocated. </p>

</div>
</div>
<a class="anchor" id="a5807b63ae135315be08e840a5316972d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_key_t FDMonitorPtrKey</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thread-specific data key for the FD Monitor Ptr of the currently running fd event handler.</p>
<p>This data item will be NULL if the thread is not currently running an fd event handler. </p>

</div>
</div>
<a class="anchor" id="aa849aa7d1207f8487242ee2d5ccc9314"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__safe_ref_8h.html#aaf8fb3412fb840cb50366856affaf69b">le_ref_MapRef_t</a> FdMonitorRefMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The Safe Reference Map to be used to create FD Monitor References.</p>
<dl class="section warning"><dt>Warning</dt><dd>This can be accessed by multiple threads. Use the Mutex to protect it from races. </dd></dl>

</div>
</div>
<a class="anchor" id="abc03085ccf7c38e092cdf06bf6b98ea6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t Mutex = PTHREAD_MUTEX_INITIALIZER</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mutex used to protect shared data structures in this module. </p>

</div>
</div>
<a class="anchor" id="a84d541f37420ace8bdf697deca689deb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__log_8h.html#a055e29785e8d1c5bf1b3a230df8d65b7">le_log_TraceRef_t</a> TraceRef</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Trace reference used for controlling tracing in this module. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
