<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LEGATO: framework/liblegato/linux/file.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/javascript">
//<![CDATA[
    // Detect if doc is served by eclipse
    if( ( (window.location.hostname == "127.0.0.1") || (window.location.hostname == "localhost") ) &&
        ( (window.location.port != "") && (window.location.port != 80) && (window.location.port != 443) ) )
    {
        // Inhibit init function from navtree
        initNavTree = function(toroot,relpath) {}
        $(document).ready(function(){
            navTree = document.getElementById("side-nav");
            if(navTree)
            {
                navTree.parentElement.removeChild(navTree);
            }
            $("#doc-content").css('margin-left',10);
        });
    }
//]]>
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html" title="Legato">
      <img alt="Logo" src="legatoLogo.png"/>
    </a>
    <div id="projectbrief">Simplifying IoT development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('liblegato_2linux_2file_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">file.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="liblegato_2linux_2file_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a82afc5bd5c90578bc65c47111ac41a6e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblegato_2linux_2file_8h.html#a82afc5bd5c90578bc65c47111ac41a6e">file_Exists</a> (const char *filePath)</td></tr>
<tr class="separator:a82afc5bd5c90578bc65c47111ac41a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1288aabdd53b3d32477c5ce1faa3d0bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblegato_2linux_2file_8h.html#a1288aabdd53b3d32477c5ce1faa3d0bf">file_Delete</a> (const char *filePath)</td></tr>
<tr class="separator:a1288aabdd53b3d32477c5ce1faa3d0bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b6a3d460373d55eea541131e1531603"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblegato_2linux_2file_8h.html#a9b6a3d460373d55eea541131e1531603">file_ReadStr</a> (const char *filePath, char *buffer, size_t size)</td></tr>
<tr class="separator:a9b6a3d460373d55eea541131e1531603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d37f190421b46ae5fac05ed5462f66e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblegato_2linux_2file_8h.html#a3d37f190421b46ae5fac05ed5462f66e">file_WriteStr</a> (const char *filePath, const char *string, mode_t mode)</td></tr>
<tr class="separator:a3d37f190421b46ae5fac05ed5462f66e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc665c3829f9b782c34cd50186b5a5c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblegato_2linux_2file_8h.html#acc665c3829f9b782c34cd50186b5a5c5">file_WriteStrAtomic</a> (const char *filePath, const char *string, mode_t mode)</td></tr>
<tr class="separator:acc665c3829f9b782c34cd50186b5a5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a4a38822777e12150785d4bd79af6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblegato_2linux_2file_8h.html#af3a4a38822777e12150785d4bd79af6f">file_Copy</a> (const char *sourcePathPtr, const char *destPathPtr, const char *smackLabelPtr)</td></tr>
<tr class="separator:af3a4a38822777e12150785d4bd79af6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad37fc0b425ae75b0af7034a265aa4877"><td class="memItemLeft" align="right" valign="top"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblegato_2linux_2file_8h.html#ad37fc0b425ae75b0af7034a265aa4877">file_CopyRecursive</a> (const char *sourcePathPtr, const char *destPathPtr, const char *smackLabelPtr)</td></tr>
<tr class="separator:ad37fc0b425ae75b0af7034a265aa4877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09c80a63dcb01e607fefde4086e3b56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="liblegato_2linux_2file_8h.html#ad09c80a63dcb01e607fefde4086e3b56">file_Rename</a> (const char *srcPath, const char *destPath)</td></tr>
<tr class="separator:ad09c80a63dcb01e607fefde4086e3b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af3a4a38822777e12150785d4bd79af6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> file_Copy </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sourcePathPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>destPathPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>smackLabelPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy a file. This function copies the source file's owner, permissions and extended attributes to the destination file as well.</p>
<dl class="section return"><dt>Returns</dt><dd>- LE_OK if the copy was successful.<ul>
<li>LE_NOT_PERMITTED if either the source or destination paths are not files or could not be opened.</li>
<li>LE_IO_ERROR if an IO error occurs during the copy operation.</li>
<li>LE_NOT_FOUND if source file or the destination directory does not exist. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sourcePathPtr</td><td>Copy from this path... </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">destPathPtr</td><td>To this path. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">smackLabelPtr</td><td>If not NULL, the file will have this smack label set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad37fc0b425ae75b0af7034a265aa4877"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="le__basics_8h.html#a1cca095ed6ebab24b57a636382a6c86c">le_result_t</a> file_CopyRecursive </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sourcePathPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>destPathPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>smackLabelPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy a batch of files recursively from one directory into another. This function copies the source files' owner, permissions and extended attributes to the destination files as well.</p>
<dl class="section note"><dt>Note</dt><dd>Does not copy mounted files or any files under mounted directories. Does not copy anything if the source path directory is empty.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>- LE_OK if the copy was successful.<ul>
<li>LE_NOT_PERMITTED if either the source or destination paths are not files or could not be opened.</li>
<li>LE_IO_ERROR if an IO error occurs during the copy operation.</li>
<li>LE_NOT_FOUND if source file or the destination directory does not exist. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sourcePathPtr</td><td>Copy recursively from this path... </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">destPathPtr</td><td>To this path. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">smackLabelPtr</td><td>If not NULL, the file will have this smack label set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1288aabdd53b3d32477c5ce1faa3d0bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> file_Delete </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes a file at a given path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filePath</td><td>Path to the file to delete. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a82afc5bd5c90578bc65c47111ac41a6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool file_Exists </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks whether or not a file exists at a given file system path.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the file exists and is a normal file. false otherwise. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filePath</td><td>Path to the file in question. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9b6a3d460373d55eea541131e1531603"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t file_ReadStr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a string from a file given by filePath into a buffer provided by the caller.</p>
<p>Will read up to size - 1 bytes from the file.</p>
<p>The result will always be null-terminated.</p>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes read (not including the null terminator) or -1 on failure.</dd></dl>
<p>Read a string from a file given by filePath into a buffer provided by the caller.</p>
<p>Will read up to size - 1 bytes from the file.</p>
<p>On success the output string will always be null-terminated.</p>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes read (not including the null terminator) or -1 on failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filePath</td><td>Path to the file to read from. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>The string is written to this buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>How big is this buffer (in bytes)? </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad09c80a63dcb01e607fefde4086e3b56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> file_Rename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>srcPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>destPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rename a file or directory. </p>

</div>
</div>
<a class="anchor" id="a3d37f190421b46ae5fac05ed5462f66e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> file_WriteStr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a null-terminated string to a file given by filePath. The null terminator will not be written. The file will be opened, the string will be written and the file will be closed. If the file does not exist, it will be created. If the file did previously exist, its previous contents will be discarded, but its previous DAC permissions will be kept. To replace the existing file completely, use <a class="el" href="liblegato_2linux_2file_8h.html#acc665c3829f9b782c34cd50186b5a5c5">file_WriteStrAtomic()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filePath</td><td>Path to the file to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">string</td><td>A string to write to this file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>DAC permission bits (see man 2 open). E.g., 0644 = rw-r&ndash;r&ndash; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acc665c3829f9b782c34cd50186b5a5c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_m_p_l_a_t_e__cdef_8h.html#ac9c84fa68bbad002983e35ce3663c686">void</a> file_WriteStrAtomic </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Atomically replace a file with another containing a string.</p>
<p>The string's null terminator will not be written to the file.</p>
<p>filePath.new will be created with the contents of the string, then renamed to filePath. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filePath</td><td>Path to the file to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">string</td><td>A string to write to this file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>DAC permission bits (see man 2 open). E.g., 0644 = rw-r&ndash;r&ndash; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.11
        </div>
    </div>
</body>
</html>
